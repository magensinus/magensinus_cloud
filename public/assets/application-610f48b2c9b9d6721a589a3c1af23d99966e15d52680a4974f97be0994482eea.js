var Rails,jQuery;(function(){var t=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(t);var v=t.Rails;(function(){(function(){v.cspNonce=function(){var t;return(t=document.querySelector("meta[name=csp-nonce]"))&&t.content}}).call(this),function(){var i,n;n=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,v.matches=function(t,e){return null!=e.exclude?n.call(t,e.selector)&&!n.call(t,e.exclude):n.call(t,e)},i="_ujsData",v.getData=function(t,e){var n;return null!=(n=t[i])?n[e]:void 0},v.setData=function(t,e,n){return null==t[i]&&(t[i]={}),t[i][e]=n},v.$=function(t){return Array.prototype.slice.call(document.querySelectorAll(t))}}.call(this),function(){var n,i,o;n=v.$,o=v.csrfToken=function(){var t;return(t=document.querySelector("meta[name=csrf-token]"))&&t.content},i=v.csrfParam=function(){var t;return(t=document.querySelector("meta[name=csrf-param]"))&&t.content},v.CSRFProtection=function(t){var e;if(null!=(e=o()))return t.setRequestHeader("X-CSRF-Token",e)},v.refreshCSRFTokens=function(){var t,e;if(e=o(),t=i(),null!=e&&null!=t)return n('form input[name="'+t+'"]').forEach(function(t){return t.value=e})}}.call(this),function(){var o,e,r,n;r=v.matches,"function"!=typeof(o=window.CustomEvent)&&((o=function(t,e){var n;return(n=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}).prototype=window.Event.prototype,n=o.prototype.preventDefault,o.prototype.preventDefault=function(){var t;return t=n.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),t}),e=v.fire=function(t,e,n){var i;return i=new o(e,{bubbles:!0,cancelable:!0,detail:n}),t.dispatchEvent(i),!i.defaultPrevented},v.stopEverything=function(t){return e(t.target,"ujs:everythingStopped"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},v.delegate=function(t,n,e,i){return t.addEventListener(e,function(t){var e;for(e=t.target;e instanceof Element&&!r(e,n);)e=e.parentNode;if(e instanceof Element&&!1===i.call(e,t))return t.preventDefault(),t.stopPropagation()})}}.call(this),function(){var e,i,t,r,o,s;r=v.cspNonce,i=v.CSRFProtection,v.fire,e={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},v.ajax=function(n){var i;return n=o(n),i=t(n,function(){var t,e;return e=s(null!=(t=i.response)?t:i.responseText,i.getResponseHeader("Content-Type")),2===Math.floor(i.status/100)?"function"==typeof n.success&&n.success(e,i.statusText,i):"function"==typeof n.error&&n.error(e,i.statusText,i),"function"==typeof n.complete?n.complete(i,i.statusText):void 0}),!(null!=n.beforeSend&&!n.beforeSend(i,n))&&(i.readyState===XMLHttpRequest.OPENED?i.send(n.data):void 0)},o=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),"GET"===t.type&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),null==e[t.dataType]&&(t.dataType="*"),t.accept=e[t.dataType],"*"!==t.dataType&&(t.accept+=", */*; q=0.01"),t},t=function(t,e){var n;return(n=new XMLHttpRequest).open(t.type,t.url,!0),n.setRequestHeader("Accept",t.accept),"string"==typeof t.data&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.crossDomain||n.setRequestHeader("X-Requested-With","XMLHttpRequest"),i(n),n.withCredentials=!!t.withCredentials,n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)return e(n)},n},s=function(t,e){var n,i;if("string"==typeof t&&"string"==typeof e)if(e.match(/\bjson\b/))try{t=JSON.parse(t)}catch(o){}else if(e.match(/\b(?:java|ecma)script\b/))(i=document.createElement("script")).nonce=r(),i.text=t,document.head.appendChild(i).parentNode.removeChild(i);else if(e.match(/\b(xml|html|svg)\b/)){n=new DOMParser,e=e.replace(/;.+/,"");try{t=n.parseFromString(t,e)}catch(o){}}return t},v.href=function(t){return t.href},v.isCrossDomain=function(t){var e,n;(e=document.createElement("a")).href=location.href,n=document.createElement("a");try{return n.href=t,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return i,!0}}}.call(this),function(){var o,r;o=v.matches,r=function(t){return Array.prototype.slice.call(t)},v.serializeElement=function(t,e){var n,i;return n=[t],o(t,"form")&&(n=r(t.elements)),i=[],n.forEach(function(e){if(e.name&&!e.disabled)return o(e,"select")?r(e.options).forEach(function(t){if(t.selected)return i.push({name:e.name,value:t.value})}):e.checked||-1===["radio","checkbox","submit"].indexOf(e.type)?i.push({name:e.name,value:e.value}):void 0}),e&&i.push(e),i.map(function(t){return null!=t.name?encodeURIComponent(t.name)+"="+encodeURIComponent(t.value):t}).join("&")},v.formElements=function(t,e){return o(t,"form")?r(t.elements).filter(function(t){return o(t,e)}):r(t.querySelectorAll(e))}}.call(this),function(){var e,r,n;r=v.fire,n=v.stopEverything,v.handleConfirm=function(t){if(!e(this))return n(t)},e=function(t){var e,n,i;if(!(i=t.getAttribute("data-confirm")))return!0;if(e=!1,r(t,"confirm")){try{e=confirm(i)}catch(o){}n=r(t,"confirm:complete",[e])}return e&&n}}.call(this),function(){var n,i,o,r,s,a,e,u,c,l,h;c=v.matches,u=v.getData,l=v.setData,h=v.stopEverything,e=v.formElements,v.handleDisabledElement=function(t){if(this.disabled)return h(t)},v.enableElement=function(t){var e;return e=t instanceof Event?t.target:t,c(e,v.linkDisableSelector)?a(e):c(e,v.buttonDisableSelector)||c(e,v.formEnableSelector)?r(e):c(e,v.formSubmitSelector)?s(e):void 0},v.disableElement=function(t){var e;return e=t instanceof Event?t.target:t,c(e,v.linkDisableSelector)?o(e):c(e,v.buttonDisableSelector)||c(e,v.formDisableSelector)?n(e):c(e,v.formSubmitSelector)?i(e):void 0},o=function(t){var e;return null!=(e=t.getAttribute("data-disable-with"))&&(l(t,"ujs:enable-with",t.innerHTML),t.innerHTML=e),t.addEventListener("click",h),l(t,"ujs:disabled",!0)},a=function(t){var e;return null!=(e=u(t,"ujs:enable-with"))&&(t.innerHTML=e,l(t,"ujs:enable-with",null)),t.removeEventListener("click",h),l(t,"ujs:disabled",null)},i=function(t){return e(t,v.formDisableSelector).forEach(n)},n=function(t){var e;return null!=(e=t.getAttribute("data-disable-with"))&&(c(t,"button")?(l(t,"ujs:enable-with",t.innerHTML),t.innerHTML=e):(l(t,"ujs:enable-with",t.value),t.value=e)),t.disabled=!0,l(t,"ujs:disabled",!0)},s=function(t){return e(t,v.formEnableSelector).forEach(r)},r=function(t){var e;return null!=(e=u(t,"ujs:enable-with"))&&(c(t,"button")?t.innerHTML=e:t.value=e,l(t,"ujs:enable-with",null)),t.disabled=!1,l(t,"ujs:disabled",null)}}.call(this),function(){var u;u=v.stopEverything,v.handleMethod=function(t){var e,n,i,o,r,s,a;if(a=(s=this).getAttribute("data-method"))return r=v.href(s),n=v.csrfToken(),e=v.csrfParam(),i=document.createElement("form"),o="<input name='_method' value='"+a+"' type='hidden' />",null==e||null==n||v.isCrossDomain(r)||(o+="<input name='"+e+"' value='"+n+"' type='hidden' />"),o+='<input type="submit" />',i.method="post",i.action=r,i.target=s.target,i.innerHTML=o,i.style.display="none",document.body.appendChild(i),i.querySelector('[type="submit"]').click(),u(t)}}.call(this),function(){var u,c,l,h,p,d,f,m,g,y=[].slice;d=v.matches,l=v.getData,m=v.setData,c=v.fire,g=v.stopEverything,u=v.ajax,h=v.isCrossDomain,f=v.serializeElement,p=function(t){var e;return null!=(e=t.getAttribute("data-remote"))&&"false"!==e},v.handleRemote=function(t){var e,n,i,o,r,s,a;return!p(o=this)||(c(o,"ajax:before")?(a=o.getAttribute("data-with-credentials"),i=o.getAttribute("data-type")||"script",d(o,v.formSubmitSelector)?(e=l(o,"ujs:submit-button"),r=l(o,"ujs:submit-button-formmethod")||o.method,s=l(o,"ujs:submit-button-formaction")||o.getAttribute("action")||location.href,"GET"===r.toUpperCase()&&(s=s.replace(/\?.*$/,"")),"multipart/form-data"===o.enctype?(n=new FormData(o),null!=e&&n.append(e.name,e.value)):n=f(o,e),m(o,"ujs:submit-button",null),m(o,"ujs:submit-button-formmethod",null),m(o,"ujs:submit-button-formaction",null)):d(o,v.buttonClickSelector)||d(o,v.inputChangeSelector)?(r=o.getAttribute("data-method"),s=o.getAttribute("data-url"),n=f(o,o.getAttribute("data-params"))):(r=o.getAttribute("data-method"),s=v.href(o),n=o.getAttribute("data-params")),u({type:r||"GET",url:s,data:n,dataType:i,beforeSend:function(t,e){return c(o,"ajax:beforeSend",[t,e])?c(o,"ajax:send",[t]):(c(o,"ajax:stopped"),!1)},success:function(){var t;return t=1<=arguments.length?y.call(arguments,0):[],c(o,"ajax:success",t)},error:function(){var t;return t=1<=arguments.length?y.call(arguments,0):[],c(o,"ajax:error",t)},complete:function(){var t;return t=1<=arguments.length?y.call(arguments,0):[],c(o,"ajax:complete",t)},crossDomain:h(s),withCredentials:null!=a&&"false"!==a}),g(t)):(c(o,"ajax:stopped"),!1))},v.formSubmitButtonClick=function(){var t,e;if(e=(t=this).form)return t.name&&m(e,"ujs:submit-button",{name:t.name,value:t.value}),m(e,"ujs:formnovalidate-button",t.formNoValidate),m(e,"ujs:submit-button-formaction",t.getAttribute("formaction")),m(e,"ujs:submit-button-formmethod",t.getAttribute("formmethod"))},v.handleMetaClick=function(t){var e,n,i;if(i=((n=this).getAttribute("data-method")||"GET").toUpperCase(),e=n.getAttribute("data-params"),(t.metaKey||t.ctrlKey)&&"GET"===i&&!e)return t.stopImmediatePropagation()}}.call(this),function(){var t,i,e,n,o,r,s,a,u,c,l,h,p,d;r=v.fire,e=v.delegate,a=v.getData,t=v.$,d=v.refreshCSRFTokens,i=v.CSRFProtection,o=v.enableElement,n=v.disableElement,c=v.handleDisabledElement,u=v.handleConfirm,p=v.handleRemote,s=v.formSubmitButtonClick,l=v.handleMetaClick,h=v.handleMethod,null==jQuery||null==jQuery.ajax||jQuery.rails||(jQuery.rails=v,jQuery.ajaxPrefilter(function(t,e,n){if(!t.crossDomain)return i(n)})),v.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return t(v.formEnableSelector).forEach(function(t){if(a(t,"ujs:disabled"))return o(t)}),t(v.linkDisableSelector).forEach(function(t){if(a(t,"ujs:disabled"))return o(t)})}),e(document,v.linkDisableSelector,"ajax:complete",o),e(document,v.linkDisableSelector,"ajax:stopped",o),e(document,v.buttonDisableSelector,"ajax:complete",o),e(document,v.buttonDisableSelector,"ajax:stopped",o),e(document,v.linkClickSelector,"click",c),e(document,v.linkClickSelector,"click",u),e(document,v.linkClickSelector,"click",l),e(document,v.linkClickSelector,"click",n),e(document,v.linkClickSelector,"click",p),e(document,v.linkClickSelector,"click",h),e(document,v.buttonClickSelector,"click",c),e(document,v.buttonClickSelector,"click",u),e(document,v.buttonClickSelector,"click",n),e(document,v.buttonClickSelector,"click",p),e(document,v.inputChangeSelector,"change",c),e(document,v.inputChangeSelector,"change",u),e(document,v.inputChangeSelector,"change",p),e(document,v.formSubmitSelector,"submit",c),e(document,v.formSubmitSelector,"submit",u),e(document,v.formSubmitSelector,"submit",p),e(document,v.formSubmitSelector,"submit",function(t){return setTimeout(function(){return n(t)},13)}),e(document,v.formSubmitSelector,"ajax:send",n),e(document,v.formSubmitSelector,"ajax:complete",o),e(document,v.formInputClickSelector,"click",c),e(document,v.formInputClickSelector,"click",u),e(document,v.formInputClickSelector,"click",s),document.addEventListener("DOMContentLoaded",d),window._rails_loaded=!0},window.Rails===v&&r(document,"rails:attachBindings")&&v.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=v:"function"==typeof define&&define.amd&&define(v)}).call(this),function(){var t=this;(function(){(function(){this.Turbolinks={supported:null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener,visit:function(t,e){return l.controller.visit(t,e)},clearCache:function(){return l.controller.clearCache()},setProgressBarDelay:function(t){return l.controller.setProgressBarDelay(t)}}}).call(this)}).call(t);var l=t.Turbolinks;(function(){(function(){var n,i,u,t,e,o,r,s,a,c=[].slice;l.copyObject=function(t){var e,n,i;for(e in n={},t)i=t[e],n[e]=i;return n},l.closest=function(t,e){return n.call(t,e)},n=null!=(a=document.documentElement.closest)?a:function(t){var e;for(e=this;e;){if(e.nodeType===Node.ELEMENT_NODE&&i.call(e,t))return e;e=e.parentNode}},l.defer=function(t){return setTimeout(t,1)},l.throttle=function(n){var i;return i=null,function(){var t,e;return t=1<=arguments.length?c.call(arguments,0):[],null!=i?i:i=requestAnimationFrame((e=this,function(){return i=null,n.apply(e,t)}))}},l.dispatch=function(t,e){var n,i,o,r,s,a;return a=(s=null!=e?e:{}).target,n=s.cancelable,i=s.data,(o=document.createEvent("Events")).initEvent(t,!0,!0===n),o.data=null!=i?i:{},o.cancelable&&!u&&(r=o.preventDefault,o.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),r.call(this)}),(null!=a?a:document).dispatchEvent(o),o},(s=document.createEvent("Events")).initEvent("test",!0,!0),s.preventDefault(),u=s.defaultPrevented,l.match=function(t,e){return i.call(t,e)},i=null!=(e=null!=(o=null!=(r=(t=document.documentElement).matchesSelector)?r:t.webkitMatchesSelector)?o:t.msMatchesSelector)?e:t.mozMatchesSelector,l.uuid=function(){var t,e,n;for(n="",t=e=1;e<=36;t=++e)n+=9===t||14===t||19===t||24===t?"-":15===t?"4":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}).call(this),function(){l.Location=function(){function t(t){var e,n;null==t&&(t=""),(n=document.createElement("a")).href=t.toString(),this.absoluteURL=n.href,(e=n.hash.length)<2?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=n.hash.slice(1))}var e,n,i,o;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.requestURL.match(/\/\/[^\/]*(\/[^?;]*)/))?e[1]:void 0)?t:"/"},t.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\.[^.]*$/))?e[0]:void 0)?t:""},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=n(t),this.isEqualTo(t)||o(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},n=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return i(t,"/")?t:t+"/"},o=function(t,e){return t.slice(0,e.length)===e},i=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};l.HttpRequest=function(){function t(t,e,n){this.delegate=t,this.requestCanceled=i(this.requestCanceled,this),this.requestTimedOut=i(this.requestTimedOut,this),this.requestFailed=i(this.requestFailed,this),this.requestLoaded=i(this.requestLoaded,this),this.requestProgressed=i(this.requestProgressed,this),this.url=l.Location.wrap(e).requestURL,this.referrer=l.Location.wrap(n).absoluteURL,this.createXHR()}return t.NETWORK_FAILURE=0,t.TIMEOUT_FAILURE=-1,t.timeout=60,t.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},t.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},t.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},t.prototype.requestLoaded=function(){return this.endRequest((e=this,function(){var t;return 200<=(t=e.xhr.status)&&t<300?e.delegate.requestCompletedWithResponse(e.xhr.responseText,e.xhr.getResponseHeader("Turbolinks-Location")):(e.failed=!0,e.delegate.requestFailedWithStatusCode(e.xhr.status,e.xhr.responseText))}));var e},t.prototype.requestFailed=function(){return this.endRequest((t=this,function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}));var t},t.prototype.requestTimedOut=function(){return this.endRequest((t=this,function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}));var t},t.prototype.requestCanceled=function(){return this.endRequest()},t.prototype.notifyApplicationBeforeRequestStart=function(){return l.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},t.prototype.notifyApplicationAfterRequestEnd=function(){return l.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},t.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},t.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},t.prototype.setProgress=function(t){var e;return this.progress=t,"function"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},t.prototype.destroy=function(){var t;return this.setProgress(1),"function"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},t}()}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};l.ProgressBar=function(){function t(){this.trickle=n(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var e;return e=300,t.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+e+"ms ease-out, opacity "+e/2+"ms "+e/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",t.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},t.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement((t=this,function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}))):void 0;var t},t.prototype.setValue=function(t){return this.value=t,this.refresh()},t.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},t.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},t.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,1.5*e)},t.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},t.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,e)},t.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},t.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},t.prototype.refresh=function(){return requestAnimationFrame((t=this,function(){return t.progressElement.style.width=10+90*t.value+"%"}));var t},t.prototype.createStylesheetElement=function(){var t;return(t=document.createElement("style")).type="text/css",t.textContent=this.constructor.defaultCSS,t},t.prototype.createProgressElement=function(){var t;return(t=document.createElement("div")).className="turbolinks-progress-bar",t},t}()}.call(this),function(){var o=function(t,e){return function(){return t.apply(e,arguments)}};l.BrowserAdapter=function(){function t(t){this.controller=t,this.showProgressBar=o(this.showProgressBar,this),this.progressBar=new l.ProgressBar}var n,i,e;return e=l.HttpRequest,n=e.NETWORK_FAILURE,i=e.TIMEOUT_FAILURE,t.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},t.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},t.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},t.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},t.prototype.visitRequestCompleted=function(t){return t.loadResponse()},t.prototype.visitRequestFailedWithStatusCode=function(t,e){switch(e){case n:case i:return this.reload();default:return t.loadResponse()}},t.prototype.visitRequestFinished=function(){return this.hideProgressBar()},t.prototype.visitCompleted=function(t){return t.followRedirect()},t.prototype.pageInvalidated=function(){return this.reload()},t.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},t.prototype.showProgressBar=function(){return this.progressBar.show()},t.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},t.prototype.reload=function(){return window.location.reload()},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};l.History=function(){function t(t){this.delegate=t,this.onPageLoad=e(this.onPageLoad,this),this.onPopState=e(this.onPopState,this)}return t.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},t.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},t.prototype.push=function(t,e){return t=l.Location.wrap(t),this.update("push",t,e)},t.prototype.replace=function(t,e){return t=l.Location.wrap(t),this.update("replace",t,e)},t.prototype.onPopState=function(t){var e,n,i,o;return this.shouldHandlePopState()&&(o=null!=(n=t.state)?n.turbolinks:void 0)?(e=l.Location.wrap(window.location),i=o.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(e,i)):void 0},t.prototype.onPageLoad=function(){return l.defer((t=this,function(){return t.pageLoaded=!0}));var t},t.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},t.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},t.prototype.update=function(t,e,n){var i;return i={turbolinks:{restorationIdentifier:n}},history[t+"State"](i,null,e)},t}()}.call(this),function(){l.HeadDetails=function(){function t(t){var e,n,i,o,r;for(this.elements={},n=0,o=t.length;n<o;n++)(r=t[n]).nodeType===Node.ELEMENT_NODE&&(i=r.outerHTML,(null!=(e=this.elements)[i]?e[i]:e[i]={type:a(r),tracked:s(r),elements:[]}).elements.push(r))}var r,e,n,s,a;return t.fromHeadElement=function(t){var e;return new this(null!=(e=null!=t?t.childNodes:void 0)?e:[])},t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var n;return function(){var t,e;for(n in e=[],t=this.elements)t[n].tracked&&e.push(n);return e}.call(this).join("")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("script",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails("stylesheet",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var n,i,o,r,s,a;for(i in s=[],o=this.elements)a=(r=o[i]).type,n=r.elements,a!==t||e.hasElementWithKey(i)||s.push(n[0]);return s},t.prototype.getProvisionalElements=function(){var t,e,n,i,o,r,s;for(e in n=[],i=this.elements)s=(o=i[e]).type,r=o.tracked,t=o.elements,null!=s||r?1<t.length&&n.push.apply(n,t.slice(1)):n.push.apply(n,t);return n},t.prototype.getMetaValue=function(t){var e;return null!=(e=this.findMetaElementByName(t))?e.getAttribute("content"):void 0},t.prototype.findMetaElementByName=function(t){var e,n,i,o;for(i in e=void 0,o=this.elements)n=o[i].elements,r(n[0],t)&&(e=n[0]);return e},a=function(t){return e(t)?"script":n(t)?"stylesheet":void 0},s=function(t){return"reload"===t.getAttribute("data-turbolinks-track")},e=function(t){return"script"===t.tagName.toLowerCase()},n=function(t){var e;return"style"===(e=t.tagName.toLowerCase())||"link"===e&&"stylesheet"===t.getAttribute("rel")},r=function(t,e){return"meta"===t.tagName.toLowerCase()&&t.getAttribute("name")===e},t}()}.call(this),function(){l.Snapshot=function(){function t(t,e){this.headDetails=t,this.bodyElement=e}return t.wrap=function(t){return t instanceof this?t:"string"==typeof t?this.fromHTMLString(t):this.fromHTMLElement(t)},t.fromHTMLString=function(t){var e;return(e=document.createElement("html")).innerHTML=t,this.fromHTMLElement(e)},t.fromHTMLElement=function(t){var e,n,i;return n=t.querySelector("head"),e=null!=(i=t.querySelector("body"))?i:document.createElement("body"),new this(l.HeadDetails.fromHeadElement(n),e)},t.prototype.clone=function(){return new this.constructor(this.headDetails,this.bodyElement.cloneNode(!0))},t.prototype.getRootLocation=function(){var t,e;return e=null!=(t=this.getSetting("root"))?t:"/",new l.Location(e)},t.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},t.prototype.getElementForAnchor=function(t){try{return this.bodyElement.querySelector("[id='"+t+"'], a[name='"+t+"']")}catch(l){}},t.prototype.getPermanentElements=function(){return this.bodyElement.querySelectorAll("[id][data-turbolinks-permanent]")},t.prototype.getPermanentElementById=function(t){return this.bodyElement.querySelector("#"+t+"[data-turbolinks-permanent]")},t.prototype.getPermanentElementsPresentInSnapshot=function(t){var e,n,i,o,r;for(r=[],n=0,i=(o=this.getPermanentElements()).length;n<i;n++)e=o[n],t.getPermanentElementById(e.id)&&r.push(e);return r},t.prototype.findFirstAutofocusableElement=function(){return this.bodyElement.querySelector("[autofocus]")},t.prototype.hasAnchor=function(t){return null!=this.getElementForAnchor(t)},t.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},t.prototype.isVisitable=function(){return"reload"!==this.getSetting("visit-control")},t.prototype.getSetting=function(t){return this.headDetails.getMetaValue("turbolinks-"+t)},t}()}.call(this),function(){var r=[].slice;l.Renderer=function(){function t(){}var n;return t.render=function(t,e){var n,i,o;return i=t,n=e,(o=function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(this,3<=arguments.length?r.call(arguments,2):[],function(){})).delegate=i,o.render(n),o},t.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},t.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},t.prototype.createScriptElement=function(t){var e;return"false"===t.getAttribute("data-turbolinks-eval")?t:((e=document.createElement("script")).textContent=t.textContent,e.async=!1,n(e,t),e)},n=function(t,e){var n,i,o,r,s,a,u;for(a=[],n=0,i=(r=e.attributes).length;n<i;n++)o=(s=r[n]).name,u=s.value,a.push(t.setAttribute(o,u));return a},t}()}.call(this),function(){var a,u,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;l.SnapshotRenderer=function(t){function e(t,e,n){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=n,this.currentHeadDetails=this.currentSnapshot.headDetails,this.newHeadDetails=this.newSnapshot.headDetails,this.currentBody=this.currentSnapshot.bodyElement,this.newBody=this.newSnapshot.bodyElement}return n(e,t),e.prototype.render=function(t){return this.shouldRender()?(this.mergeHead(),this.renderView((e=this,function(){return e.replaceBody(),e.isPreview||e.focusFirstAutofocusableElement(),t()}))):this.invalidateView();var e},e.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},e.prototype.replaceBody=function(){var t;return t=this.relocateCurrentBodyPermanentElements(),this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(t)},e.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},e.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},e.prototype.copyNewHeadStylesheetElements=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.getNewHeadStylesheetElements()).length;e<n;e++)t=i[e],o.push(document.head.appendChild(t));return o},e.prototype.copyNewHeadScriptElements=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.getNewHeadScriptElements()).length;e<n;e++)t=i[e],o.push(document.head.appendChild(this.createScriptElement(t)));return o},e.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.getCurrentHeadProvisionalElements()).length;e<n;e++)t=i[e],o.push(document.head.removeChild(t));return o},e.prototype.copyNewHeadProvisionalElements=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.getNewHeadProvisionalElements()).length;e<n;e++)t=i[e],o.push(document.head.appendChild(t));return o},e.prototype.relocateCurrentBodyPermanentElements=function(){var t,e,n,i,o,r,s;for(s=[],t=0,e=(r=this.getCurrentBodyPermanentElements()).length;t<e;t++)i=r[t],o=a(i),n=this.newSnapshot.getPermanentElementById(i.id),u(i,o.element),u(n,i),s.push(o);return s},e.prototype.replacePlaceholderElementsWithClonedPermanentElements=function(t){var e,n,i,o,r,s;for(s=[],i=0,o=t.length;i<o;i++)n=(r=t[i]).element,e=r.permanentElement.cloneNode(!0),s.push(u(n,e));return s},e.prototype.activateNewBodyScriptElements=function(){var t,e,n,i,o,r;for(r=[],e=0,i=(o=this.getNewBodyScriptElements()).length;e<i;e++)n=o[e],t=this.createScriptElement(n),r.push(u(n,t));return r},e.prototype.assignNewBody=function(){return document.body=this.newBody},e.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.newSnapshot.findFirstAutofocusableElement())?t.focus():void 0},e.prototype.getNewHeadStylesheetElements=function(){
return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},e.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},e.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},e.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},e.prototype.getCurrentBodyPermanentElements=function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)},e.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},e}(l.Renderer),a=function(t){var e;return(e=document.createElement("meta")).setAttribute("name","turbolinks-permanent-placeholder"),e.setAttribute("content",t.id),{element:e,permanentElement:t}},u=function(t,e){var n;return(n=t.parentNode)?n.replaceChild(e,t):void 0}}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;l.ErrorRenderer=function(t){function e(t){var e;(e=document.createElement("html")).innerHTML=t,this.newHead=e.querySelector("head"),this.newBody=e.querySelector("body")}return n(e,t),e.prototype.render=function(t){return this.renderView((e=this,function(){return e.replaceHeadAndBody(),e.activateBodyScriptElements(),t()}));var e},e.prototype.replaceHeadAndBody=function(){var t,e;return e=document.head,t=document.body,e.parentNode.replaceChild(this.newHead,e),t.parentNode.replaceChild(this.newBody,t)},e.prototype.activateBodyScriptElements=function(){var t,e,n,i,o,r;for(r=[],e=0,n=(i=this.getScriptElements()).length;e<n;e++)o=i[e],t=this.createScriptElement(o),r.push(o.parentNode.replaceChild(t,o));return r},e.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},e}(l.Renderer)}.call(this),function(){l.View=function(){function t(t){this.delegate=t,this.htmlElement=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getElementForAnchor=function(t){return this.getSnapshot().getElementForAnchor(t)},t.prototype.getSnapshot=function(){return l.Snapshot.fromHTMLElement(this.htmlElement)},t.prototype.render=function(t,e){var n,i,o;return o=t.snapshot,n=t.error,i=t.isPreview,this.markAsPreview(i),null!=o?this.renderSnapshot(o,i,e):this.renderError(n,e)},t.prototype.markAsPreview=function(t){return t?this.htmlElement.setAttribute("data-turbolinks-preview",""):this.htmlElement.removeAttribute("data-turbolinks-preview")},t.prototype.renderSnapshot=function(t,e,n){return l.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),l.Snapshot.wrap(t),e)},t.prototype.renderError=function(t,e){return l.ErrorRenderer.render(this.delegate,e,t)},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};l.ScrollManager=function(){function t(t){this.delegate=t,this.onScroll=e(this.onScroll,this),this.onScroll=l.throttle(this.onScroll)}return t.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},t.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},t.prototype.scrollToElement=function(t){return t.scrollIntoView()},t.prototype.scrollToPosition=function(t){var e,n;return e=t.x,n=t.y,window.scrollTo(e,n)},t.prototype.onScroll=function(){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},t.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},t}()}.call(this),function(){l.SnapshotCache=function(){function t(t){this.size=t,this.keys=[],this.snapshots={}}var i;return t.prototype.has=function(t){return i(t)in this.snapshots},t.prototype.get=function(t){var e;if(this.has(t))return e=this.read(t),this.touch(t),e},t.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},t.prototype.read=function(t){var e;return e=i(t),this.snapshots[e]},t.prototype.write=function(t,e){var n;return n=i(t),this.snapshots[n]=e},t.prototype.touch=function(t){var e,n;return n=i(t),-1<(e=this.keys.indexOf(n))&&this.keys.splice(e,1),this.keys.unshift(n),this.trim()},t.prototype.trim=function(){var t,e,n,i,o;for(o=[],t=0,n=(i=this.keys.splice(this.size)).length;t<n;t++)e=i[t],o.push(delete this.snapshots[e]);return o},i=function(t){return l.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};l.Visit=function(){function t(t,e,n){this.controller=t,this.action=n,this.performScroll=i(this.performScroll,this),this.identifier=l.uuid(),this.location=l.Location.wrap(e),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var n;return t.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},t.prototype.cancel=function(){var t;return"started"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state="canceled"):void 0},t.prototype.complete=function(){var t;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},t.prototype.fail=function(){var t;return"started"===this.state?(this.state="failed","function"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},t.prototype.changeHistory=function(){var t,e;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?"replace":this.action,e=n(t),this.controller[e](this.location,this.restorationIdentifier),this.historyChanged=!0)},t.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new l.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},t.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||"restore"!==this.action&&!t.isPreviewable()?void 0:t},t.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},t.prototype.loadCachedSnapshot=function(){var e,n;return(n=this.getCachedSnapshot())?(e=this.shouldIssueRequest(),this.render(function(){var t;return this.cacheSnapshot(),this.controller.render({snapshot:n,isPreview:e},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),e?void 0:this.complete()})):void 0},t.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())}):void 0},t.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},t.prototype.requestStarted=function(){var t;return this.recordTimingMetric("requestStart"),"function"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},t.prototype.requestProgressed=function(t){var e;return this.progress=t,"function"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},t.prototype.requestCompletedWithResponse=function(t,e){return this.response=t,null!=e&&(this.redirectedToLocation=l.Location.wrap(e)),this.adapter.visitRequestCompleted(this)},t.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},t.prototype.requestFinished=function(){var t;return this.recordTimingMetric("requestEnd"),"function"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},t.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},t.prototype.scrollToRestoredPosition=function(){var t,e;return null!=(t=null!=(e=this.restorationData)?e.scrollPosition:void 0)?(this.controller.scrollToPosition(t),!0):void 0},t.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},t.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},t.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},t.prototype.getTimingMetrics=function(){return l.copyObject(this.timingMetrics)},n=function(t){switch(t){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},t.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},t.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},t.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame((e=this,function(){return e.frame=null,t.call(e)}));var e},t.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};l.Controller=function(){function t(){this.clickBubbled=e(this.clickBubbled,this),this.clickCaptured=e(this.clickCaptured,this),this.pageLoaded=e(this.pageLoaded,this),this.history=new l.History(this),this.view=new l.View(this),this.scrollManager=new l.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return t.prototype.start=function(){return l.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},t.prototype.clearCache=function(){return this.cache=new l.SnapshotCache(10)},t.prototype.visit=function(t,e){var n,i;return null==e&&(e={}),t=l.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(n=null!=(i=e.action)?i:"advance",this.adapter.visitProposedToLocationWithAction(t,n)):window.location=t:void 0},t.prototype.startVisitToLocationWithAction=function(t,e,n){var i;return l.supported?(i=this.getRestorationDataForIdentifier(n),this.startVisit(t,e,{restorationData:i})):window.location=t},t.prototype.setProgressBarDelay=function(t){return this.progressBarDelay=t},t.prototype.startHistory=function(){return this.location=l.Location.wrap(window.location),this.restorationIdentifier=l.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},t.prototype.stopHistory=function(){return this.history.stop()},t.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=l.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},t.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,e){return this.restorationIdentifier=e,this.location=l.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},t.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,e){var n;return this.restorationIdentifier=e,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=l.Location.wrap(t)):this.adapter.pageInvalidated()},t.prototype.getCachedSnapshotForLocation=function(t){var e;return null!=(e=this.cache.get(t))?e.clone():void 0},t.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},t.prototype.cacheSnapshot=function(){var t,e,n;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),e=this.view.getSnapshot(),t=this.lastRenderedLocation,l.defer((n=this,function(){return n.cache.put(t,e.clone())}))):void 0},t.prototype.scrollToAnchor=function(t){var e;return(e=this.view.getElementForAnchor(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},t.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},t.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},t.prototype.scrollPositionChanged=function(t){return this.getCurrentRestorationData().scrollPosition=t},t.prototype.render=function(t,e){return this.view.render(t,e)},t.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},t.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},t.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},t.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},t.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},t.prototype.clickBubbled=function(t){var e,n,i;return this.enabled&&this.clickEventIsSignificant(t)&&(n=this.getVisitableLinkForNode(t.target))&&(i=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,i)?(t.preventDefault(),e=this.getActionForLink(n),this.visit(i,{action:e})):void 0},t.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){return!this.notifyApplicationAfterClickingLinkToLocation(t,e).defaultPrevented},t.prototype.applicationAllowsVisitingLocation=function(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented},t.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,e){return l.dispatch("turbolinks:click",{target:t,data:{url:e.absoluteURL},cancelable:!0})},t.prototype.notifyApplicationBeforeVisitingLocation=function(t){return l.dispatch("turbolinks:before-visit",{data:{url:t.absoluteURL},cancelable:!0})},t.prototype.notifyApplicationAfterVisitingLocation=function(t){return l.dispatch("turbolinks:visit",{data:{url:t.absoluteURL}})},t.prototype.notifyApplicationBeforeCachingSnapshot=function(){return l.dispatch("turbolinks:before-cache")},t.prototype.notifyApplicationBeforeRender=function(t){return l.dispatch("turbolinks:before-render",{data:{newBody:t}})},t.prototype.notifyApplicationAfterRender=function(){return l.dispatch("turbolinks:render")},t.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),l.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:t}})},t.prototype.startVisit=function(t,e,n){var i;return null!=(i=this.currentVisit)&&i.cancel(),this.currentVisit=this.createVisit(t,e,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},t.prototype.createVisit=function(t,e,n){var i,o,r,s,a;return s=(o=null!=n?n:{}).restorationIdentifier,r=o.restorationData,i=o.historyChanged,(a=new l.Visit(this,t,e)).restorationIdentifier=null!=s?s:l.uuid(),a.restorationData=l.copyObject(r),a.historyChanged=i,a.referrer=this.location,a},t.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},t.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||1<t.which||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},t.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?l.closest(t,"a[href]:not([target]):not([download])"):void 0},t.prototype.getVisitableLocationForLink=function(t){var e;return e=new l.Location(t.getAttribute("href")),this.locationIsVisitable(e)?e:void 0},t.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute("data-turbolinks-action"))?e:"advance"},t.prototype.nodeIsVisitable=function(t){var e;return!(e=l.closest(t,"[data-turbolinks]"))||"false"!==e.getAttribute("data-turbolinks")},t.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},t.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},t.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},t}()}.call(this),function(){!function(){var t,e;if((t=e=document.currentScript)&&!e.hasAttribute("data-turbolinks-suppress-warning"))for(;t=t.parentNode;)if(t===document.body)return console.warn("You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\n\nLoad your application\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\n\n\u2014\u2014\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s",e.outerHTML)}()}.call(this),function(){var t,e,n;l.start=function(){return e()?(null==l.controller&&(l.controller=t()),l.controller.start()):void 0},e=function(){return null==window.Turbolinks&&(window.Turbolinks=l),n()},t=function(){var t;return(t=new l.Controller).adapter=new l.BrowserAdapter(t),t},(n=function(){return window.Turbolinks===l})()&&l.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=l:"function"==typeof define&&define.amd&&define(l)}.call(this),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(E,t){"use strict";function m(t,e,n){var i,o=(e=e||st).createElement("script");if(o.text=t,n)for(i in wt)n[i]&&(o[i]=n[i]);e.head.appendChild(o).parentNode.removeChild(o)}function g(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?pt[dt.call(t)]||"object":typeof t}function a(t){var e=!!t&&"length"in t&&t.length,n=g(t);return!vt(t)&&!bt(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function c(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function e(t,n,i){return vt(n)?At.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?At.grep(t,function(t){return t===n!==i}):"string"!=typeof n?At.grep(t,function(t){return-1<ht.call(n,t)!==i}):At.filter(n,t,i)}function n(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function l(t){var n={};return At.each(t.match(Nt)||[],function(t,e){n[e]=!0}),n}function h(t){return t}function p(t){throw t}function u(t,e,n,i){var o;try{t&&vt(o=t.promise)?o.call(t).done(e).fail(n):t&&vt(o=t.then)?o.call(t,e,n):e.apply(undefined,[t].slice(i))}catch(t){n.apply(undefined,[t])}}function i(){st.removeEventListener("DOMContentLoaded",i),E.removeEventListener("load",i),At.ready()}function o(t,e){return e.toUpperCase()}function d(t){return t.replace(Bt,"ms-").replace(Ft,o)}function r(){this.expando=At.expando+r.uid++}function s(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Wt.test(t)?JSON.parse(t):t)}function f(t,e,n){var i;if(n===undefined&&1===t.nodeType)if(i="data-"+e.replace(Vt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=s(n)}catch(o){}Ht.set(t,e,n)}else n=undefined;return n}function y(t,e,n,i){var o,r,s=20,a=i?function(){return i.cur()}:function(){return At.css(t,e,"")},u=a(),c=n&&n[3]||(At.cssNumber[e]?"":"px"),l=(At.cssNumber[e]||"px"!==c&&+u)&&zt.exec(At.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;s--;)At.style(t,e,l+c),(1-r)*(1-(r=a()/u||.5))<=0&&(s=0),l/=r;l*=2,At.style(t,e,l+c),n=n||[]}return n&&(l=+l||+u||0,o=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=l,i.end=o)),o}function v(t){var e,n=t.ownerDocument,i=t.nodeName,o=Xt[i];return o||(e=n.body.appendChild(n.createElement(i)),o=At.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),Xt[i]=o)}function b(t,e){for(var n,i,o=[],r=0,s=t.length;r<s;r++)(i=t[r]).style&&(n=i.style.display,e?("none"===n&&(o[r]=qt.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&Jt(i)&&(o[r]=v(i))):"none"!==n&&(o[r]="none",qt.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}function w(t,e){var n;return n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],e===undefined||e&&c(t,e)?At.merge([t],n):n}function x(t,e){for(var n=0,i=t.length;n<i;n++)qt.set(t[n],"globalEval",!e||qt.get(e[n],"globalEval"))}function A(t,e,n,i,o){for(var r,s,a,u,c,l,h=e.createDocumentFragment(),p=[],d=0,f=t.length;d<f;d++)if((r=t[d])||0===r)if("object"===g(r))At.merge(p,r.nodeType?[r]:r);else if(ne.test(r)){for(s=s||h.appendChild(e.createElement("div")),a=(Yt.exec(r)||["",""])[1].toLowerCase(),u=Zt[a]||Zt._default,s.innerHTML=u[1]+At.htmlPrefilter(r)+u[2],l=u[0];l--;)s=s.lastChild;At.merge(p,s.childNodes),(s=h.firstChild).textContent=""}else p.push(e.createTextNode(r));for(h.textContent="",d=0;r=p[d++];)if(i&&-1<At.inArray(r,i))o&&o.push(r);else if(c=At.contains(r.ownerDocument,r),s=w(h.appendChild(r),"script"),c&&x(s),n)for(l=0;r=s[l++];)Qt.test(r.type||"")&&n.push(r);return h}function C(){return!0}function S(){return!1}function k(){try{return st.activeElement}catch(t){}}function T(t,e,n,i,o,r){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=undefined),e)T(t,a,n,i,e[a],r);return t}if(null==i&&null==o?(o=n,i=n=undefined):null==o&&("string"==typeof n?(o=i,i=undefined):(o=i,i=n,n=undefined)),!1===o)o=S;else if(!o)return t;return 1===r&&(s=o,(o=function(t){return At().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=At.guid++)),t.each(function(){At.event.add(this,e,o,i,n)})}function L(t,e){return c(t,"table")&&c(11!==e.nodeType?e:e.firstChild,"tr")&&At(t).children("tbody")[0]||t}function D(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function R(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function P(t,e){var n,i,o,r,s,a,u,c;if(1===e.nodeType){if(qt.hasData(t)&&(r=qt.access(t),s=qt.set(e,r),c=r.events))for(o in delete s.handle,s.events={},c)for(n=0,i=c[o].length;n<i;n++)At.event.add(e,o,c[o][n]);Ht.hasData(t)&&(a=Ht.access(t),u=At.extend({},a),Ht.set(e,u))}}function _(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Gt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function N(n,i,o,r){i=ct.apply([],i);var t,e,s,a,u,c,l=0,h=n.length,p=h-1,d=i[0],f=vt(d);if(f||1<h&&"string"==typeof d&&!yt.checkClone&&ce.test(d))return n.each(function(t){var e=n.eq(t);f&&(i[0]=d.call(this,t,e.html())),N(e,i,o,r)});if(h&&(e=(t=A(i,n[0].ownerDocument,!1,n,r)).firstChild,1===t.childNodes.length&&(t=e),e||r)){for(a=(s=At.map(w(t,"script"),D)).length;l<h;l++)u=t,l!==p&&(u=At.clone(u,!0,!0),a&&At.merge(s,w(u,"script"))),o.call(n[l],u,l);if(a)for(c=s[s.length-1].ownerDocument,At.map(s,R),l=0;l<a;l++)u=s[l],Qt.test(u.type||"")&&!qt.access(u,"globalEval")&&At.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?At._evalUrl&&At._evalUrl(u.src):m(u.textContent.replace(le,""),c,u))}return n}function O(t,e,n){for(var i,o=e?At.filter(e,t):t,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||At.cleanData(w(i)),i.parentNode&&(n&&At.contains(i.ownerDocument,i)&&x(w(i,"script")),i.parentNode.removeChild(i));return t}function I(t,e,n){var i,o,r,s,a=t.style;return(n=n||pe(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||At.contains(t.ownerDocument,t)||(s=At.style(t,e)),!yt.pixelBoxStyles()&&he.test(s)&&de.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),s!==undefined?s+"":s}function M(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function B(t){if(t in be)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ve.length;n--;)if((t=ve[n]+e)in be)return t}function F(t){var e=At.cssProps[t];return e||(e=At.cssProps[t]=B(t)||t),e}function j(t,e,n){var i=zt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function q(t,e,n,i,o,r){var s="width"===e?1:0,a=0,u=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=At.css(t,n+$t[s],!0,o)),i?("content"===n&&(u-=At.css(t,"padding"+$t[s],!0,o)),"margin"!==n&&(u-=At.css(t,"border"+$t[s]+"Width",!0,o))):(u+=At.css(t,"padding"+$t[s],!0,o),"padding"!==n?u+=At.css(t,"border"+$t[s]+"Width",!0,o):a+=At.css(t,"border"+$t[s]+"Width",!0,o));return!i&&0<=r&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-u-a-.5))),u}function H(t,e,n){var i=pe(t),o=I(t,e,i),r="border-box"===At.css(t,"boxSizing",!1,i),s=r;if(he.test(o)){if(!n)return o;o="auto"}return s=s&&(yt.boxSizingReliable()||o===t.style[e]),("auto"===o||!parseFloat(o)&&"inline"===At.css(t,"display",!1,i))&&(o=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(o=parseFloat(o)||0)+q(t,e,n||(r?"border":"content"),s,i,o)+"px"}function W(t,e,n,i,o){return new W.prototype.init(t,e,n,i,o)}function V(){xe&&(!1===st.hidden&&E.requestAnimationFrame?E.requestAnimationFrame(V):E.setTimeout(V,At.fx.interval),At.fx.tick())}function U(){return E.setTimeout(function(){we=undefined}),we=Date.now()}function z(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)o["margin"+(n=$t[i])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function $(t,e,n){for(var i,o=(X.tweeners[e]||[]).concat(X.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,e,t))return i}function J(t,e,n){var i,o,r,s,a,u,c,l,h="width"in e||"height"in e,p=this,d={},f=t.style,m=t.nodeType&&Jt(t),g=qt.get(t,"fxshow");for(i in n.queue||(null==(s=At._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,p.always(function(){p.always(function(){s.unqueued--,At.queue(t,"fx").length||s.empty.fire()})})),e)if(o=e[i],Ee.test(o)){if(delete e[i],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||g[i]===undefined)continue;m=!0}d[i]=g&&g[i]||At.style(t,i)}if((u=!At.isEmptyObject(e))||!At.isEmptyObject(d))for(i in h&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=qt.get(t,"display")),"none"===(l=At.css(t,"display"))&&(c?l=c:(b([t],!0),c=t.style.display||c,l=At.css(t,"display"),b([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===At.css(t,"float")&&(u||(p.done(function(){f.display=c}),null==c&&(l=f.display,c="none"===l?"":l)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),u=!1,d)u||(g?"hidden"in g&&(m=g.hidden):g=qt.access(t,"fxshow",{display:c}),r&&(g.hidden=!m),m&&b([t],!0),p.done(function(){for(i in m||b([t]),qt.remove(t,"fxshow"),d)At.style(t,i,d[i])})),u=$(m?g[i]:0,i,p),i in g||(g[i]=u.start,m&&(u.end=u.start,u.start=0))}function K(t,e){var n,i,o,r,s;for(n in t)if(o=e[i=d(n)],r=t[n],Array.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(s=At.cssHooks[i])&&"expand"in s)for(n in r=s.expand(r),delete t[i],r)n in t||(t[n]=r[n],e[n]=o);else e[i]=o}function X(r,t,e){var n,s,i=0,o=X.prefilters.length,a=At.Deferred().always(function(){delete u.elem}),u=function(){if(s)return!1;for(var t=we||U(),e=Math.max(0,c.startTime+c.duration-t),n=1-(e/c.duration||0),i=0,o=c.tweens.length;i<o;i++)c.tweens[i].run(n);return a.notifyWith(r,[c,n,e]),n<1&&o?e:(o||a.notifyWith(r,[c,1,0]),a.resolveWith(r,[c]),!1)},c=a.promise({elem:r,props:At.extend({},t),opts:At.extend(!0,{specialEasing:{},easing:At.easing._default},e),originalProperties:t,originalOptions:e,startTime:we||U(),duration:e.duration,tweens:[],createTween:function(t,e){var n=At.Tween(r,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var e=0,n=t?c.tweens.length:0;if(s)return this;for(s=!0;e<n;e++)c.tweens[e].run(1);return t?(a.notifyWith(r,[c,1,0]),a.resolveWith(r,[c,t])):a.rejectWith(r,[c,t]),this}}),l=c.props;for(K(l,c.opts.specialEasing);i<o;i++)if(n=X.prefilters[i].call(c,r,l,c.opts))return vt(n.stop)&&(At._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return At.map(l,$,c),vt(c.opts.start)&&c.opts.start.call(r,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),At.fx.timer(At.extend(u,{elem:r,anim:c,queue:c.opts.queue})),c}function G(t){return(t.match(Nt)||[]).join(" ")}function Y(t){return t.getAttribute&&t.getAttribute("class")||""}function Q(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(Nt)||[]}function Z(n,t,i,o){var e;if(Array.isArray(t))At.each(t,function(t,e){i||Me.test(n)?o(n,e):Z(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,o)});else if(i||"object"!==g(t))o(n,t);else for(e in t)Z(n+"["+e+"]",t[e],i,o)}function tt(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,o=t.toLowerCase().match(Nt)||[];if(vt(e))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(e)):(r[n]=r[n]||[]).push(e)}}function et(e,o,r,s){function a(t){var i;return u[t]=!0,At.each(e[t]||[],function(t,e){var n=e(o,r,s);return"string"!=typeof n||c||u[n]?c?!(i=n):void 0:(o.dataTypes.unshift(n),a(n),!1)}),i}var u={},c=e===Ke;return a(o.dataTypes[0])||!u["*"]&&a("*")}function nt(t,e){var n,i,o=At.ajaxSettings.flatOptions||{};for(n in e)e[n]!==undefined&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&At.extend(!0,t,i),t}function it(t,e,n){for(var i,o,r,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),i===undefined&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){u.unshift(o);break}if(u[0]in n)r=u[0];else{for(o in n){if(!u[0]||t.converters[o+" "+u[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==u[0]&&u.unshift(r),n[r]}function ot(t,e,n,i){var o,r,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=l.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=r,r=l.shift())if("*"===r)r=u;else if("*"!==u&&u!==r){if(!(s=c[u+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+u+" to "+r}}}return{state:"success",data:e}}var rt=[],st=E.document,at=Object.getPrototypeOf,ut=rt.slice,ct=rt.concat,lt=rt.push,ht=rt.indexOf,pt={},dt=pt.toString,ft=pt.hasOwnProperty,mt=ft.toString,gt=mt.call(Object),yt={},vt=function vt(t){return"function"==typeof t&&"number"!=typeof t.nodeType},bt=function bt(t){return null!=t&&t===t.window},wt={type:!0,src:!0,noModule:!0},xt="3.3.1",At=function(t,e){return new At.fn.init(t,e)},Ct=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;At.fn=At.prototype={jquery:xt,constructor:At,length:0,toArray:function(){return ut.call(this)},get:function(t){return null==t?ut.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=At.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return At.each(this,t)},map:function(n){return this.pushStack(At.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(ut.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:lt,sort:rt.sort,splice:rt.splice},At.extend=At.fn.extend=function(t){var e,n,i,o,r,s,a=t||{},u=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[u]||{},u++),"object"==typeof a||vt(a)||(a={}),u===c&&(a=this,u--);u<c;u++)if(null!=(e=arguments[u]))for(n in e)i=a[n],a!==(o=e[n])&&(l&&o&&(
At.isPlainObject(o)||(r=Array.isArray(o)))?(r?(r=!1,s=i&&Array.isArray(i)?i:[]):s=i&&At.isPlainObject(i)?i:{},a[n]=At.extend(l,s,o)):o!==undefined&&(a[n]=o));return a},At.extend({expando:"jQuery"+(xt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==dt.call(t))&&(!(e=at(t))||"function"==typeof(n=ft.call(e,"constructor")&&e.constructor)&&mt.call(n)===gt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){m(t)},each:function(t,e){var n,i=0;if(a(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(Ct,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(a(Object(t))?At.merge(n,"string"==typeof t?[t]:t):lt.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:ht.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,s=!n;o<r;o++)!e(t[o],o)!==s&&i.push(t[o]);return i},map:function(t,e,n){var i,o,r=0,s=[];if(a(t))for(i=t.length;r<i;r++)null!=(o=e(t[r],r,n))&&s.push(o);else for(r in t)null!=(o=e(t[r],r,n))&&s.push(o);return ct.apply([],s)},guid:1,support:yt}),"function"==typeof Symbol&&(At.fn[Symbol.iterator]=rt[Symbol.iterator]),At.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){pt["[object "+e+"]"]=e.toLowerCase()});var Et=function(n){function w(t,e,n,i){var o,r,s,a,u,c,l,h=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!i&&((e?e.ownerDocument||e:H)!==N&&_(e),e=e||N,I)){if(11!==p&&(u=yt.exec(t)))if(o=u[1]){if(9===p){if(!(s=e.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(h&&(s=h.getElementById(o))&&j(e,s)&&s.id===o)return n.push(s),n}else{if(u[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((o=u[3])&&A.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(o)),n}if(A.qsa&&!$[t+" "]&&(!M||!M.test(t))){if(1!==p)h=e,l=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(xt,At):e.setAttribute("id",a=q),r=(c=k(t)).length;r--;)c[r]="#"+a+" "+m(c[r]);l=c.join(","),h=vt.test(t)&&f(e.parentNode)||e}if(l)try{return Q.apply(n,h.querySelectorAll(l)),n}catch(d){}finally{a===q&&e.removeAttribute("id")}}}return L(t.replace(at,"$1"),e,n,i)}function t(){function n(t,e){return i.push(t+" ")>C.cacheLength&&delete n[i.shift()],n[t+" "]=e}var i=[];return n}function u(t){return t[q]=!0,t}function o(t){var e=N.createElement("fieldset");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function e(t,e){for(var n=t.split("|"),i=n.length;i--;)C.attrHandle[n[i]]=e}function c(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function i(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function r(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Et(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function a(s){return u(function(r){return r=+r,u(function(t,e){for(var n,i=s([],t.length,r),o=i.length;o--;)t[n=i[o]]&&(t[n]=!(e[n]=t[n]))})})}function f(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function l(){}function m(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function h(a,t,e){var u=t.dir,c=t.next,l=c||u,h=e&&"parentNode"===l,p=V++;return t.first?function(t,e,n){for(;t=t[u];)if(1===t.nodeType||h)return a(t,e,n);return!1}:function(t,e,n){var i,o,r,s=[W,p];if(n){for(;t=t[u];)if((1===t.nodeType||h)&&a(t,e,n))return!0}else for(;t=t[u];)if(1===t.nodeType||h)if(o=(r=t[q]||(t[q]={}))[t.uniqueID]||(r[t.uniqueID]={}),c&&c===t.nodeName.toLowerCase())t=t[u]||t;else{if((i=o[l])&&i[0]===W&&i[1]===p)return s[2]=i[2];if((o[l]=s)[2]=a(t,e,n))return!0}return!1}}function p(o){return 1<o.length?function(t,e,n){for(var i=o.length;i--;)if(!o[i](t,e,n))return!1;return!0}:o[0]}function v(t,e,n){for(var i=0,o=e.length;i<o;i++)w(t,e[i],n);return n}function x(t,e,n,i,o){for(var r,s=[],a=0,u=t.length,c=null!=e;a<u;a++)(r=t[a])&&(n&&!n(r,i,o)||(s.push(r),c&&e.push(a)));return s}function b(d,f,m,g,y,t){return g&&!g[q]&&(g=b(g)),y&&!y[q]&&(y=b(y,t)),u(function(t,e,n,i){var o,r,s,a=[],u=[],c=e.length,l=t||v(f||"*",n.nodeType?[n]:n,[]),h=!d||!t&&f?l:x(l,a,d,n,i),p=m?y||(t?d:c||g)?[]:e:h;if(m&&m(h,p,n,i),g)for(o=x(p,u),g(o,[],n,i),r=o.length;r--;)(s=o[r])&&(p[u[r]]=!(h[u[r]]=s));if(t){if(y||d){if(y){for(o=[],r=p.length;r--;)(s=p[r])&&o.push(h[r]=s);y(null,p=[],o,i)}for(r=p.length;r--;)(s=p[r])&&-1<(o=y?tt(t,s):a[r])&&(t[o]=!(e[o]=s))}}else p=x(p===e?p.splice(c,p.length):p),y?y(null,e,p,i):Q.apply(e,p)})}function d(t){for(var o,e,n,i=t.length,r=C.relative[t[0].type],s=r||C.relative[" "],a=r?1:0,u=h(function(t){return t===o},s,!0),c=h(function(t){return-1<tt(o,t)},s,!0),l=[function(t,e,n){var i=!r&&(n||e!==D)||((o=e).nodeType?u(t,e,n):c(t,e,n));return o=null,i}];a<i;a++)if(e=C.relative[t[a].type])l=[h(p(l),e)];else{if((e=C.filter[t[a].type].apply(null,t[a].matches))[q]){for(n=++a;n<i&&!C.relative[t[n].type];n++);return b(1<a&&p(l),1<a&&m(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),e,a<n&&d(t.slice(a,n)),n<i&&d(t=t.slice(n)),n<i&&m(t))}l.push(e)}return p(l)}function g(g,y){var v=0<y.length,b=0<g.length,t=function(t,e,n,i,o){var r,s,a,u=0,c="0",l=t&&[],h=[],p=D,d=t||b&&C.find.TAG("*",o),f=W+=null==p?1:Math.random()||.1,m=d.length;for(o&&(D=e===N||e||o);c!==m&&null!=(r=d[c]);c++){if(b&&r){for(s=0,e||r.ownerDocument===N||(_(r),n=!I);a=g[s++];)if(a(r,e||N,n)){i.push(r);break}o&&(W=f)}v&&((r=!a&&r)&&u--,t&&l.push(r))}if(u+=c,v&&c!==u){for(s=0;a=y[s++];)a(l,h,e,n);if(t){if(0<u)for(;c--;)l[c]||h[c]||(h[c]=G.call(i));h=x(h)}Q.apply(i,h),o&&!t&&0<h.length&&1<u+y.length&&w.uniqueSort(i)}return o&&(W=f,D=p),l};return v?u(t):t}var y,A,C,E,S,k,T,L,D,R,P,_,N,O,I,M,B,F,j,q="sizzle"+1*new Date,H=n.document,W=0,V=0,U=t(),z=t(),$=t(),J=function(t,e){return t===e&&(P=!0),0},K={}.hasOwnProperty,X=[],G=X.pop,Y=X.push,Q=X.push,Z=X.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ot="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",rt=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),at=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ut=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),lt=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(rt),pt=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vt=/[+~]/,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,At=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},Ct=function(){_()},Et=h(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{Q.apply(X=Z.call(H.childNodes),H.childNodes),X[H.childNodes.length].nodeType}catch(St){Q={apply:X.length?function(t,e){Y.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(y in A=w.support={},S=w.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},_=w.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:H;return i!==N&&9===i.nodeType&&i.documentElement&&(O=(N=i).documentElement,I=!S(N),H!==N&&(n=N.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ct,!1):n.attachEvent&&n.attachEvent("onunload",Ct)),A.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),A.getElementsByTagName=o(function(t){return t.appendChild(N.createComment("")),!t.getElementsByTagName("*").length}),A.getElementsByClassName=gt.test(N.getElementsByClassName),A.getById=o(function(t){return O.appendChild(t).id=q,!N.getElementsByName||!N.getElementsByName(q).length}),A.getById?(C.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}},C.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&I){var n=e.getElementById(t);return n?[n]:[]}}):(C.filter.ID=function(t){var n=t.replace(bt,wt);return function(t){var e="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},C.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&I){var n,i,o,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(o=e.getElementsByName(t),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),C.find.TAG=A.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):A.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;n=r[o++];)1===n.nodeType&&i.push(n);return i},C.find.CLASS=A.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&I)return e.getElementsByClassName(t)},B=[],M=[],(A.qsa=gt.test(N.querySelectorAll))&&(o(function(t){O.appendChild(t).innerHTML="<a id='"+q+"'></a><select id='"+q+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||M.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+q+"-]").length||M.push("~="),t.querySelectorAll(":checked").length||M.push(":checked"),t.querySelectorAll("a#"+q+"+*").length||M.push(".#.+[+~]")}),o(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=N.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&M.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),O.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(A.matchesSelector=gt.test(F=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&o(function(t){A.disconnectedMatch=F.call(t,"*"),F.call(t,"[s!='']:x"),B.push("!=",rt)}),M=M.length&&new RegExp(M.join("|")),B=B.length&&new RegExp(B.join("|")),e=gt.test(O.compareDocumentPosition),j=e||gt.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},J=e?function(t,e){if(t===e)return P=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!A.sortDetached&&e.compareDocumentPosition(t)===n?t===N||t.ownerDocument===H&&j(H,t)?-1:e===N||e.ownerDocument===H&&j(H,e)?1:R?tt(R,t)-tt(R,e):0:4&n?-1:1)}:function(t,e){if(t===e)return P=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t===N?-1:e===N?1:o?-1:r?1:R?tt(R,t)-tt(R,e):0;if(o===r)return c(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?c(s[i],a[i]):s[i]===H?-1:a[i]===H?1:0}),N},w.matches=function(t,e){return w(t,null,null,e)},w.matchesSelector=function(t,e){if((t.ownerDocument||t)!==N&&_(t),e=e.replace(lt,"='$1']"),A.matchesSelector&&I&&!$[e+" "]&&(!B||!B.test(e))&&(!M||!M.test(e)))try{var n=F.call(t,e);if(n||A.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(St){}return 0<w(e,N,null,[t]).length},w.contains=function(t,e){return(t.ownerDocument||t)!==N&&_(t),j(t,e)},w.attr=function(t,e){(t.ownerDocument||t)!==N&&_(t);var n=C.attrHandle[e.toLowerCase()],i=n&&K.call(C.attrHandle,e.toLowerCase())?n(t,e,!I):undefined;return i!==undefined?i:A.attributes||!I?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},w.escape=function(t){return(t+"").replace(xt,At)},w.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},w.uniqueSort=function(t){var e,n=[],i=0,o=0;if(P=!A.detectDuplicates,R=!A.sortStable&&t.slice(0),t.sort(J),P){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return R=null,t},E=w.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=E(e);return n},(C=w.selectors={cacheLength:50,createPseudo:u,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||w.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&w.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=k(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,o){return function(t){var e=w.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===o:"!="===i?e!==o:"^="===i?o&&0===e.indexOf(o):"*="===i?o&&-1<e.indexOf(o):"$="===i?o&&e.slice(-o.length)===o:"~="===i?-1<(" "+e.replace(st," ")+" ").indexOf(o):"|="===i&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(f,t,e,m,g){var y="nth"!==f.slice(0,3),v="last"!==f.slice(-4),b="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,n){var i,o,r,s,a,u,c=y!==v?"nextSibling":"previousSibling",l=t.parentNode,h=b&&t.nodeName.toLowerCase(),p=!n&&!b,d=!1;if(l){if(y){for(;c;){for(s=t;s=s[c];)if(b?s.nodeName.toLowerCase()===h:1===s.nodeType)return!1;u=c="only"===f&&!u&&"nextSibling"}return!0}if(u=[v?l.firstChild:l.lastChild],v&&p){for(d=(a=(i=(o=(r=(s=l)[q]||(s[q]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===W&&i[1])&&i[2],s=a&&l.childNodes[a];s=++a&&s&&s[c]||(d=a=0)||u.pop();)if(1===s.nodeType&&++d&&s===t){o[f]=[W,a,d];break}}else if(p&&(d=a=(i=(o=(r=(s=t)[q]||(s[q]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===W&&i[1]),!1===d)for(;(s=++a&&s&&s[c]||(d=a=0)||u.pop())&&((b?s.nodeName.toLowerCase()!==h:1!==s.nodeType)||!++d||(p&&((o=(r=s[q]||(s[q]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]=[W,d]),s!==t)););return(d-=g)===m||d%m==0&&0<=d/m}}},PSEUDO:function(t,r){var e,s=C.pseudos[t]||C.setFilters[t.toLowerCase()]||w.error("unsupported pseudo: "+t);return s[q]?s(r):1<s.length?(e=[t,t,"",r],C.setFilters.hasOwnProperty(t.toLowerCase())?u(function(t,e){for(var n,i=s(t,r),o=i.length;o--;)t[n=tt(t,i[o])]=!(e[n]=i[o])}):function(t){return s(t,0,e)}):s}},pseudos:{not:u(function(t){var i=[],o=[],a=T(t.replace(at,"$1"));return a[q]?u(function(t,e,n,i){for(var o,r=a(t,null,i,[]),s=t.length;s--;)(o=r[s])&&(t[s]=!(e[s]=o))}):function(t,e,n){return i[0]=t,a(i,null,n,o),i[0]=null,!o.pop()}}),has:u(function(e){return function(t){return 0<w(e,t).length}}),contains:u(function(e){return e=e.replace(bt,wt),function(t){return-1<(t.textContent||t.innerText||E(t)).indexOf(e)}}),lang:u(function(n){return pt.test(n||"")||w.error("unsupported lang: "+n),n=n.replace(bt,wt).toLowerCase(),function(t){var e;do{if(e=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===O},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(t,e){return[e-1]}),eq:a(function(t,e,n){return[n<0?n+e:n]}),even:a(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:a(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:a(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:a(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[y]=i(y);for(y in{submit:!0,reset:!0})C.pseudos[y]=r(y);return l.prototype=C.filters=C.pseudos,C.setFilters=new l,k=w.tokenize=function(t,e){var n,i,o,r,s,a,u,c=z[t+" "];if(c)return e?0:c.slice(0);for(s=t,a=[],u=C.preFilter;s;){for(r in n&&!(i=ut.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(o=[])),n=!1,(i=ct.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(at," ")}),s=s.slice(n.length)),C.filter)!(i=dt[r].exec(s))||u[r]&&!(i=u[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?w.error(t):z(t,a).slice(0)},T=w.compile=function(t,e){var n,i=[],o=[],r=$[t+" "];if(!r){for(e||(e=k(t)),n=e.length;n--;)(r=d(e[n]))[q]?i.push(r):o.push(r);(r=$(t,g(o,i))).selector=t}return r},L=w.select=function(t,e,n,i){var o,r,s,a,u,c="function"==typeof t&&t,l=!i&&k(t=c.selector||t);if(n=n||[],1===l.length){if(2<(r=l[0]=l[0].slice(0)).length&&"ID"===(s=r[0]).type&&9===e.nodeType&&I&&C.relative[r[1].type]){if(!(e=(C.find.ID(s.matches[0].replace(bt,wt),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=dt.needsContext.test(t)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((u=C.find[a])&&(i=u(s.matches[0].replace(bt,wt),vt.test(r[0].type)&&f(e.parentNode)||e))){if(r.splice(o,1),!(t=i.length&&m(r)))return Q.apply(n,i),n;break}}return(c||T(t,l))(i,e,!I,n,!e||vt.test(t)&&f(e.parentNode)||e),n},A.sortStable=q.split("").sort(J).join("")===q,A.detectDuplicates=!!P,_(),A.sortDetached=o(function(t){return 1&t.compareDocumentPosition(N.createElement("fieldset"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||e("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),A.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||e("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||e(et,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),w}(E);At.find=Et,At.expr=Et.selectors,At.expr[":"]=At.expr.pseudos,At.uniqueSort=At.unique=Et.uniqueSort,At.text=Et.getText,At.isXMLDoc=Et.isXML,At.contains=Et.contains,At.escapeSelector=Et.escape;var St=function(t,e,n){for(var i=[],o=n!==undefined;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&At(t).is(n))break;i.push(t)}return i},kt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},Tt=At.expr.match.needsContext,Lt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;At.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?At.find.matchesSelector(i,t)?[i]:[]:At.find.matches(t,At.grep(e,function(t){return 1===t.nodeType}))},At.fn.extend({find:function(t){var e,n,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(At(t).filter(function(){for(e=0;e<i;e++)if(At.contains(o[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)At.find(t,o[e],n);return 1<i?At.uniqueSort(n):n},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&Tt.test(t)?At(t):t||[],!1).length}});var Dt,Rt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(At.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||Dt,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):vt(t)?n.ready!==undefined?n.ready(t):t(At):At.makeArray(t,this);if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:Rt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof At?e[0]:e,At.merge(this,At.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:st,!0)),Lt.test(i[1])&&At.isPlainObject(e))for(i in e)vt(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(o=st.getElementById(i[2]))&&(this[0]=o,this.length=1),this}).prototype=At.fn,Dt=At(st);var Pt=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};At.fn.extend({has:function(t){var e=At(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(At.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,o=this.length,r=[],s="string"!=typeof t&&At(t);if(!Tt.test(t))for(;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&At.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(1<r.length?At.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?ht.call(At(t),this[0]):ht.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(At.uniqueSort(At.merge(this.get(),At(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),At.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return St(t,"parentNode")},parentsUntil:function(t,e,n){return St(t,"parentNode",n)},next:function(t){return n(t,"nextSibling")},prev:function(t){return n(t,"previousSibling")},nextAll:function(t){return St(t,"nextSibling")},prevAll:function(t){return St(t,"previousSibling")},nextUntil:function(t,e,n){return St(t,"nextSibling",n)},prevUntil:function(t,e,n){return St(t,"previousSibling",n)},siblings:function(t){return kt((t.parentNode||{}).firstChild,t)},children:function(t){return kt(t.firstChild)},contents:function(t){return c(t,"iframe")?t.contentDocument:(c(t,"template")&&(t=t.content||t),At.merge([],t.childNodes))}},function(i,o){At.fn[i]=function(t,e){var n=At.map(this,o,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=At.filter(e,n)),1<this.length&&(_t[i]||At.uniqueSort(n),Pt.test(i)&&n.reverse()),this.pushStack(n)}});var Nt=/[^\x20\t\r\n\f]+/g;At.Callbacks=function(i){i="string"==typeof i?l(i):At.extend({},i);var o,t,e,n,r=[],s=[],a=-1,u=function(){for(n=n||i.once,e=o=!0;s.length;a=-1)for(t=s.shift();++a<r.length;)!1===r[a].apply(t[0],t[1])&&i.stopOnFalse&&(a=r.length,t=!1);i.memory||(t=!1),o=!1,n&&(r=t?[]:"")},c={add:function(){return r&&(t&&!o&&(a=r.length-1,s.push(t)),function n(t){At.each(t,function(t,e){vt(e)?i.unique&&c.has(e)||r.push(e):e&&e.length&&"string"!==g(e)&&n(e)})}(arguments),t&&!o&&u()),this},remove:function(){return At.each(arguments,function(t,e){for(var n;-1<(n=At.inArray(e,r,n));)r.splice(n,1),n<=a&&a--}),this},has:function(t){return t?-1<At.inArray(t,r):0<r.length},empty:function(){return r&&(r=[]),this},disable:function(){return n=s=[],r=t="",this},disabled:function(){return!r},lock:function(){return n=s=[],t||o||(r=t=""),this},locked:function(){return!!n},fireWith:function(t,e){return n||(e=[t,(e=e||[]).slice?e.slice():e],s.push(e),o||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!e}};return c},At.extend({Deferred:function(t){var r=[["notify","progress",At.Callbacks("memory"),At.Callbacks("memory"),2],["resolve","done",At.Callbacks("once memory"),At.Callbacks("once memory"),0,"resolved"],["reject","fail",At.Callbacks("once memory"),At.Callbacks("once memory"),1,"rejected"]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},"catch":function(t){return s.then(null,t)},pipe:function(){var o=arguments;return At.Deferred(function(i){At.each(r,function(t,e){var n=vt(o[e[4]])&&o[e[4]];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&vt(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),o=null}).promise()},then:function(e,n,i){function c(r,s,a,u){return function(){var n=this,i=arguments,e=function(){var t,e;if(!(r<l)){if((t=a.apply(n,i))===s.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,vt(e)?u?e.call(t,c(l,s,h,u),c(l,s,p,u)):(l++,e.call(t,c(l,s,h,u),c(l,s,p,u),c(l,s,h,s.notifyWith))):(a!==h&&(n=undefined,i=[t]),(u||s.resolveWith)(n,i))}},o=u?e:function(){try{e()}catch(t){At.Deferred.exceptionHook&&At.Deferred.exceptionHook(t,o.stackTrace),l<=r+1&&(a!==p&&(n=undefined,i=[t]),s.rejectWith(n,i))}};r?o():(At.Deferred.getStackHook&&(o.stackTrace=At.Deferred.getStackHook()),E.setTimeout(o))}}var l=0;return At.Deferred(function(t){r[0][3].add(c(0,t,vt(i)?i:h,t.notifyWith)),r[1][3].add(c(0,t,vt(e)?e:h)),r[2][3].add(c(0,t,vt(n)?n:p))}).promise()},promise:function(t){return null!=t?At.extend(t,s):s}},a={};return At.each(r,function(t,e){var n=e[2],i=e[5];s[e[1]]=n.add,i&&n.add(function(){o=i},r[3-t][2].disable,r[3-t][3].disable,r[0][2].lock,r[0][3].lock),n.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?undefined:this,arguments),this},a[e[0]+"With"]=n.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){var n=arguments.length,e=n,i=Array(e),o=ut.call(arguments),r=At.Deferred(),s=function(e){return function(t){i[e]=this,o[e]=1<arguments.length?ut.call(arguments):t,--n||r.resolveWith(i,o)}};if(n<=1&&(u(t,r.done(s(e)).resolve,r.reject,!n),"pending"===r.state()||vt(o[e]&&o[e].then)))return r.then();for(;e--;)u(o[e],s(e),r.reject);return r.promise()}});var Ot=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;At.Deferred.exceptionHook=function(t,e){E.console&&E.console.warn&&t&&Ot.test(t.name)&&E.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},At.readyException=function(t){E.setTimeout(function(){throw t})};var It=At.Deferred();At.fn.ready=function(t){return It.then(t)["catch"](function(t){At.readyException(t)}),this},At.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--At.readyWait:At.isReady)||(At.isReady=!0)!==t&&0<--At.readyWait||It.resolveWith(st,[At])}}),At.ready.then=It.then,"complete"===st.readyState||"loading"!==st.readyState&&!st.documentElement.doScroll?E.setTimeout(At.ready):(st.addEventListener("DOMContentLoaded",i),E.addEventListener("load",i));var Mt=function(t,e,n,i,o,r,s){var a=0,u=t.length,c=null==n;if("object"===g(n))for(a in o=!0,n)Mt(t,e,a,n[a],!0,r,s);else if(i!==undefined&&(o=!0,vt(i)||(s=!0),c&&(s?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(At(t),n)})),e))for(;a<u;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:c?e.call(t):u?e(t[0],n):r},Bt=/^-ms-/,Ft=/-([a-z])/g,jt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};r.uid=1,r.prototype={cache:function(t){var e=t[this.expando];return e||(e={},jt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,o=this.cache(t);if("string"==typeof e)o[d(e)]=n;else for(i in e)o[d(i)]=e[i];return o},get:function(t,e){return e===undefined?this.cache(t):t[this.expando]&&t[this.expando][d(e)]},access:function(t,e,n){return e===undefined||e&&"string"==typeof e&&n===undefined?this.get(t,e):(this.set(t,e,n),n!==undefined?n:e)},remove:function(t,e){var n,i=t[this.expando];if(i!==undefined){if(e!==undefined){n=(e=Array.isArray(e)?e.map(d):(e=d(e))in i?[e]:e.match(Nt)||[]).length;for(;n--;)delete i[e[n]]}(e===undefined||At.isEmptyObject(i))&&(t.nodeType?t[this.expando]=undefined:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return e!==undefined&&!At.isEmptyObject(e)}};var qt=new r,Ht=new r,Wt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Vt=/[A-Z]/g;At.extend({hasData:function(t){return Ht.hasData(t)||qt.hasData(t)},data:function(t,e,n){return Ht.access(t,e,n)},removeData:function(t,e){Ht.remove(t,e)},_data:function(t,e,n){return qt.access(t,e,n)},_removeData:function(t,e){qt.remove(t,e)}}),At.fn.extend({data:function(n,t){var e,i,o,r=this[0],s=r&&r.attributes;if(n!==undefined)return"object"==typeof n?this.each(function(){Ht.set(this,n)}):Mt(this,function(t){var e;if(r&&t===undefined)return(e=Ht.get(r,n))!==undefined?e:(e=f(r,n))!==undefined?e:void 0;this.each(function(){Ht.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(o=Ht.get(r),1===r.nodeType&&!qt.get(r,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&0===(i=s[e].name).indexOf("data-")&&(i=d(i.slice(5)),f(r,i,o[i]));qt.set(r,"hasDataAttrs",!0)}return o},removeData:function(t){return this.each(function(){Ht.remove(this,t)})}}),At.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=qt.get(t,e),n&&(!i||Array.isArray(n)?i=qt.access(t,e,At.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=At.queue(t,e),i=n.length,o=n.shift(),r=At._queueHooks(t,e),s=function(){At.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return qt.get(t,n)||qt.access(t,n,{empty:At.Callbacks("once memory").add(function(){qt.remove(t,[e+"queue",n])})})}}),At.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?At.queue(this[0],e):n===undefined?this:this.each(function(){var t=At.queue(this,e,n);At._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&At.dequeue(this,e)})},dequeue:function(t){return this.each(function(){At.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=At.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";s--;)(n=qt.get(r[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var Ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,zt=new RegExp("^(?:([+-])=|)("+Ut+")([a-z%]*)$","i"),$t=["Top","Right","Bottom","Left"],Jt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&At.contains(t.ownerDocument,t)&&"none"===At.css(t,"display")},Kt=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in o=n.apply(t,i||[]),e
)t.style[r]=s[r];return o},Xt={};At.fn.extend({show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Jt(this)?At(this).show():At(this).hide()})}});var Gt=/^(?:checkbox|radio)$/i,Yt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Qt=/^$|^module$|\/(?:java|ecma)script/i,Zt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td;var te,ee,ne=/<|&#?\w+;/;te=st.createDocumentFragment().appendChild(st.createElement("div")),(ee=st.createElement("input")).setAttribute("type","radio"),ee.setAttribute("checked","checked"),ee.setAttribute("name","t"),te.appendChild(ee),yt.checkClone=te.cloneNode(!0).cloneNode(!0).lastChild.checked,te.innerHTML="<textarea>x</textarea>",yt.noCloneChecked=!!te.cloneNode(!0).lastChild.defaultValue;var ie=st.documentElement,oe=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,se=/^([^.]*)(?:\.(.+)|)/;At.event={global:{},add:function(e,t,n,i,o){var r,s,a,u,c,l,h,p,d,f,m,g=qt.get(e);if(g)for(n.handler&&(n=(r=n).handler,o=r.selector),o&&At.find.matchesSelector(ie,o),n.guid||(n.guid=At.guid++),(u=g.events)||(u=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==At&&At.event.triggered!==t.type?At.event.dispatch.apply(e,arguments):undefined}),c=(t=(t||"").match(Nt)||[""]).length;c--;)d=m=(a=se.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),d&&(h=At.event.special[d]||{},d=(o?h.delegateType:h.bindType)||d,h=At.event.special[d]||{},l=At.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&At.expr.match.needsContext.test(o),namespace:f.join(".")},r),(p=u[d])||((p=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(d,s)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,l):p.push(l),At.event.global[d]=!0)},remove:function(t,e,n,i,o){var r,s,a,u,c,l,h,p,d,f,m,g=qt.hasData(t)&&qt.get(t);if(g&&(u=g.events)){for(c=(e=(e||"").match(Nt)||[""]).length;c--;)if(d=m=(a=se.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),d){for(h=At.event.special[d]||{},p=u[d=(i?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=p.length;r--;)l=p[r],!o&&m!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(p.splice(r,1),l.selector&&p.delegateCount--,h.remove&&h.remove.call(t,l));s&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||At.removeEvent(t,d,g.handle),delete u[d])}else for(d in u)At.event.remove(t,d+e[c],n,i,!0);At.isEmptyObject(u)&&qt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,o,r,s,a=At.event.fix(t),u=new Array(arguments.length),c=(qt.get(this,"events")||{})[a.type]||[],l=At.event.special[a.type]||{};for(u[0]=a,e=1;e<arguments.length;e++)u[e]=arguments[e];if(a.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){for(s=At.event.handlers.call(this,a,c),e=0;(o=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,(i=((At.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,u))!==undefined&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,o,r,s,a=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],s={},n=0;n<u;n++)s[o=(i=e[n]).selector+" "]===undefined&&(s[o]=i.needsContext?-1<At(o,this).index(c):At.find(o,this,null,[c]).length),s[o]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return c=this,u<e.length&&a.push({elem:c,handlers:e.slice(u)}),a},addProp:function(e,t){Object.defineProperty(At.Event.prototype,e,{enumerable:!0,configurable:!0,get:vt(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[At.expando]?t:new At.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===k()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c(this,"input"))return this.click(),!1},_default:function(t){return c(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},At.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},At.Event=function(t,e){if(!(this instanceof At.Event))return new At.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?C:S,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&At.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[At.expando]=!0},At.Event.prototype={constructor:At.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=C,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=C,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=C,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},At.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&oe.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&e!==undefined&&re.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},At.event.addProp),At.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){At.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,n=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===n||At.contains(n,i))||(t.type=o.origType,e=o.handler.apply(this,arguments),t.type=r),e}}}),At.fn.extend({on:function(t,e,n,i){return T(this,t,e,n,i)},one:function(t,e,n,i){return T(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,At(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=undefined),!1===n&&(n=S),this.each(function(){At.event.remove(this,t,n,e)});for(o in t)this.off(o,e,t[o]);return this}});var ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ue=/<script|<style|<link/i,ce=/checked\s*(?:[^=]|=\s*.checked.)/i,le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;At.extend({htmlPrefilter:function(t){return t.replace(ae,"<$1></$2>")},clone:function(t,e,n){var i,o,r,s,a=t.cloneNode(!0),u=At.contains(t.ownerDocument,t);if(!(yt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||At.isXMLDoc(t)))for(s=w(a),i=0,o=(r=w(t)).length;i<o;i++)_(r[i],s[i]);if(e)if(n)for(r=r||w(t),s=s||w(a),i=0,o=r.length;i<o;i++)P(r[i],s[i]);else P(t,a);return 0<(s=w(a,"script")).length&&x(s,!u&&w(t,"script")),a},cleanData:function(t){for(var e,n,i,o=At.event.special,r=0;(n=t[r])!==undefined;r++)if(jt(n)){if(e=n[qt.expando]){if(e.events)for(i in e.events)o[i]?At.event.remove(n,i):At.removeEvent(n,i,e.handle);n[qt.expando]=undefined}n[Ht.expando]&&(n[Ht.expando]=undefined)}}}),At.fn.extend({detach:function(t){return O(this,t,!0)},remove:function(t){return O(this,t)},text:function(t){return Mt(this,function(t){return t===undefined?At.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return N(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||L(this,t).appendChild(t)})},prepend:function(){return N(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=L(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return N(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return N(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(At.cleanData(w(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return At.clone(this,t,e)})},html:function(t){return Mt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===undefined&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ue.test(t)&&!Zt[(Yt.exec(t)||["",""])[1].toLowerCase()]){t=At.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(At.cleanData(w(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return N(this,arguments,function(t){var e=this.parentNode;At.inArray(this,n)<0&&(At.cleanData(w(this)),e&&e.replaceChild(t,this))},n)}}),At.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){At.fn[t]=function(t){for(var e,n=[],i=At(t),o=i.length-1,r=0;r<=o;r++)e=r===o?this:this.clone(!0),At(i[r])[s](e),lt.apply(n,e.get());return this.pushStack(n)}});var he=new RegExp("^("+Ut+")(?!px)[a-z%]+$","i"),pe=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=E),e.getComputedStyle(t)},de=new RegExp($t.join("|"),"i");!function(){function t(){if(u){a.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(a).appendChild(u);var t=E.getComputedStyle(u);n="1%"!==t.top,s=12===e(t.marginLeft),u.style.right="60%",r=36===e(t.right),i=36===e(t.width),u.style.position="absolute",o=36===u.offsetWidth||"absolute",ie.removeChild(a),u=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,r,s,a=st.createElement("div"),u=st.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",yt.clearCloneStyle="content-box"===u.style.backgroundClip,At.extend(yt,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),r},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),o}}))}();var fe=/^(none|table(?!-c[ea]).+)/,me=/^--/,ge={position:"absolute",visibility:"hidden",display:"block"},ye={letterSpacing:"0",fontWeight:"400"},ve=["Webkit","Moz","ms"],be=st.createElement("div").style;At.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=I(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=d(e),u=me.test(e),c=t.style;if(u||(e=F(a)),s=At.cssHooks[e]||At.cssHooks[a],n===undefined)return s&&"get"in s&&(o=s.get(t,!1,i))!==undefined?o:c[e];"string"===(r=typeof n)&&(o=zt.exec(n))&&o[1]&&(n=y(t,e,o),r="number"),null!=n&&n==n&&("number"===r&&(n+=o&&o[3]||(At.cssNumber[a]?"":"px")),yt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&(n=s.set(t,n,i))===undefined||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var o,r,s,a=d(e);return me.test(e)||(e=F(a)),(s=At.cssHooks[e]||At.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,n)),o===undefined&&(o=I(t,e,i)),"normal"===o&&e in ye&&(o=ye[e]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),At.each(["height","width"],function(t,a){At.cssHooks[a]={get:function(t,e,n){if(e)return!fe.test(At.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?H(t,a,n):Kt(t,ge,function(){return H(t,a,n)})},set:function(t,e,n){var i,o=pe(t),r="border-box"===At.css(t,"boxSizing",!1,o),s=n&&q(t,a,n,r,o);return r&&yt.scrollboxSize()===o.position&&(s-=Math.ceil(t["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(o[a])-q(t,a,"border",!1,o)-.5)),s&&(i=zt.exec(e))&&"px"!==(i[3]||"px")&&(t.style[a]=e,e=At.css(t,a)),j(t,e,s)}}}),At.cssHooks.marginLeft=M(yt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(I(t,"marginLeft"))||t.getBoundingClientRect().left-Kt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),At.each({margin:"",padding:"",border:"Width"},function(o,r){At.cssHooks[o+r]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[o+$t[e]+r]=i[e]||i[e-2]||i[0];return n}},"margin"!==o&&(At.cssHooks[o+r].set=j)}),At.fn.extend({css:function(t,e){return Mt(this,function(t,e,n){var i,o,r={},s=0;if(Array.isArray(e)){for(i=pe(t),o=e.length;s<o;s++)r[e[s]]=At.css(t,e[s],!1,i);return r}return n!==undefined?At.style(t,e,n):At.css(t,e)},t,e,1<arguments.length)}}),(At.Tween=W).prototype={constructor:W,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||At.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(At.cssNumber[n]?"":"px")},cur:function(){var t=W.propHooks[this.prop];return t&&t.get?t.get(this):W.propHooks._default.get(this)},run:function(t){var e,n=W.propHooks[this.prop];return this.options.duration?this.pos=e=At.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=At.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){At.fx.step[t.prop]?At.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[At.cssProps[t.prop]]&&!At.cssHooks[t.prop]?t.elem[t.prop]=t.now:At.style(t.elem,t.prop,t.now+t.unit)}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},At.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},At.fx=W.prototype.init,At.fx.step={};var we,xe,Ae,Ce,Ee=/^(?:toggle|show|hide)$/,Se=/queueHooks$/;At.Animation=At.extend(X,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return y(n.elem,t,zt.exec(e),n),n}]},tweener:function(t,e){vt(t)?(e=t,t=["*"]):t=t.match(Nt);for(var n,i=0,o=t.length;i<o;i++)n=t[i],X.tweeners[n]=X.tweeners[n]||[],X.tweeners[n].unshift(e)},prefilters:[J],prefilter:function(t,e){e?X.prefilters.unshift(t):X.prefilters.push(t)}}),At.speed=function(t,e,n){var i=t&&"object"==typeof t?At.extend({},t):{complete:n||!n&&e||vt(t)&&t,duration:t,easing:n&&e||e&&!vt(e)&&e};return At.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in At.fx.speeds?i.duration=At.fx.speeds[i.duration]:i.duration=At.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){vt(i.old)&&i.old.call(this),i.queue&&At.dequeue(this,i.queue)},i},At.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Jt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var o=At.isEmptyObject(e),r=At.speed(t,n,i),s=function(){var t=X(this,At.extend({},e),r);(o||qt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(o,t,r){var s=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof o&&(r=t,t=o,o=undefined),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",n=At.timers,i=qt.get(this);if(e)i[e]&&i[e].stop&&s(i[e]);else for(e in i)i[e]&&i[e].stop&&Se.test(e)&&s(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=o&&n[e].queue!==o||(n[e].anim.stop(r),t=!1,n.splice(e,1));!t&&r||At.dequeue(this,o)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=qt.get(this),n=e[s+"queue"],i=e[s+"queueHooks"],o=At.timers,r=n?n.length:0;for(e.finish=!0,At.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===s&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),At.each(["toggle","show","hide"],function(t,i){var o=At.fn[i];At.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(z(i,!0),t,e,n)}}),At.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){At.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),At.timers=[],At.fx.tick=function(){var t,e=0,n=At.timers;for(we=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||At.fx.stop(),we=undefined},At.fx.timer=function(t){At.timers.push(t),At.fx.start()},At.fx.interval=13,At.fx.start=function(){xe||(xe=!0,V())},At.fx.stop=function(){xe=null},At.fx.speeds={slow:600,fast:200,_default:400},At.fn.delay=function(i,t){return i=At.fx&&At.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=E.setTimeout(t,i);e.stop=function(){E.clearTimeout(n)}})},Ae=st.createElement("input"),Ce=st.createElement("select").appendChild(st.createElement("option")),Ae.type="checkbox",yt.checkOn=""!==Ae.value,yt.optSelected=Ce.selected,(Ae=st.createElement("input")).value="t",Ae.type="radio",yt.radioValue="t"===Ae.value;var ke,Te=At.expr.attrHandle;At.fn.extend({attr:function(t,e){return Mt(this,At.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){At.removeAttr(this,t)})}}),At.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof t.getAttribute?At.prop(t,e,n):(1===r&&At.isXMLDoc(t)||(o=At.attrHooks[e.toLowerCase()]||(At.expr.match.bool.test(e)?ke:undefined)),n!==undefined?null===n?void At.removeAttr(t,e):o&&"set"in o&&(i=o.set(t,n,e))!==undefined?i:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(i=o.get(t,e))?i:null==(i=At.find.attr(t,e))?undefined:i)},attrHooks:{type:{set:function(t,e){if(!yt.radioValue&&"radio"===e&&c(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(Nt);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),ke={set:function(t,e,n){return!1===e?At.removeAttr(t,n):t.setAttribute(n,n),n}},At.each(At.expr.match.bool.source.match(/\w+/g),function(t,e){var s=Te[e]||At.find.attr;Te[e]=function(t,e,n){var i,o,r=e.toLowerCase();return n||(o=Te[r],Te[r]=i,i=null!=s(t,e,n)?r:null,Te[r]=o),i}});var Le=/^(?:input|select|textarea|button)$/i,De=/^(?:a|area)$/i;At.fn.extend({prop:function(t,e){return Mt(this,At.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[At.propFix[t]||t]})}}),At.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&At.isXMLDoc(t)||(e=At.propFix[e]||e,o=At.propHooks[e]),n!==undefined?o&&"set"in o&&(i=o.set(t,n,e))!==undefined?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=At.find.attr(t,"tabindex");return e?parseInt(e,10):Le.test(t.nodeName)||De.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),yt.optSelected||(At.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),At.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){At.propFix[this.toLowerCase()]=this}),At.fn.extend({addClass:function(e){var t,n,i,o,r,s,a,u=0;if(vt(e))return this.each(function(t){At(this).addClass(e.call(this,t,Y(this)))});if((t=Q(e)).length)for(;n=this[u++];)if(o=Y(n),i=1===n.nodeType&&" "+G(o)+" "){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(a=G(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,o,r,s,a,u=0;if(vt(e))return this.each(function(t){At(this).removeClass(e.call(this,t,Y(this)))});if(!arguments.length)return this.attr("class","");if((t=Q(e)).length)for(;n=this[u++];)if(o=Y(n),i=1===n.nodeType&&" "+G(o)+" "){for(s=0;r=t[s++];)for(;-1<i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," ");o!==(a=G(i))&&n.setAttribute("class",a)}return this},toggleClass:function(o,e){var r=typeof o,s="string"===r||Array.isArray(o);return"boolean"==typeof e&&s?e?this.addClass(o):this.removeClass(o):vt(o)?this.each(function(t){At(this).toggleClass(o.call(this,t,Y(this),e),e)}):this.each(function(){var t,e,n,i;if(s)for(e=0,n=At(this),i=Q(o);t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else o!==undefined&&"boolean"!==r||((t=Y(this))&&qt.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===o?"":qt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+G(Y(n))+" ").indexOf(e))return!0;return!1}});var Re=/\r/g;At.fn.extend({val:function(n){var i,t,o,e=this[0];return arguments.length?(o=vt(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=o?n.call(this,t,At(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=At.map(e,function(t){return null==t?"":t+""})),(i=At.valHooks[this.type]||At.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,e,"value")!==undefined||(this.value=e))})):e?(i=At.valHooks[e.type]||At.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&(t=i.get(e,"value"))!==undefined?t:"string"==typeof(t=e.value)?t.replace(Re,""):null==t?"":t:void 0}}),At.extend({valHooks:{option:{get:function(t){var e=At.find.attr(t,"value");return null!=e?e:G(At.text(t))}},select:{get:function(t){var e,n,i,o=t.options,r=t.selectedIndex,s="select-one"===t.type,a=s?null:[],u=s?r+1:o.length;for(i=r<0?u:s?r:0;i<u;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!c(n.parentNode,"optgroup"))){if(e=At(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,r=At.makeArray(e),s=o.length;s--;)((i=o[s]).selected=-1<At.inArray(At.valHooks.option.get(i),r))&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),At.each(["radio","checkbox"],function(){At.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<At.inArray(At(t).val(),e)}},yt.checkOn||(At.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),yt.focusin="onfocusin"in E;var Pe=/^(?:focusinfocus|focusoutblur)$/,_e=function(t){t.stopPropagation()};At.extend(At.event,{trigger:function(t,e,n,i){var o,r,s,a,u,c,l,h,p=[n||st],d=ft.call(t,"type")?t.type:t,f=ft.call(t,"namespace")?t.namespace.split("."):[];if(r=h=s=n=n||st,3!==n.nodeType&&8!==n.nodeType&&!Pe.test(d+At.event.triggered)&&(-1<d.indexOf(".")&&(d=(f=d.split(".")).shift(),f.sort()),u=d.indexOf(":")<0&&"on"+d,(t=t[At.expando]?t:new At.Event(d,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=n),e=null==e?[t]:At.makeArray(e,[t]),l=At.event.special[d]||{},i||!l.trigger||!1!==l.trigger.apply(n,e))){if(!i&&!l.noBubble&&!bt(n)){for(a=l.delegateType||d,Pe.test(a+d)||(r=r.parentNode);r;r=r.parentNode)p.push(r),s=r;s===(n.ownerDocument||st)&&p.push(s.defaultView||s.parentWindow||E)}for(o=0;(r=p[o++])&&!t.isPropagationStopped();)h=r,t.type=1<o?a:l.bindType||d,(c=(qt.get(r,"events")||{})[t.type]&&qt.get(r,"handle"))&&c.apply(r,e),(c=u&&r[u])&&c.apply&&jt(r)&&(t.result=c.apply(r,e),!1===t.result&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||l._default&&!1!==l._default.apply(p.pop(),e)||!jt(n)||u&&vt(n[d])&&!bt(n)&&((s=n[u])&&(n[u]=null),At.event.triggered=d,t.isPropagationStopped()&&h.addEventListener(d,_e),n[d](),t.isPropagationStopped()&&h.removeEventListener(d,_e),At.event.triggered=undefined,s&&(n[u]=s)),t.result}},simulate:function(t,e,n){var i=At.extend(new At.Event,n,{type:t,isSimulated:!0});At.event.trigger(i,null,e)}}),At.fn.extend({trigger:function(t,e){return this.each(function(){At.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return At.event.trigger(t,e,n,!0)}}),yt.focusin||At.each({focus:"focusin",blur:"focusout"},function(n,i){var o=function(t){At.event.simulate(i,t.target,At.event.fix(t))};At.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=qt.access(t,i);e||t.addEventListener(n,o,!0),qt.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=qt.access(t,i)-1;e?qt.access(t,i,e):(t.removeEventListener(n,o,!0),qt.remove(t,i))}}});var Ne=E.location,Oe=Date.now(),Ie=/\?/;At.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new E.DOMParser).parseFromString(t,"text/xml")}catch(n){e=undefined}return e&&!e.getElementsByTagName("parsererror").length||At.error("Invalid XML: "+t),e};var Me=/\[\]$/,Be=/\r?\n/g,Fe=/^(?:submit|button|image|reset|file)$/i,je=/^(?:input|select|textarea|keygen)/i;At.param=function(t,e){var n,i=[],o=function(t,e){var n=vt(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!At.isPlainObject(t))At.each(t,function(){o(this.name,this.value)});else for(n in t)Z(n,t[n],e,o);return i.join("&")},At.fn.extend({serialize:function(){return At.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=At.prop(this,"elements");return t?At.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!At(this).is(":disabled")&&je.test(this.nodeName)&&!Fe.test(t)&&(this.checked||!Gt.test(t))}).map(function(t,e){var n=At(this).val();return null==n?null:Array.isArray(n)?At.map(n,function(t){return{name:e.name,value:t.replace(Be,"\r\n")}}):{name:e.name,value:n.replace(Be,"\r\n")}}).get()}});var qe=/%20/g,He=/#.*$/,We=/([?&])_=[^&]*/,Ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ue=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ze=/^(?:GET|HEAD)$/,$e=/^\/\//,Je={},Ke={},Xe="*/".concat("*"),Ge=st.createElement("a");Ge.href=Ne.href,At.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ne.href,type:"GET",isLocal:Ue.test(Ne.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":At.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?nt(nt(t,At.ajaxSettings),e):nt(At.ajaxSettings,t)},ajaxPrefilter:tt(Je),ajaxTransport:tt(Ke),ajax:function(t,e){function n(t,e,n,i){var o,r,s,a,u,c=e;f||(f=!0,d&&E.clearTimeout(d),l=undefined,p=i||"",A.readyState=0<t?4:0,o=200<=t&&t<300||304===t,n&&(a=it(g,A,n)),a=ot(g,a,A,o),o?(g.ifModified&&((u=A.getResponseHeader("Last-Modified"))&&(At.lastModified[h]=u),(u=A.getResponseHeader("etag"))&&(At.etag[h]=u)),204===t||"HEAD"===g.type?c="nocontent":304===t?c="notmodified":(c=a.state,r=a.data,o=!(s=a.error))):(s=c,!t&&c||(c="error",t<0&&(t=0))),A.status=t,A.statusText=(e||c)+"",o?b.resolveWith(y,[r,c,A]):b.rejectWith(y,[A,c,s]),A.statusCode(x),x=undefined,m&&v.trigger(o?"ajaxSuccess":"ajaxError",[A,g,o?r:s]),w.fireWith(y,[A,c]),m&&(v.trigger("ajaxComplete",[A,g]),--At.active||At.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=undefined),e=e||{};var l,h,p,i,d,o,f,m,r,s,g=At.ajaxSetup({},e),y=g.context||g,v=g.context&&(y.nodeType||y.jquery)?At(y):At.event,b=At.Deferred(),w=At.Callbacks("once memory"),x=g.statusCode||{},a={},u={},c="canceled",A={readyState:0,getResponseHeader:function(t){var e;if(f){if(!i)for(i={};e=Ve.exec(p);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return f?p:null},setRequestHeader:function(t,e){return null==f&&(t=u[t.toLowerCase()]=u[t.toLowerCase()]||t,a[t]=e),this},overrideMimeType:function(t){return null==f&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(f)A.always(t[A.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||c;return l&&l.abort(e),n(0,e),this}};if(b.promise(A),g.url=((t||g.url||Ne.href)+"").replace($e,Ne.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(Nt)||[""],null==g.crossDomain){o=st.createElement("a");try{o.href=g.url,o.href=o.href,g.crossDomain=Ge.protocol+"//"+Ge.host!=o.protocol+"//"+o.host}catch(C){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=At.param(g.data,g.traditional)),et(Je,g,e,A),f)return A;for(r in(m=At.event&&g.global)&&0==At.active++&&At.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!ze.test(g.type),h=g.url.replace(He,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(qe,"+")):(s=g.url.slice(h.length),g.data&&(g.processData||"string"==typeof g.data)&&(h+=(Ie.test(h)?"&":"?")+g.data,delete g.data),!1===g.cache&&(h=h.replace(We,"$1"),s=(Ie.test(h)?"&":"?")+"_="+Oe+++s),g.url=h+s),g.ifModified&&(At.lastModified[h]&&A.setRequestHeader("If-Modified-Since",At.lastModified[h]),At.etag[h]&&A.setRequestHeader("If-None-Match",At.etag[h])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&A.setRequestHeader("Content-Type",g.contentType),A.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Xe+"; q=0.01":""):g.accepts["*"]),g.headers)A.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(y,A,g)||f))return A.abort();if(c="abort",w.add(g.complete),A.done(g.success),A.fail(g.error),l=et(Ke,g,e,A)){if(A.readyState=1,m&&v.trigger("ajaxSend",[A,g]),f)return A;g.async&&0<g.timeout&&(d=E.setTimeout(function(){A.abort("timeout")},g.timeout));try{f=!1,l.send(a,n)}catch(C){if(f)throw C;n(-1,C)}}else n(-1,"No Transport");return A},getJSON:function(t,e,n){return At.get(t,e,n,"json")},getScript:function(t,e){return At.get(t,undefined,e,"script")}}),At.each(["get","post"],function(t,o){At[o]=function(t,e,n,i){return vt(e)&&(i=i||n,n=e,e=undefined),At.ajax(At.extend({url:t,type:o,dataType:i,data:e,success:n},At.isPlainObject(t)&&t))}}),At._evalUrl=function(t){return At.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},At.fn.extend({wrapAll:function(t){var e;return this[0]&&(vt(t)&&(t=t.call(this[0])),e=At(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return vt(n)?this.each(function(t){At(this).wrapInner(n.call(this,t))}):this.each(function(){var t=At(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=vt(e);return this.each(function(t){At(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){At(this).replaceWith(this.childNodes)}),this}}),At.expr.pseudos.hidden=function(t){return!At.expr.pseudos.visible(t)},At.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},At.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch(t){}};var Ye={0:200,1223:204},Qe=At.ajaxSettings.xhr();yt.cors=!!Qe&&"withCredentials"in Qe,
yt.ajax=Qe=!!Qe,At.ajaxTransport(function(r){var s,a;if(yt.cors||Qe&&!r.crossDomain)return{send:function(t,e){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);s=function(t){return function(){s&&(s=a=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(Ye[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=s(),a=i.onerror=i.ontimeout=s("error"),i.onabort!==undefined?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&E.setTimeout(function(){s&&a()})},s=s("abort");try{i.send(r.hasContent&&r.data||null)}catch(o){if(s)throw o}},abort:function(){s&&s()}}}),At.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),At.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return At.globalEval(t),t}}}),At.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),At.ajaxTransport("script",function(n){var i,o;if(n.crossDomain)return{send:function(t,e){i=At("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",o=function(t){i.remove(),o=null,t&&e("error"===t.type?404:200,t.type)}),st.head.appendChild(i[0])},abort:function(){o&&o()}}});var Ze,tn=[],en=/(=)\?(?=&|$)|\?\?/;At.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||At.expando+"_"+Oe++;return this[t]=!0,t}}),At.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,r,s=!1!==t.jsonp&&(en.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=vt(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(en,"$1"+i):!1!==t.jsonp&&(t.url+=(Ie.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return r||At.error(i+" was not called"),r[0]},t.dataTypes[0]="json",o=E[i],E[i]=function(){r=arguments},n.always(function(){o===undefined?At(E).removeProp(i):E[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,tn.push(i)),r&&vt(o)&&o(r[0]),r=o=undefined}),"script"}),yt.createHTMLDocument=((Ze=st.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ze.childNodes.length),At.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(yt.createHTMLDocument?((i=(e=st.implementation.createHTMLDocument("")).createElement("base")).href=st.location.href,e.head.appendChild(i)):e=st),r=!n&&[],(o=Lt.exec(t))?[e.createElement(o[1])]:(o=A([t],e,r),r&&r.length&&At(r).remove(),At.merge([],o.childNodes)));var i,o,r},At.fn.load=function(t,e,n){var i,o,r,s=this,a=t.indexOf(" ");return-1<a&&(i=G(t.slice(a)),t=t.slice(0,a)),vt(e)?(n=e,e=undefined):e&&"object"==typeof e&&(o="POST"),0<s.length&&At.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?At("<div>").append(At.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},At.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){At.fn[e]=function(t){return this.on(e,t)}}),At.expr.pseudos.animated=function(e){return At.grep(At.timers,function(t){return e===t.elem}).length},At.offset={setOffset:function(t,e,n){var i,o,r,s,a,u,c=At.css(t,"position"),l=At(t),h={};"static"===c&&(t.style.position="relative"),a=l.offset(),r=At.css(t,"top"),u=At.css(t,"left"),("absolute"===c||"fixed"===c)&&-1<(r+u).indexOf("auto")?(s=(i=l.position()).top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(u)||0),vt(e)&&(e=e.call(t,n,At.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+o),"using"in e?e.using.call(t,h):l.css(h)}},At.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){At.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],o={top:0,left:0};if("fixed"===At.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===At.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((o=At(t).offset()).top+=At.css(t,"borderTopWidth",!0),o.left+=At.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-At.css(i,"marginTop",!0),left:e.left-o.left-At.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===At.css(t,"position");)t=t.offsetParent;return t||ie})}}),At.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var r="pageYOffset"===o;At.fn[e]=function(t){return Mt(this,function(t,e,n){var i;if(bt(t)?i=t:9===t.nodeType&&(i=t.defaultView),n===undefined)return i?i[o]:t[e];i?i.scrollTo(r?i.pageXOffset:n,r?n:i.pageYOffset):t[e]=n},e,t,arguments.length)}}),At.each(["top","left"],function(t,n){At.cssHooks[n]=M(yt.pixelPosition,function(t,e){if(e)return e=I(t,n),he.test(e)?At(t).position()[n]+"px":e})}),At.each({Height:"height",Width:"width"},function(s,a){At.each({padding:"inner"+s,content:a,"":"outer"+s},function(i,r){At.fn[r]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),o=i||(!0===t||!0===e?"margin":"border");return Mt(this,function(t,e,n){var i;return bt(t)?0===r.indexOf("outer")?t["inner"+s]:t.document.documentElement["client"+s]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+s],i["scroll"+s],t.body["offset"+s],i["offset"+s],i["client"+s])):n===undefined?At.css(t,e,o):At.style(t,e,n,o)},a,n?t:undefined,n)}})}),At.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){At.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),At.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),At.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),At.proxy=function(t,e){var n,i,o;return"string"==typeof e&&(n=t[e],e=t,t=n),vt(t)?(i=ut.call(arguments,2),(o=function(){return t.apply(e||this,i.concat(ut.call(arguments)))}).guid=t.guid=t.guid||At.guid++,o):undefined},At.holdReady=function(t){t?At.readyWait++:At.ready(!0)},At.isArray=Array.isArray,At.parseJSON=JSON.parse,At.nodeName=c,At.isFunction=vt,At.isWindow=bt,At.camelCase=d,At.type=g,At.now=Date.now,At.isNumeric=function(t){var e=At.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return At});var nn=E.jQuery,on=E.$;return At.noConflict=function(t){return E.$===At&&(E.$=on),t&&E.jQuery===At&&(E.jQuery=nn),At},t||(E.jQuery=E.$=At),At}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"}),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(l){var r,n=0,a=Array.prototype.slice;return l.cleanData=(r=l.cleanData,function(t){var e,n,i;for(i=0;null!=(n=t[i]);i++)try{(e=l._data(n,"events"))&&e.remove&&l(n).triggerHandler("remove")}catch(o){}r(t)}),l.widget=function(t,n,e){var i,o,r,s={},a=t.split(".")[0],u=a+"-"+(t=t.split(".")[1]);return e||(e=n,n=l.Widget),l.isArray(e)&&(e=l.extend.apply(null,[{}].concat(e))),l.expr[":"][u.toLowerCase()]=function(t){return!!l.data(t,u)},l[a]=l[a]||{},i=l[a][t],o=l[a][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},l.extend(o,i,{version:e.version,_proto:l.extend({},e),_childConstructors:[]}),(r=new n).options=l.widget.extend({},r.options),l.each(e,function(e,r){l.isFunction(r)?s[e]=function(){function i(){return n.prototype[e].apply(this,arguments)}function o(t){return n.prototype[e].apply(this,t)}return function(){var t,e=this._super,n=this._superApply;return this._super=i,this._superApply=o,t=r.apply(this,arguments),this._super=e,this._superApply=n,t}}():s[e]=r}),o.prototype=l.widget.extend(r,{widgetEventPrefix:i&&r.widgetEventPrefix||t},s,{constructor:o,namespace:a,widgetName:t,widgetFullName:u}),i?(l.each(i._childConstructors,function(t,e){var n=e.prototype;l.widget(n.namespace+"."+n.widgetName,o,e._proto)}),delete i._childConstructors):n._childConstructors.push(o),l.widget.bridge(t,o),o},l.widget.extend=function(t){for(var e,n,i=a.call(arguments,1),o=0,r=i.length;o<r;o++)for(e in i[o])n=i[o][e],i[o].hasOwnProperty(e)&&n!==undefined&&(l.isPlainObject(n)?t[e]=l.isPlainObject(t[e])?l.widget.extend({},t[e],n):l.widget.extend({},n):t[e]=n);return t},l.widget.bridge=function(r,e){var s=e.prototype.widgetFullName||r;l.fn[r]=function(n){var t="string"==typeof n,i=a.call(arguments,1),o=this;return t?this.length||"instance"!==n?this.each(function(){var t,e=l.data(this,s);return"instance"===n?(o=e,!1):e?l.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&t!==undefined?(o=t&&t.jquery?o.pushStack(t.get()):t,!1):void 0:l.error("no such method '"+n+"' for "+r+" widget instance"):l.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+n+"'")}):o=undefined:(i.length&&(n=l.widget.extend.apply(null,[n].concat(i))),this.each(function(){var t=l.data(this,s);t?(t.option(n||{}),t._init&&t._init()):l.data(this,s,new e(n,this))})),o}},l.Widget=function(){},l.Widget._childConstructors=[],l.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=l(e||this.defaultElement||this)[0],this.element=l(e),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=l(),this.hoverable=l(),this.focusable=l(),this.classesElementLookup={},e!==this&&(l.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=l(e.style?e.ownerDocument:e.document||e),this.window=l(this.document[0].defaultView||this.document[0].parentWindow)),this.options=l.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:l.noop,_create:l.noop,_init:l.noop,destroy:function(){var n=this;this._destroy(),l.each(this.classesElementLookup,function(t,e){n._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:l.noop,widget:function(){return this.element},option:function(t,e){var n,i,o,r=t;if(0===arguments.length)return l.widget.extend({},this.options);if("string"==typeof t)if(r={},t=(n=t.split(".")).shift(),n.length){for(i=r[t]=l.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)i[n[o]]=i[n[o]]||{},i=i[n[o]];if(t=n.pop(),1===arguments.length)return i[t]===undefined?null:i[t];i[t]=e}else{if(1===arguments.length)return this.options[t]===undefined?null:this.options[t];r[t]=e}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,n,i;for(e in t)i=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&i&&i.length&&(n=l(i.get()),this._removeClass(i,e),n.addClass(this._classes({element:n,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){function t(t,e){var n,i;for(i=0;i<t.length;i++)n=s.classesElementLookup[t[i]]||l(),n=o.add?l(l.unique(n.get().concat(o.element.get()))):l(n.not(o.element).get()),s.classesElementLookup[t[i]]=n,r.push(t[i]),e&&o.classes[t[i]]&&r.push(o.classes[t[i]])}var r=[],s=this;return o=l.extend({element:this.element,classes:this.options.classes||{}},o),this._on(o.element,{remove:"_untrackClassesElement"}),o.keys&&t(o.keys.match(/\S+/g)||[],!0),o.extra&&t(o.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(n){var i=this;l.each(i.classesElementLookup,function(t,e){-1!==l.inArray(n.target,e)&&(i.classesElementLookup[t]=l(e.not(n.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof t||null===t,r={extra:o?e:n,keys:o?t:e,element:o?this.element:t,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(s,a,t){var u,c=this;"boolean"!=typeof s&&(t=a,a=s,s=!1),t?(a=u=l(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,u=this.widget()),l.each(t,function(t,e){function n(){if(s||!0!==c.options.disabled&&!l(this).hasClass("ui-state-disabled"))return("string"==typeof e?c[e]:e).apply(c,arguments)}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||l.guid++);var i=t.match(/^([\w:-]*)\s*(.*)$/),o=i[1]+c.eventNamespace,r=i[2];r?u.on(o,r,n):a.on(o,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=l(this.bindings.not(t).get()),this.focusable=l(this.focusable.not(t).get()),this.hoverable=l(this.hoverable.not(t).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(l(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(l(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(l(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(l(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,n){var i,o,r=this.options[t];if(n=n||{},(e=l.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(i in o)i in e||(e[i]=o[i]);return this.element.trigger(e,n),!(l.isFunction(r)&&!1===r.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},l.each({show:"fadeIn",hide:"fadeOut"},function(r,s){l.Widget.prototype["_"+r]=function(e,t,n){var i;"string"==typeof t&&(t={effect:t});var o=t?!0===t||"number"==typeof t?s:t.effect||s:r;"number"==typeof(t=t||{})&&(t={duration:t}),i=!l.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&l.effects&&l.effects.effect[o]?e[r](t):o!==r&&e[o]?e[o](t.duration,t.easing,n):e.queue(function(t){l(this)[r](),n&&n.call(e[0]),t()})}}),l.widget}),function(t){"function"==typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],t):t(jQuery)}(function(o){var r=!1;return o(document).on("mouseup",function(){r=!1}),o.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){if(!0===o.data(t.target,e.widgetName+".preventClickEvent"))return o.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&o(t.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===o.data(t.target,this.widgetName+".preventClickEvent")&&o.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),r=!0))}},_mouseMove:function(t){if(this._mouseMoved){if(o.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&o.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,r=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(i){return i.extend(i.expr[":"],{data:i.expr.createPseudo?i.expr.createPseudo(function(e){return function(t){return!!i.data(t,e)}}):function(t,e,n){return!!i.data(t,n[3])}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}(function(r){return r.fn.scrollParent=function(t){var e=this.css("position"),n="absolute"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=r(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&o.length?o:r(this[0].ownerDocument||document)}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./mouse","../data","../ie","../scroll-parent","../version","../widget"],t):t(jQuery)}(function(d){return d.widget("ui.sortable",d.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return e<=t&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),d.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var n=null,i=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),d(t.target).parents().each(function(){if(d.data(this,o.widgetName+"-item")===o)return n=d(this),!1}),d.data(t.target,o.widgetName+"-item")===o&&(n=d(t.target)),!!n&&(!(this.options.handle&&!e&&(d(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,n){var i,o,r=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=d("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return d.ui.ddmanager&&(d.ui.ddmanager.current=this),d.ui.ddmanager&&!r.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,n,i,o,r=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-this.document.scrollTop()<r.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),t.pageX-this.document.scrollLeft()<r.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==s&&d.ui.ddmanager&&!r.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(i=(n=this.items[e]).item[0],(o=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===i||d.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&d.contains(this.element[0],i))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),d.ui.ddmanager&&d.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,t),this.options.revert){var n=this,i=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,d(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new d.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},d(t).each(function(){var t=(d(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&n.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e.each(function(){n.push(d(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,u=a+t.height,c=this.offset.click.top,l=this.offset.click.left,h="x"===this.options.axis||a<i+c&&i+c<u,p="y"===this.options.axis||r<e+l&&e+l<s,d=h&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?d:r<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<u},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!i||!o)&&(e=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function e(){s.push(this)}var n,i,o,r,s=[],a=[],u=this._connectWith();if(u&&t)for(n=u.length-1;0<=n;n--)for(i=(o=d(u[n],this.document[0])).length-1;0<=i;i--)(r=d.data(o[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&a.push([d.isFunction(r.options.items)?r.options.items.call(r.element):d(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(a.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=a.length-1;0<=n;n--)a[n][0].each(e);return d(s)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=d.grep(this.items,function(t){for(var e=0;e<n.length;e++)if(n[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,n,i,o,r,s,a,u,c=this.items,l=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):d(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(e=h.length-1;0<=e;e--)for(n=(i=d(h[e],this.document[0])).length-1;0<=n;n--)(o=d.data(i[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&(l.push([d.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):d(o.options.items,o.element),o]),this.containers.push(o));for(e=l.length-1;0<=e;e--)for(r=l[e][1],n=0,u=(s=l[e][0]).length;n<u;n++)(a=d(s[n])).data(this.widgetName+"-item",r),c.push({item:a,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,n,i,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(n=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?d(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),o=i.offset(),n.left=o.left,n.top=o.top);if(
this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)o=this.containers[e].element.offset(),this.containers[e].containerCache.left=o.left,this.containers[e].containerCache.top=o.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(n){var i,o=(n=n||this).options;o.placeholder&&o.placeholder.constructor!==String||(i=o.placeholder,o.placeholder={element:function(){var t=n.currentItem[0].nodeName.toLowerCase(),e=d("<"+t+">",n.document[0]);return n._addClass(e,"ui-sortable-placeholder",i||n.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===t?n._createTrPlaceholder(n.currentItem.find("tr").eq(0),d("<tr>",n.document[0]).appendTo(e)):"tr"===t?n._createTrPlaceholder(n.currentItem,e):"img"===t&&e.attr("src",n.currentItem.attr("src")),i||e.css("visibility","hidden"),e},update:function(t,e){i&&!o.forcePlaceholderSize||(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=d(o.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),o.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function(t,e){var n=this;t.children().each(function(){d("<td>&#160;</td>",n.document[0]).attr("colspan",d(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,n,i,o,r,s,a,u,c,l,h=null,p=null;for(e=this.containers.length-1;0<=e;e--)if(!d.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(h&&d.contains(this.containers[e].element[0],h.element[0]))continue;h=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(i=1e4,o=null,r=(c=h.floating||this._isFloating(this.currentItem))?"left":"top",s=c?"width":"height",l=c?"pageX":"pageY",n=this.items.length-1;0<=n;n--)d.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(a=this.items[n].item.offset()[r],u=!1,t[l]-a>this.items[n][s]/2&&(u=!0),Math.abs(t[l]-a)<i&&(i=Math.abs(t[l]-a),o=this.items[n],this.direction=u?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var e=this.options,n=d.isFunction(e.helper)?d(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||d("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!e.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!e.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),d.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&d.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&d.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=d(i.containment)[0],e=d(i.containment).offset(),n="hidden"!==d(t).css("overflow"),this.containment=[e.left+(parseInt(d(t).css("borderLeftWidth"),10)||0)+(parseInt(d(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(d(t).css("borderTopWidth"),10)||0)+(parseInt(d(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(d(t).css("borderLeftWidth"),10)||0)-(parseInt(d(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(d(t).css("borderTopWidth"),10)||0)-(parseInt(d(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop())*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())*n}},_generatePosition:function(t){var e,n,i=this.options,o=t.pageX,r=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1],r=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1]:e,n=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(e,n,i){return function(t){i._trigger(e,t,n._uiHash(n))}}this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;0<=i;i--)e||o.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<o.length;i++)o[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===d.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||d([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})}),function(){}.call(this),function(){null==window.Set&&(window.Set=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype["delete"]=function(t){var e;return-1!==(e=this.values.indexOf(t))&&(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(this),function(t){function i(){}function o(t,e){return function(){t.apply(e,arguments)}}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function s(n,i){for(;3===n._state;)n=n._value;return 0===n._state?void n._deferreds.push(i):(n._handled=!0,void p(function(){var t=1===n._state?i.onFulfilled:i.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(s){return void u(i.promise,s)}a(i.promise,e)}else(1===n._state?a:u)(i.promise,n._value)}))}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void h(o(n,e),t)}t._state=1,t._value=e,c(t)}catch(a){u(t,a)}}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&setTimeout(function(){t._handled||d(t._value)},1);for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,u(e,t))})}catch(r){if(n)return;n=!0,u(e,r)}}var e=setTimeout,p="function"==typeof setImmediate&&setImmediate||function(t){e(t,1)},d=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=new r(i);return s(this,new l(t,e,n)),n},r.all=function(t){var a=Array.prototype.slice.call(t);return new r(function(i,o){function r(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){r(e,t)},o)}a[e]=t,0==--s&&i(a)}catch(l){o(l)}}if(0===a.length)return i([]);for(var s=a.length,t=0;t<a.length;t++)r(t,a[t])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(n){return new r(function(t,e){e(n)})},r.race=function(o){return new r(function(t,e){for(var n=0,i=o.length;n<i;n++)o[n].then(t,e)})},r._setImmediateFn=function(t){p=t},r._setUnhandledRejectionFn=function(t){d=t},"undefined"!=typeof module&&module.exports?module.exports=r:t.Promise||(t.Promise=r)}(this),function(){var e,t,n,i,o,r,s,a,u="object"==typeof window.customElements,c="function"==typeof document.registerElement;u||c||("undefined"==typeof WeakMap&&(r=Object.defineProperty,s=Date.now()%1e9,(a=function(){this.name="__st"+(1e9*Math.random()>>>0)+s+++"__"}).prototype={set:function(t,e){var n=t[this.name];return n&&n[0]===t?n[1]=e:r(t,this.name,{value:[t,e],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){var e=t[this.name];return!(!e||e[0]!==t||(e[0]=e[1]=void 0,0))},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=a),function(t){function o(t){A.push(t),x||(x=!0,m(e))}function r(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function e(){x=!1;var t=A;A=[],t.sort(function(t,e){return t.uid_-e.uid_});var n=!1;t.forEach(function(t){var e=t.takeRecords();i(t),e.length&&(t.callback_(e,t),n=!0)}),n&&e()}function i(n){n.nodes_.forEach(function(t){var e=g.get(t);e&&e.forEach(function(t){t.observer===n&&t.removeTransientObservers()})})}function h(t,e){for(var n=t;n;n=n.parentNode){var i=g.get(n);if(i)for(var o=0;o<i.length;o++){var r=i[o],s=r.options;if(n===t||s.subtree){var a=e(s);a&&r.enqueue(a)}}}}function n(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++C}function s(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function a(t){var e=new s(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function p(t,e){return b=new s(t,e)}function d(t){return w||((w=a(b)).oldValue=t,w)}function f(){b=w=void 0}function u(t){return t===w||t===b}function c(t,e){return t===e?t:w&&u(t)?w:null}function l(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var m,g=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var y=[],v=String(Math.random());window.addEventListener("message",function(t){if(t.data===v){var e=y;y=[],e.forEach(function(t){t()})}}),m=function(t){y.push(t),window.postMessage(v,"*")}}var b,w,x=!1,A=[],C=0;n.prototype={observe:function(t,e){if(t=r(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=g.get(t);n||g.set(t,n=[]);for(var i,o=0;o<n.length;o++)if(n[o].observer===this){(i=n[o]).removeListeners(),i.options=e;break}i||(i=new l(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=g.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},l.prototype={enqueue:function(t){var e=this.observer.records_,n=e.length;if(0<e.length){var i=c(e[n-1],t);if(i)return void(e[n-1]=i)}else o(this.observer);e[n]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=g.get(t);e||g.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=g.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,i=t.target;(r=new p("attributes",i)).attributeName=e,r.attributeNamespace=n;var o=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;h(i,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(n)?void 0:t.attributeOldValue?d(o):r});break;case"DOMCharacterDataModified":var r=p("characterData",i=t.target);o=t.prevValue;h(i,function(t){return t.characterData?t.characterDataOldValue?d(o):r:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var s,a,u=t.target;"DOMNodeInserted"===t.type?(s=[u],a=[]):(s=[],a=[u]);var c=u.previousSibling,l=u.nextSibling;(r=p("childList",t.target.parentNode)).addedNodes=s,r.removedNodes=a,r.previousSibling=c,r.nextSibling=l,h(t.relatedNode,function(t){return t.childList?r:void 0})}f()}},t.JsMutationObserver=n,t.MutationObserver||((t.MutationObserver=n)._isPolyfilled=!0)}}(self),function(){"use strict";if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}var e,n;if(window.requestAnimationFrame||(window.requestAnimationFrame=(e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)?function(t){return e(function(){t(performance.now())})}:function(t){return window.setTimeout(t,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}),!((n=document.createEvent("Event")).initEvent("foo",!0,!0),n.preventDefault(),n.defaultPrevented)){var i=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(i.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var o=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||o&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||o&&"function"!=typeof window.Event){var r=window.Event;window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n},window.Event.prototype=r.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},e=window.CustomElements,t=e.flags,n=[],i=function(t){n.push(t)},o=function(){n.forEach(function(t){t(e)})},e.addModule=i,e.initializeModules=o,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative),window.CustomElements.addModule(function(t){function i(t,e){o(t,function(t){return!!e(t)||void n(t,e)}),n(t,e)}function o(t,e,n){var i=t.firstElementChild;if(!i)for(i=t.firstChild;i&&i.nodeType!==Node.ELEMENT_NODE;)i=i.nextSibling;for(;i;)!0!==e(i,n)&&o(i,e,n),i=i.nextElementSibling;return null}function n(t,e){for(var n=t.shadowRoot;n;)i(n,e),n=n.olderShadowRoot}function e(t,e){a(t,e,[])}function a(t,e,n){if(t=window.wrap(t),!(0<=n.indexOf(t))){n.push(t);for(var i,o=t.querySelectorAll("link[rel="+u+"]"),r=0,s=o.length;r<s&&(i=o[r]);r++)i["import"]&&a(i["import"],e,n);e(t)}}var u=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=e,t.forSubtree=i}),window.CustomElements.addModule(function(n){function s(t,e){return i(t,e)||o(t,e)}function i(t,e){return!!n.upgrade(t,e)||void(e&&a(t))}function o(t,e){b(t,function(t){return!!i(t,e)||void 0})}function e(t){C.push(t),A||(A=!0,setTimeout(r))}function r(){A=!1;for(var t,e=C,n=0,i=e.length;n<i&&(t=e[n]);n++)t();C=[]}function a(t){x?e(function(){u(t)}):u(t)}function u(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function c(t){l(t),b(t,function(t){l(t)})}function l(t){x?e(function(){h(t)}):h(t)}function h(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function p(t){for(var e=t,n=window.wrap(document);e;){if(e==n)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}function t(t){if(t.shadowRoot&&!t.shadowRoot.__watched){v.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)m(e),e=e.olderShadowRoot}}function d(t,e){if(v.dom){var n=e[0];if(n&&"childList"===n.type&&n.addedNodes&&n.addedNodes){for(var i=n.addedNodes[0];i&&i!==document&&!i.host;)i=i.parentNode;var o=i&&(i.URL||i._URL||i.host&&i.host.localName)||"";o=o.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",e.length,o||"")}var r=p(t);e.forEach(function(t){"childList"===t.type&&(E(t.addedNodes,function(t){t.localName&&s(t,r)}),E(t.removedNodes,function(t){t.localName&&c(t)}))}),v.dom&&console.groupEnd()}function f(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(d(t,e.takeRecords()),r())}function m(t){if(!t.__observer){var e=new MutationObserver(d.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function g(t){t=window.wrap(t),v.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),s(t,t===window.wrap(document)),m(t),v.dom&&console.groupEnd()}function y(t){w(t,g)}var v=n.flags,b=n.forSubtree,w=n.forDocumentTree,x=window.MutationObserver._isPolyfilled&&v["throttle-attached"];n.hasPolyfillMutations=x,n.hasThrottledAttached=x;var A=!1,C=[],E=Array.prototype.forEach.call.bind(Array.prototype.forEach),S=Element.prototype.createShadowRoot;S&&(Element.prototype.createShadowRoot=function(){var t=S.call(this);return window.CustomElements.watchShadow(this),t}),n.watchShadow=t,n.upgradeDocumentTree=y,n.upgradeDocument=g,n.upgradeSubtree=o,n.upgradeAll=s,n.attached=a,n.takeRecords=f}),window.CustomElements.addModule(function(o){function t(t,e){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var n=t.getAttribute("is"),i=o.getRegisteredDefinition(t.localName)||o.getRegisteredDefinition(n);if(i&&(n&&i.tag==t.localName||!n&&!i["extends"]))return r(t,i,e)}}function r(t,e,n){return a.upgrade&&console.group("upgrade:",t.localName),e.is&&t.setAttribute("is",e.is),i(t,e),t.__upgraded__=!0,s(t),n&&o.attached(t),o.upgradeSubtree(t,n),a.upgrade&&console.groupEnd(),t}function i(t,e){Object.__proto__||n(t,e.prototype,e["native"]),t.__proto__=e.prototype}function n(t,e,n){for(var i={},o=e;o!==n&&o!==HTMLElement.prototype;){for(var r,s=Object.getOwnPropertyNames(o),a=0;r=s[a];a++)i[r]||(Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r)),i[r]=1);o=Object.getPrototypeOf(o)}}function s(t){t.createdCallback&&t.createdCallback()}var a=o.flags;o.upgrade=t,o.upgradeWithDefinition=r,o.implementPrototype=i}),window.CustomElements.addModule(function(i){function t(t,e){var n=e||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(s(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(l(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return n.prototype||(n.prototype=Object.create(HTMLElement.prototype)),n.__name=t.toLowerCase(),n["extends"]&&(n["extends"]=n["extends"].toLowerCase()),n.lifecycle=n.lifecycle||{},n.ancestry=a(n["extends"]),u(n),c(n),o(n.prototype),h(n.__name,n),n.ctor=p(n),n.ctor.prototype=n.prototype,n.prototype.constructor=n.ctor,i.ready&&g(document),n.ctor}function o(t){if(!t.setAttribute._polyfilled){var n=t.setAttribute;t.setAttribute=function(t,e){r.call(this,t,e,n)};var e=t.removeAttribute;t.removeAttribute=function(t){r.call(this,t,null,e)},t.setAttribute._polyfilled=!0}}function r(t,e,n){t=t.toLowerCase();var i=this.getAttribute(t);n.apply(this,arguments);var o=this.getAttribute(t);this.attributeChangedCallback&&o!==i&&this.attributeChangedCallback(t,i,o)}function s(t){for(var e=0;e<x.length;e++)if(t===x[e])return!0}function a(t){var e=l(t);return e?a(e["extends"]).concat([e]):[]}function u(t){for(var e,n=t["extends"],i=0;e=t.ancestry[i];i++)n=e.is&&e.tag;t.tag=n||t.__name,n&&(t.is=t.__name)}function c(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var n=document.createElement(t.tag);e=Object.getPrototypeOf(n)}for(var i,o=t.prototype,r=!1;o;)o==e&&(r=!0),(i=Object.getPrototypeOf(o))&&(o.__proto__=i),o=i;r||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t["native"]=e}}function e(t){return v(E(t.tag),t)}function l(t){return t?A[t.toLowerCase()]:void 0}function h(t,e){A[t]=e}function p(t){return function(){return e(t)}}function n(t,e,n){return t===C?d(e,n):S(t,e)}function d(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var n,i=l(e||t);if(i){if(t==i.tag&&e==i.is)return new i.ctor;if(!e&&!i.is)return new i.ctor}return e?(n=d(t)).setAttribute("is",e):(n=E(t),0<=t.indexOf("-")&&b(n,HTMLElement)),n}function f(t,e){var n=t[e];t[e]=function(){var t=n.apply(this,arguments);return y(t),t}}var m,g=(i.isIE,i.upgradeDocumentTree),y=i.upgradeAll,v=i.upgradeWithDefinition,b=i.implementPrototype,w=i.useNative,x=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],A={},C="http://www.w3.org/1999/xhtml",E=document.createElement.bind(document),S=document.createElementNS.bind(document);m=Object.__proto__||w?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var n=t;n;){if(n===e.prototype)return!0;n=n.__proto__}return!1},f(Node.prototype,"cloneNode"),f(document,"importNode"),document.registerElement=t,document.createElement=d,document.createElementNS=n,i.registry=A,i["instanceof"]=m,i.reservedTagList=x,i.getRegisteredDefinition=l,document.register=document.registerElement}),function(t){function e(){r(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=t.useNative,i=t.initializeModules;if(t.isIE,n){var o=function(){};t.watchShadow=o,t.upgrade=o,t.upgradeAll=o,t.upgradeDocumentTree=o,t.upgradeSubtree=o,t.takeRecords=o,t["instanceof"]=function(t,e){return t instanceof e}}else i();var r=t.upgradeDocumentTree,s=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t["import"]&&s(wrap(t["import"]))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var a=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(a,e)}else e()}(window.CustomElements))}.call(this),function(){}.call(this),function(){var t=this;(function(){(function(){this.Trix={VERSION:"1.0.0",ZERO_WIDTH_SPACE:"\ufeff",NON_BREAKING_SPACE:"\xa0",OBJECT_REPLACEMENT_CHARACTER:"\ufffc",browser:{composesExistingText:/Android.*Chrome/.test(navigator.userAgent),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent)},config:{}}}).call(this)}).call(t);var D=t.Trix;(function(){(function(){D.BasicObject=function(){function t(){}var s,a,i;return t.proxyMethod=function(t){var n,i,e,o,r;return e=a(t),n=e.name,o=e.toMethod,r=e.toProperty,i=e.optional,this.prototype[n]=function(){var t,e;return t=null!=o?i?"function"==typeof this[o]?this[o]():void 0:this[o]():null!=r?this[r]:void 0,i?null!=(e=null!=t?t[n]:void 0)?s.call(e,t,arguments):void 0:(e=t[n],s.call(e,t,arguments))}},a=function(t){var e,n;if(!(n=t.match(i)))throw new Error("can't parse @proxyMethod expression: "+t);return e={name:n[4]},null!=n[2]?e.toMethod=n[1]:e.toProperty=n[1],null!=n[3]&&(e.optional=!0),e},s=Function.prototype.apply,i=/^(.+?)(\(\))?(\?)?\.(.+?)$/,t}()}).call(this),function(){var i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.Object=function(t){function e(){this.id=++n}var n;return i(e,t),n=0,e.fromJSONString=function(t){return this.fromJSON(JSON.parse(t))},e.prototype.hasSameConstructorAs=function(t){return this.constructor===(null!=t?t.constructor:void 0)},e.prototype.isEqualTo=function(t){return this===t},
e.prototype.inspect=function(){var t,i,o;return t=function(){var t,e,n;for(i in n=[],e=null!=(t=this.contentsForInspection())?t:{})o=e[i],n.push(i+"="+o);return n}.call(this),"#<"+this.constructor.name+":"+this.id+(t.length?" "+t.join(", "):"")+">"},e.prototype.contentsForInspection=function(){},e.prototype.toJSONString=function(){return JSON.stringify(this)},e.prototype.toUTF16String=function(){return D.UTF16String.box(this)},e.prototype.getCacheKey=function(){return this.id.toString()},e}(D.BasicObject)}.call(this),function(){D.extend=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}}.call(this),function(){D.extend({defer:function(t){return setTimeout(t,1)}})}.call(this),function(){var a,s;D.extend({normalizeSpaces:function(t){return t.replace(RegExp(""+D.ZERO_WIDTH_SPACE,"g"),"").replace(RegExp(""+D.NON_BREAKING_SPACE,"g")," ")},normalizeNewlines:function(t){return t.replace(/\r\n/g,"\n")},breakableWhitespacePattern:RegExp("[^\\S"+D.NON_BREAKING_SPACE+"]"),squishBreakableWhitespace:function(t){return t.replace(RegExp(""+D.breakableWhitespacePattern.source,"g")," ").replace(/\ {2,}/g," ")},escapeHTML:function(t){var e;return(e=document.createElement("div")).textContent=t,e.innerHTML},summarizeStringChange:function(t,e){var n,i,o,r;return t=D.UTF16String.box(t),(e=D.UTF16String.box(e)).length<t.length?(r=(i=s(t,e))[0],n=i[1]):(n=(o=s(e,t))[0],r=o[1]),{added:n,removed:r}}}),s=function(t,e){var n,i,o,r,s;return t.isEqualTo(e)?["",""]:(o=(r=(i=a(t,e)).utf16String.length)?(s=i.offset,n=t.codepoints.slice(0,s).concat(t.codepoints.slice(s+r)),a(e,D.UTF16String.fromCodepoints(n))):a(e,t),[i.utf16String.toString(),o.utf16String.toString()])},a=function(t,e){var n,i,o;for(n=0,i=t.length,o=e.length;n<i&&t.charAt(n).isEqualTo(e.charAt(n));)n++;for(;n+1<i&&t.charAt(i-1).isEqualTo(e.charAt(o-1));)i--,o--;return{utf16String:t.slice(n,i),offset:n}}}.call(this),function(){D.extend({copyObject:function(t){var e,n,i;for(e in null==t&&(t={}),n={},t)i=t[e],n[e]=i;return n},objectsAreEqual:function(t,e){var n;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(t[n]!==e[n])return!1;return!0}})}.call(this),function(){var o=[].slice;D.extend({arraysAreEqual:function(t,e){var n,i,o;if(null==t&&(t=[]),null==e&&(e=[]),t.length!==e.length)return!1;for(i=n=0,o=t.length;n<o;i=++n)if(t[i]!==e[i])return!1;return!0},arrayStartsWith:function(t,e){return null==t&&(t=[]),null==e&&(e=[]),D.arraysAreEqual(t.slice(0,e.length),e)},spliceArray:function(t){var e,n,i;return n=t,e=2<=arguments.length?o.call(arguments,1):[],(i=n.slice(0)).splice.apply(i,e),i},summarizeArrayChange:function(t,e){var n,i,o,r,s,a,u,c,l,h,p;for(null==t&&(t=[]),null==e&&(e=[]),n=[],h=[],o=new Set,r=0,u=t.length;r<u;r++)p=t[r],o.add(p);for(i=new Set,s=0,c=e.length;s<c;s++)p=e[s],i.add(p),o.has(p)||n.push(p);for(a=0,l=t.length;a<l;a++)p=t[a],i.has(p)||h.push(p);return{added:n,removed:h}}})}.call(this),function(){var t,e,o,n;o=n=e=t=null,D.extend({getAllAttributeNames:function(){return null!=t?t:t=D.getTextAttributeNames().concat(D.getBlockAttributeNames())},getBlockConfig:function(t){return D.config.blockAttributes[t]},getBlockAttributeNames:function(){return null!=e?e:e=Object.keys(D.config.blockAttributes)},getTextConfig:function(t){return D.config.textAttributes[t]},getTextAttributeNames:function(){return null!=n?n:n=Object.keys(D.config.textAttributes)},getListAttributeNames:function(){var n,i;return null!=o?o:o=function(){var t,e;for(n in e=[],t=D.config.blockAttributes)null!=(i=t[n].listAttribute)&&e.push(i);return e}()}})}.call(this),function(){var d,n,t,e,i,o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};d=document.documentElement,n=null!=(t=null!=(e=null!=(i=d.matchesSelector)?i:d.webkitMatchesSelector)?e:d.msMatchesSelector)?t:d.mozMatchesSelector,D.extend({handleEvent:function(t,e){var n,i,o,r,s,a,u,c,l,h,p;return s=(u=null!=e?e:{}).onElement,r=u.matchingSelector,p=u.withCallback,o=u.inPhase,a=u.preventDefault,l=u.times,n=null!=s?s:d,c=r,p,h="capturing"===o,(i=function(t){var e;return null!=l&&0==--l&&i.destroy(),null!=(e=D.findClosestElementFromNode(t.target,{matchingSelector:c}))&&(null!=p&&p.call(e,t,e),a)?t.preventDefault():void 0}).destroy=function(){return n.removeEventListener(t,i,h)},n.addEventListener(t,i,h),i},handleEventOnce:function(t,e){return null==e&&(e={}),e.times=1,D.handleEvent(t,e)},triggerEvent:function(t,e){var n,i,o,r,s,a,u;return a=(u=null!=e?e:{}).onElement,i=u.bubbles,o=u.cancelable,n=u.attributes,r=null!=a?a:d,i=!1!==i,o=!1!==o,(s=document.createEvent("Events")).initEvent(t,i,o),null!=n&&D.extend.call(s,n),r.dispatchEvent(s)},elementMatchesSelector:function(t,e){return 1===(null!=t?t.nodeType:void 0)?n.call(t,e):void 0},findClosestElementFromNode:function(t,e){var n,i,o;for(n=(i=null!=e?e:{}).matchingSelector,o=i.untilNode;null!=t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(null!=t){if(null==n)return t;if(t.closest&&null==o)return t.closest(n);for(;t&&t!==o;){if(D.elementMatchesSelector(t,n))return t;t=t.parentNode}}},findInnerElement:function(t){for(;null!=t?t.firstElementChild:void 0;)t=t.firstElementChild;return t},innerElementIsActive:function(t){return document.activeElement!==t&&D.elementContainsNode(t,document.activeElement)},elementContainsNode:function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},findNodeFromContainerAndOffset:function(t,e){var n;if(t)return t.nodeType===Node.TEXT_NODE?t:0===e?null!=(n=t.firstChild)?n:t:t.childNodes.item(e-1)},findElementFromContainerAndOffset:function(t,e){var n;return n=D.findNodeFromContainerAndOffset(t,e),D.findClosestElementFromNode(n)},findChildIndexOfNode:function(t){var e;if(null!=t?t.parentNode:void 0){for(e=0;t=t.previousSibling;)e++;return e}},removeNode:function(t){var e;return null!=t&&null!=(e=t.parentNode)?e.removeChild(t):void 0},walkTree:function(t,e){var n,i,o,r,s;return i=(o=null!=e?e:{}).onlyNodesOfType,r=o.usingFilter,n=o.expandEntityReferences,s=function(){switch(i){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}}(),document.createTreeWalker(t,s,null!=r?r:null,!0===n)},tagName:function(t){var e;return null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0},makeElement:function(t,e){var n,i,o,r,s,a,u,c,l,h;if(null==e&&(e={}),"object"==typeof t?t=(e=t).tagName:e={attributes:e},i=document.createElement(t),null!=e.editable&&(null==e.attributes&&(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes)for(r in a=e.attributes)h=a[r],i.setAttribute(r,h);if(e.style)for(r in u=e.style)h=u[r],i.style[r]=h;if(e.data)for(r in c=e.data)h=c[r],i.dataset[r]=h;if(e.className)for(o=0,s=(l=e.className.split(" ")).length;o<s;o++)n=l[o],i.classList.add(n);return e.textContent&&(i.textContent=e.textContent),i},getBlockTagNames:function(){var n,i;return null!=D.blockTagNames?D.blockTagNames:D.blockTagNames=function(){var t,e;for(n in e=[],t=D.config.blockAttributes)(i=t[n].tagName)&&e.push(i);return e}()},nodeIsBlockContainer:function(t){return D.nodeIsBlockStartComment(null!=t?t.firstChild:void 0)},nodeProbablyIsBlockContainer:function(t){var e,n;return e=D.tagName(t),0<=o.call(D.getBlockTagNames(),e)&&(n=D.tagName(t.firstChild),o.call(D.getBlockTagNames(),n)<0)},nodeIsBlockStart:function(t,e){return(null!=e?e:{strict:!0}).strict?D.nodeIsBlockStartComment(t):D.nodeIsBlockStartComment(t)||!D.nodeIsBlockStartComment(t.firstChild)&&D.nodeProbablyIsBlockContainer(t)},nodeIsBlockStartComment:function(t){return D.nodeIsCommentNode(t)&&"block"===(null!=t?t.data:void 0)},nodeIsCommentNode:function(t){return(null!=t?t.nodeType:void 0)===Node.COMMENT_NODE},nodeIsCursorTarget:function(t,e){var n;return n=(null!=e?e:{}).name,t?D.nodeIsTextNode(t)?t.data===D.ZERO_WIDTH_SPACE?!n||t.parentNode.dataset.trixCursorTarget===n:void 0:D.nodeIsCursorTarget(t.firstChild):void 0},nodeIsAttachmentElement:function(t){return D.elementMatchesSelector(t,D.AttachmentView.attachmentSelector)},nodeIsEmptyTextNode:function(t){return D.nodeIsTextNode(t)&&""===(null!=t?t.data:void 0)},nodeIsTextNode:function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE}})}.call(this),function(){var e,n,u,i,c;e=D.copyObject,i=D.objectsAreEqual,D.extend({normalizeRange:u=function(t){var e;if(null!=t)return Array.isArray(t)||(t=[t,t]),[n(t[0]),n(null!=(e=t[1])?e:t[0])]},rangeIsCollapsed:function(t){var e,n,i;if(null!=t)return i=(n=u(t))[0],e=n[1],c(i,e)},rangesAreEqual:function(t,e){var n,i,o,r,s,a;if(null!=t&&null!=e)return i=(o=u(t))[0],n=o[1],a=(r=u(e))[0],s=r[1],c(i,a)&&c(n,s)}}),n=function(t){return"number"==typeof t?t:e(t)},c=function(t,e){return"number"==typeof t?t===e:i(t,e)}}.call(this),function(){var n,o,r,s,a,u;D.registerElement=function(t,e){var n,i;return null==e&&(e={}),t=t.toLowerCase(),e=a(e),(n=(i=s(e)).defaultCSS)&&(delete i.defaultCSS,o(n,t)),r(t,i)},o=function(t,e){return n(e).textContent=t.replace(/%t/g,e)},n=function(t){var e;return(e=document.createElement("style")).setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase()),document.head.insertBefore(e,document.head.firstChild),e},s=function(t){var e,n,i;for(e in n={},t)i=t[e],n[e]="function"==typeof i?{value:i}:i;return n},u=function(t){var e,n,i,o,r;for(e={},n=0,o=(r=["initialize","connect","disconnect"]).length;n<o;n++)e[i=r[n]]=t[i],delete t[i];return e},a=window.customElements?function(t){var e,n,i,o,r;return r=u(t),i=r.initialize,e=r.connect,n=r.disconnect,i&&(o=e,e=function(){return this.initialized||(this.initialized=!0,i.call(this)),null!=o?o.call(this):void 0}),e&&(t.connectedCallback=e),n&&(t.disconnectedCallback=n),t}:function(t){var e,n,i,o;return i=(o=u(t)).initialize,e=o.connect,n=o.disconnect,i&&(t.createdCallback=i),e&&(t.attachedCallback=e),n&&(t.detachedCallback=n),t},r=window.customElements?function(t,e){var n;return(n=function(){return Reflect.construct(HTMLElement,[],n)}).prototype=Object.create(HTMLElement.prototype,e),window.customElements.define(t,n),n}:function(t,e){var n,i;return i=Object.create(HTMLElement.prototype,e),n=document.registerElement(t,{prototype:i}),Object.defineProperty(i,"constructor",{value:n}),n}}.call(this),function(){var n,e;D.extend({getDOMSelection:function(){var t;return 0<(t=window.getSelection()).rangeCount?t:void 0},getDOMRange:function(){var t,e;return(t=null!=(e=D.getDOMSelection())?e.getRangeAt(0):void 0)&&!n(t)?t:void 0},setDOMRange:function(t){var e;return(e=window.getSelection()).removeAllRanges(),e.addRange(t),D.selectionChangeObserver.update()}}),n=function(t){return e(t.startContainer)||e(t.endContainer)},e=function(t){return!Object.getPrototypeOf(t)}}.call(this),function(){}.call(this),function(){var s,u=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;s=D.arraysAreEqual,D.Hash=function(t){function e(t){null==t&&(t={}),this.values=r(t),e.__super__.constructor.apply(this,arguments)}var a,r,n,i,o;return u(e,t),e.fromCommonAttributesOfObjects=function(t){var e,n,i,o,r,s;if(null==t&&(t=[]),!t.length)return new this;for(i=(e=a(t[0])).getKeys(),n=0,o=(s=t.slice(1)).length;n<o;n++)r=s[n],i=e.getKeysCommonToHash(a(r)),e=e.slice(i);return e},e.box=function(t){return a(t)},e.prototype.add=function(t,e){return this.merge(i(t,e))},e.prototype.remove=function(t){return new D.Hash(r(this.values,t))},e.prototype.get=function(t){return this.values[t]},e.prototype.has=function(t){return t in this.values},e.prototype.merge=function(t){return new D.Hash(n(this.values,o(t)))},e.prototype.slice=function(t){var e,n,i,o;for(o={},e=0,i=t.length;e<i;e++)n=t[e],this.has(n)&&(o[n]=this.values[n]);return new D.Hash(o)},e.prototype.getKeys=function(){return Object.keys(this.values)},e.prototype.getKeysCommonToHash=function(t){var e,n,i,o,r;for(t=a(t),r=[],e=0,i=(o=this.getKeys()).length;e<i;e++)n=o[e],this.values[n]===t.values[n]&&r.push(n);return r},e.prototype.isEqualTo=function(t){return s(this.toArray(),a(t).toArray())},e.prototype.isEmpty=function(){return 0===this.getKeys().length},e.prototype.toArray=function(){var e,n,i;return(null!=this.array?this.array:this.array=function(){var t;for(e in n=[],t=this.values)i=t[e],n.push(e,i);return n}.call(this)).slice(0)},e.prototype.toObject=function(){return r(this.values)},e.prototype.toJSON=function(){return this.toObject()},e.prototype.contentsForInspection=function(){return{values:JSON.stringify(this.values)}},i=function(t,e){var n;return(n={})[t]=e,n},n=function(t,e){var n,i,o;for(n in i=r(t),e)o=e[n],i[n]=o;return i},r=function(t,e){var n,i,o,r,s;for(r={},n=0,o=(s=Object.keys(t).sort()).length;n<o;n++)(i=s[n])!==e&&(r[i]=t[i]);return r},a=function(t){return t instanceof D.Hash?t:new D.Hash(t)},o=function(t){return t instanceof D.Hash?t.values:t},e}(D.Object)}.call(this),function(){D.ObjectGroup=function(){function t(t,e){var n,i;this.objects=null!=t?t:[],i=e.depth,(n=e.asTree)&&(this.depth=i,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}return t.groupObjects=function(t,e){var n,i,o,r,s,a,u,c,l;for(null==t&&(t=[]),o=(l=null!=e?e:{}).depth,(n=l.asTree)&&null==o&&(o=0),c=[],s=0,a=t.length;s<a;s++){if(u=t[s],r){if(("function"==typeof u.canBeGrouped?u.canBeGrouped(o):void 0)&&("function"==typeof(i=r[r.length-1]).canBeGroupedWith?i.canBeGroupedWith(u,o):void 0)){r.push(u);continue}c.push(new this(r,{depth:o,asTree:n})),r=null}("function"==typeof u.canBeGrouped?u.canBeGrouped(o):void 0)?r=[u]:c.push(u)}return r&&c.push(new this(r,{depth:o,asTree:n})),c},t.prototype.getObjects=function(){return this.objects},t.prototype.getDepth=function(){return this.depth},t.prototype.getCacheKey=function(){var t,e,n,i,o;for(e=["objectGroup"],t=0,n=(o=this.getObjects()).length;t<n;t++)i=o[t],e.push(i.getCacheKey());return e.join("/")},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.ObjectMap=function(t){function e(t){var e,n,i,o,r;for(null==t&&(t=[]),this.objects={},i=0,o=t.length;i<o;i++)r=t[i],n=JSON.stringify(r),null==(e=this.objects)[n]&&(e[n]=r)}return n(e,t),e.prototype.find=function(t){var e;return e=JSON.stringify(t),this.objects[e]},e}(D.BasicObject)}.call(this),function(){D.ElementStore=function(){function t(t){this.reset(t)}var i;return t.prototype.add=function(t){var e;return e=i(t),this.elements[e]=t},t.prototype.remove=function(t){var e,n;return e=i(t),(n=this.elements[e])?(delete this.elements[e],n):void 0},t.prototype.reset=function(t){var e,n,i;for(null==t&&(t=[]),this.elements={},n=0,i=t.length;n<i;n++)e=t[n],this.add(e);return t},i=function(t){return t.dataset.trixStoreKey},t}()}.call(this),function(){}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.Operation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.isPerforming=function(){return!0===this.performing},e.prototype.hasPerformed=function(){return!0===this.performed},e.prototype.hasSucceeded=function(){return this.performed&&this.succeeded},e.prototype.hasFailed=function(){return this.performed&&!this.succeeded},e.prototype.getPromise=function(){return null!=this.promise?this.promise:this.promise=new Promise((o=this,function(n,i){return o.performing=!0,o.perform(function(t,e){return o.succeeded=t,o.performing=!1,o.performed=!0,o.succeeded?n(e):i(e)})}));var o},e.prototype.perform=function(t){return t(!1)},e.prototype.release=function(){var t;return null!=(t=this.promise)&&"function"==typeof t.cancel&&t.cancel(),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null},e.proxyMethod("getPromise().then"),e.proxyMethod("getPromise().catch"),e}(D.BasicObject)}.call(this),function(){var t,e,n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;D.UTF16String=function(t){function e(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return r(e,t),e.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},e.fromUCS2String=function(t){return new this(t,i(t))},e.fromCodepoints=function(t){return new this(o(t),t)},e.prototype.offsetToUCS2Offset=function(t){return o(this.codepoints.slice(0,Math.max(0,t))).length},e.prototype.offsetFromUCS2Offset=function(t){return i(this.ucs2String.slice(0,Math.max(0,t))).length},e.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},e.prototype.charAt=function(t){return this.slice(t,t+1)},e.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},e.prototype.toJSON=function(){return this.ucs2String},e.prototype.getCacheKey=function(){return this.ucs2String},e.prototype.toString=function(){return this.ucs2String},e}(D.BasicObject),t=1===("function"==typeof Array.from?Array.from("\ud83d\udc7c").length:void 0),e=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),n=" \ud83d\udc7c"===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),i=t&&e?function(t){return Array.from(t).map(function(t){return t.codePointAt(0)})}:function(t){var e,n,i,o,r;for(o=[],e=0,i=t.length;e<i;)55296<=(r=t.charCodeAt(e++))&&r<=56319&&e<i&&(56320==(64512&(n=t.charCodeAt(e++)))?r=((1023&r)<<10)+(1023&n)+65536:e--),o.push(r);return o},o=n?function(t){return String.fromCodePoint.apply(String,t)}:function(i){var o,r;return function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],o="",65535<r&&(r-=65536,o+=String.fromCharCode(r>>>10&1023|55296),r=56320|1023&r),n.push(o+String.fromCharCode(r));return n}().join("")}}.call(this),function(){}.call(this),function(){}.call(this),function(){D.config.lang={bold:"Bold",bullets:"Bullets","byte":"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"}}.call(this),function(){D.config.css={attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"}}.call(this),function(){var e;D.config.blockAttributes=e={"default":{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test:function(t){return D.tagName(t.parentNode)===e[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test:function(t){return D.tagName(t.parentNode)===e[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}}}.call(this),function(){var i,o;i=D.config.lang,o=[i.bytes,i.KB,i.MB,i.GB,i.TB,i.PB],D.config.fileSize={prefix:"IEC",precision:2,formatter:function(t){var e,n;switch(t){case 0:return"0 "+i.bytes;case 1:return"1 "+i["byte"];default:return e=function(){switch(this.prefix){case"SI":return 1e3;case"IEC":return 1024}}.call(this),n=Math.floor(Math.log(t)/Math.log(e)),(t/Math.pow(e,n)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"")+" "+o[n]}}}}.call(this),function(){D.config.textAttributes={bold:{tagName:"strong",inheritable:!0,parser:function(t){var e;return"bold"===(e=window.getComputedStyle(t)).fontWeight||600<=e.fontWeight}},italic:{tagName:"em",inheritable:!0,parser:function(t){return"italic"===window.getComputedStyle(t).fontStyle}},href:{groupTagName:"a",parser:function(t){var e,n;return n="a:not("+D.AttachmentView.attachmentSelector+")",(e=D.findClosestElementFromNode(t,{matchingSelector:n}))?e.getAttribute("href"):void 0}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}}}.call(this),function(){var b,w,x,A,C;C="[data-trix-serialize=false]",A=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],x="["+(w="data-trix-serialized-attributes")+"]",b=new RegExp("<!--block-->","g"),D.extend({serializers:{"application/json":function(t){var e;if(t instanceof D.Document)e=t;else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");e=D.Document.fromHTML(t.innerHTML)}return e.toSerializableDocument().toJSONString()},"text/html":function(t){var e,n,i,o,r,s,a,u,c,l,h,p,d,f,m,g,y;if(t instanceof D.Document)o=D.DocumentView.render(t);else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");o=t.cloneNode(!0)}for(r=0,c=(f=o.querySelectorAll(C)).length;r<c;r++)i=f[r],D.removeNode(i);for(s=0,l=A.length;s<l;s++)for(e=A[s],a=0,h=(m=o.querySelectorAll("["+e+"]")).length;a<h;a++)(i=m[a]).removeAttribute(e);for(u=0,p=(g=o.querySelectorAll(x)).length;u<p;u++){i=g[u];try{for(d in n=JSON.parse(i.getAttribute(w)),i.removeAttribute(w),n)y=n[d],i.setAttribute(d,y)}catch(v){}}return o.innerHTML.replace(b,"")}},deserializers:{"application/json":function(t){return D.Document.fromJSONString(t)},"text/html":function(t){return D.Document.fromHTML(t)}},serializeToContentType:function(t,e){var n;if(n=D.serializers[e])return n(t);throw new Error("unknown content type: "+e)},deserializeFromContentType:function(t,e){var n;if(n=D.deserializers[e])return n(t);throw new Error("unknown content type: "+e)}})}.call(this),function(){var t;t=D.config.lang,D.config.toolbar={getDefaultHTML:function(){return'<div class="trix-button-row">\n  <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="'+t.bold+'" tabindex="-1">'+t.bold+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="'+t.italic+'" tabindex="-1">'+t.italic+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="'+t.strike+'" tabindex="-1">'+t.strike+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'+t.link+'" tabindex="-1">'+t.link+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="'+t.heading1+'" tabindex="-1">'+t.heading1+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="'+t.quote+'" tabindex="-1">'+t.quote+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="'+t.code+'" tabindex="-1">'+t.code+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="'+t.bullets+'" tabindex="-1">'+t.bullets+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="'+t.numbers+'" tabindex="-1">'+t.numbers+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="'+t.outdent+'" tabindex="-1">'+t.outdent+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="'+t.indent+'" tabindex="-1">'+t.indent+'</button>\n  </span>\n\n  <span class="trix-button-group-spacer"></span>\n\n  <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="'+t.undo+'" tabindex="-1">'+t.undo+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="'+t.redo+'" tabindex="-1">'+t.redo+'</button>\n  </span>\n</div>\n\n<div class="trix-dialogs" data-trix-dialogs>\n  <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">\n    <div class="trix-dialog__link-fields">\n      <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="'+t.urlPlaceholder+'" aria-label="'+t.url+'" required data-trix-input>\n      <div class="trix-button-group">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.link+'" data-trix-method="setAttribute">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.unlink+'" data-trix-method="removeAttribute">\n      </div>\n    </div>\n  </div>\n</div>'}}}.call(this),function(){D.config.undoInterval=5e3}.call(this),function(){D.config.attachments={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}}}.call(this),function(){}.call(this),function(){D.registerElement("trix-toolbar",{defaultCSS:"%t {\n  display: block;\n}\n\n%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}",initialize:function(){return""===this.innerHTML?this.innerHTML=D.config.toolbar.getDefaultHTML():void 0}})}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};D.ObjectView=function(t){function e(t,e){this.object=t,this.options=null!=e?e:{},this.childViews=[],this.rootView=this}return n(e,t),e.prototype.getNodes=function(){var t,e,n,i,o;for(null==this.nodes&&(this.nodes=this.createNodes()),o=[],t=0,e=(i=this.nodes).length;t<e;t++)n=i[t],o.push(n.cloneNode(!0));return o},e.prototype.invalidate=function(){var t;return(this.nodes=null)!=(t=this.parentView)?t.invalidate():void 0},e.prototype.invalidateViewForObject=function(t){var e;return null!=(e=this.findViewForObject(t))?e.invalidate():void 0},e.prototype.findOrCreateCachedChildView=function(t,e){var n;return(n=this.getCachedViewForObject(e))?this.recordChildView(n):(n=this.createChildView.apply(this,arguments),this.cacheViewForObject(n,e)),n},e.prototype.createChildView=function(t,e,n){var i;return null==n&&(n={}),e instanceof D.ObjectGroup&&(n.viewClass=t,t=D.ObjectGroupView),i=new t(e,n),this.recordChildView(i)},e.prototype.recordChildView=function(t){return t.parentView=this,t.rootView=this.rootView,s.call(this.childViews,t)<0&&this.childViews.push(t),t},e.prototype.getAllChildViews=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.childViews).length;e<n;e++)t=i[e],o.push(t),o=o.concat(t.getAllChildViews());return o},e.prototype.findElement=function(){return this.findElementForObject(this.object)},e.prototype.findElementForObject=function(t){var e;return(e=null!=t?t.id:void 0)?this.rootView.element.querySelector("[data-trix-id='"+e+"']"):void 0},e.prototype.findViewForObject=function(t){var e,n,i,o;for(e=0,n=(i=this.getAllChildViews()).length;e<n;e++)if((o=i[e]).object===t)return o},e.prototype.getViewCache=function(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?null!=this.viewCache?this.viewCache:this.viewCache={}:void 0},e.prototype.isViewCachingEnabled=function(){return!1!==this.shouldCacheViews},e.prototype.enableViewCaching=function(){return this.shouldCacheViews=!0},e.prototype.disableViewCaching=function(){return this.shouldCacheViews=!1},e.prototype.getCachedViewForObject=function(t){var e;return null!=(e=this.getViewCache())?e[t.getCacheKey()]:void 0},e.prototype.cacheViewForObject=function(t,e){var n;return null!=(n=this.getViewCache())?n[e.getCacheKey()]=t:void 0},e.prototype.garbageCollectCachedViews=function(){var t,e,n,i,o,r;if(t=this.getViewCache()){for(e in r=this.getAllChildViews().concat(this),n=function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)o=r[t],n.push(o.object.getCacheKey());return n}(),i=[],t)s.call(n,e)<0&&i.push(delete t[e]);return i}},e}(D.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.ObjectGroupView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}return n(e,t),e.prototype.getChildViews=function(){var t,e,n,i;if(!this.childViews.length)for(t=0,e=(i=this.objectGroup.getObjects()).length;t<e;t++)n=i[t],this.findOrCreateCachedChildView(this.viewClass,n,this.options);return this.childViews},e.prototype.createNodes=function(){var t,e,n,i,o,r,s,a;for(t=this.createContainerElement(),e=0,i=(s=this.getChildViews()).length;e<i;e++)for(n=0,o=(a=s[e].getNodes()).length;n<o;n++)r=a[n],t.appendChild(r);return[t]},e.prototype.createContainerElement=function(t){return null==t&&(t=this.objectGroup.getDepth()),this.getChildViews()[0].createContainerElement(t)},e}(D.ObjectView)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.Controller=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(D.BasicObject)}.call(this),function(){var r,h,s,p,u,a,c=function(t,e){return function(){return t.apply(e,arguments)}},d=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=D.findClosestElementFromNode,s=D.nodeIsEmptyTextNode,h=D.nodeIsBlockStartComment,p=D.normalizeSpaces,u=D.summarizeStringChange,a=D.tagName,D.MutationObserver=function(t){function e(t){this.element=t,this.didMutate=c(this.didMutate,this),this.observer=new window.MutationObserver(this.didMutate),this.start()}var l,n,i,o;return d(e,t),i="["+(n="data-trix-mutable")+"]",o={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},e.prototype.start=function(){return this.reset(),this.observer.observe(this.element,o)},e.prototype.stop=function(){return this.observer.disconnect()},e.prototype.didMutate=function(t){var e,n;return(e=this.mutations).push.apply(e,this.findSignificantMutations(t)),this.mutations.length?(null!=(n=this.delegate)&&"function"==typeof n.elementDidMutate&&n.elementDidMutate(this.getMutationSummary()),this.reset()):void 0},e.prototype.reset=function(){return this.mutations=[]},e.prototype.findSignificantMutations=function(t){var e,n,i,o;for(o=[],e=0,n=t.length;e<n;e++)i=t[e],this.mutationIsSignificant(i)&&o.push(i);return o},e.prototype.mutationIsSignificant=function(t){var e,n,i,o;if(this.nodeIsMutable(t.target))return!1;for(e=0,n=(o=this.nodesModifiedByMutation(t)).length;e<n;e++)if(i=o[e],this.nodeIsSignificant(i))return!0;return!1},e.prototype.nodeIsSignificant=function(t){return t!==this.element&&!this.nodeIsMutable(t)&&!s(t)},e.prototype.nodeIsMutable=function(t){return r(t,{matchingSelector:i})},
e.prototype.nodesModifiedByMutation=function(t){var e;switch(e=[],t.type){case"attributes":t.attributeName!==n&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}return e},e.prototype.getMutationSummary=function(){return this.getTextMutationSummary()},e.prototype.getTextMutationSummary=function(){var t,e,n,i,o,r,s,a,u,c,l;for(n=(a=this.getTextChangesFromCharacterData()).additions,o=a.deletions,r=0,s=(u=(l=this.getTextChangesFromChildList()).additions).length;r<s;r++)e=u[r],f.call(n,e)<0&&n.push(e);return o.push.apply(o,l.deletions),c={},(t=n.join(""))&&(c.textAdded=t),(i=o.join(""))&&(c.textDeleted=i),c},e.prototype.getMutationsByType=function(t){var e,n,i,o,r;for(r=[],e=0,n=(o=this.mutations).length;e<n;e++)(i=o[e]).type===t&&r.push(i);return r},e.prototype.getTextChangesFromChildList=function(){var t,e,i,n,o,r,s,a,u,c;for(t=[],s=[],e=0,n=(r=this.getMutationsByType("childList")).length;e<n;e++)o=r[e],t.push.apply(t,o.addedNodes),s.push.apply(s,o.removedNodes);return 0===t.length&&1===s.length&&h(s[0])?(u=[],c=["\n"]):(u=l(t),c=l(s)),{additions:function(){var t,e,n;for(n=[],i=t=0,e=u.length;t<e;i=++t)(a=u[i])!==c[i]&&n.push(p(a));return n}(),deletions:function(){var t,e,n;for(n=[],i=t=0,e=c.length;t<e;i=++t)(a=c[i])!==u[i]&&n.push(p(a));return n}()}},e.prototype.getTextChangesFromCharacterData=function(){var t,e,n,i,o,r,s,a;return(e=this.getMutationsByType("characterData")).length&&(a=e[0],n=e[e.length-1],o=p(a.oldValue),i=p(n.target.data),t=(r=u(o,i)).added,s=r.removed),{additions:t?[t]:[],deletions:s?[s]:[]}},l=function(t){var e,n,i,o;for(null==t&&(t=[]),o=[],e=0,n=t.length;e<n;e++)switch(i=t[e],i.nodeType){case Node.TEXT_NODE:o.push(i.data);break;case Node.ELEMENT_NODE:"br"===a(i)?o.push("\n"):o.push.apply(o,l(i.childNodes))}return o},e}(D.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.FileVerificationOperation=function(t){function e(t){this.file=t}return n(e,t),e.prototype.perform=function(e){var n,i;return(n=new FileReader).onerror=function(){return e(!1)},n.onload=(i=this,function(){n.onerror=null;try{n.abort()}catch(t){}return e(!0,i.file)}),n.readAsArrayBuffer(this.file)},e}(D.Operation)}.call(this),function(){var n,i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=D.browser,D.CompositionInput=function(t){function e(t){var e;this.inputController=t,e=this.inputController,this.responder=e.responder,this.delegate=e.delegate,this.inputSummary=e.inputSummary,this.data={}}return i(e,t),e.prototype.start=function(t){var e,n;return this.data.start=t,this.isSignificant()?("keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&null!=(e=this.responder)&&e.deleteInDirection("left"),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null!=(n=this.responder)?n.getSelectedRange():void 0):void 0},e.prototype.update=function(t){var e;return this.data.update=t,this.isSignificant()&&(e=this.selectPlaceholder())?(this.forgetPlaceholder(),this.range=e):void 0},e.prototype.end=function(t){var e,n,i,o;return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.setSelectedRange(this.range),null!=(i=this.responder)&&i.insertString(this.data.end),null!=(o=this.responder)?o.setSelectedRange(this.range[0]+this.data.end.length):void 0):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset()},e.prototype.getEndData=function(){return this.data.end},e.prototype.isEnded=function(){return null!=this.getEndData()},e.prototype.isSignificant=function(){return!n.composesExistingText||this.inputSummary.didInput},e.prototype.canApplyToDocument=function(){var t,e;return 0===(null!=(t=this.data.start)?t.length:void 0)&&0<(null!=(e=this.data.end)?e.length:void 0)&&null!=this.range},e.proxyMethod("inputController.setInputSummary"),e.proxyMethod("inputController.requestRender"),e.proxyMethod("inputController.requestReparse"),e.proxyMethod("responder?.selectionIsExpanded"),e.proxyMethod("responder?.insertPlaceholder"),e.proxyMethod("responder?.selectPlaceholder"),e.proxyMethod("responder?.forgetPlaceholder"),e}(D.BasicObject)}.call(this),function(){var S,i,k,n,o,r,l,s,a,u,T,c,h,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty,L=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};n=D.handleEvent,a=D.makeElement,r=D.innerElementIsActive,u=D.objectsAreEqual,D.tagName,s={8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},D.InputController=function(t){function e(t){var e;for(e in this.element=t,this.resetInputSummary(),this.mutationObserver=new D.MutationObserver(this.element),(this.mutationObserver.delegate=this).events)n(e,{onElement:this.element,withCallback:this.handlerFor(e)})}var E;return p(e,t),E=0,e.keyNames=s,e.prototype.handlerFor=function(e){return n=this,function(t){return t.defaultPrevented?void 0:n.handleInput(function(){return r(this.element)?void 0:(this.eventName=e,this.events[e].call(this,t))})};var n},e.prototype.setInputSummary=function(t){var e,n;for(e in null==t&&(t={}),this.inputSummary.eventName=this.eventName,t)n=t[e],this.inputSummary[e]=n;return this.inputSummary},e.prototype.resetInputSummary=function(){return this.inputSummary={}},e.prototype.reset=function(){return this.resetInputSummary(),D.selectionChangeObserver.reset()},e.prototype.editorWillSyncDocumentView=function(){return this.mutationObserver.stop()},e.prototype.editorDidSyncDocumentView=function(){return this.mutationObserver.start()},e.prototype.requestRender=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():void 0},e.prototype.requestReparse=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestReparse&&t.inputControllerDidRequestReparse(),this.requestRender()},e.prototype.elementDidMutate=function(t){var e;return this.isComposing()?null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():void 0:this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})},e.prototype.mutationIsExpected=function(t){var e,n,i,o,r,s,a,u,c;return s=t.textAdded,a=t.textDeleted,!!this.inputSummary.preferDocument||(e=null!=s?s===this.inputSummary.textAdded:!this.inputSummary.textAdded,n=null!=a?this.inputSummary.didDelete:!this.inputSummary.didDelete,c="\n"===a&&!n,!!(((u=("\n"===s||" \n"===s)&&!e)&&!c||c&&!u)&&(o=this.getSelectedRange())&&(i=u?s.replace(/\n$/,"").length||-1:(null!=s?s.length:void 0)||1,null!=(r=this.responder)?r.positionIsBlockBreak(o[1]+i):void 0))||e&&n)},e.prototype.mutationIsSignificant=function(t){var e,n,i;return i=0<Object.keys(t).length,e=""===(null!=(n=this.compositionInput)?n.getEndData():void 0),i||!e},e.prototype.attachFiles=function(i){var o,t,e;return t=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(new D.FileVerificationOperation(o));return n}(),Promise.all(t).then((e=this,function(n){return e.handleInput(function(){var t,e;return null!=(t=this.delegate)&&t.inputControllerWillAttachFiles(),null!=(e=this.responder)&&e.insertFiles(n),this.requestRender()})}))},e.prototype.events={keydown:function(o){var t,e,n,i,r,s,a,u,c;if(this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0,i=this.constructor.keyNames[o.keyCode]){for(e=this.keys,n=0,s=(u=["ctrl","alt","shift","meta"]).length;n<s;n++)a=u[n],o[a+"Key"]&&("ctrl"===a&&(a="control"),e=null!=e?e[a]:void 0);null!=(null!=e?e[i]:void 0)&&(this.setInputSummary({keyName:i}),D.selectionChangeObserver.reset(),e[i].call(this,o))}return l(o)&&(t=String.fromCharCode(o.keyCode).toLowerCase())&&((r=function(){var t,e,n,i;for(i=[],t=0,e=(n=["alt","shift"]).length;t<e;t++)a=n[t],o[a+"Key"]&&i.push(a);return i}()).push(t),null!=(c=this.delegate)?c.inputControllerDidReceiveKeyboardCommand(r):void 0)?o.preventDefault():void 0},keypress:function(t){var e,n,i;if(null==this.inputSummary.eventName&&!t.metaKey&&(!t.ctrlKey||t.altKey))return(i=c(t))?(null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString(i),this.setInputSummary({textAdded:i,didDelete:this.selectionIsExpanded()})):void 0},textInput:function(t){var e,n,i,o;return e=t.data,(o=this.inputSummary.textAdded)&&o!==e&&o.toUpperCase()===e?(n=this.getSelectedRange(),this.setSelectedRange([n[0],n[1]+o.length]),null!=(i=this.responder)&&i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)):void 0},dragenter:function(t){return t.preventDefault()},dragstart:function(t){var e;return t.target,this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():void 0},dragover:function(t){var e,n;return!this.draggedRange&&!this.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={x:t.clientX,y:t.clientY},u(e,this.draggingPoint))?void 0:(this.draggingPoint=e,null!=(n=this.delegate)&&"function"==typeof n.inputControllerDidReceiveDragOverPoint?n.inputControllerDidReceiveDragOverPoint(this.draggingPoint):void 0)},dragend:function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidCancelDrag&&t.inputControllerDidCancelDrag(),this.draggedRange=null,this.draggingPoint=null},drop:function(t){var e,n,i,o,r,s,a,u,c;return t.preventDefault(),i=null!=(r=t.dataTransfer)?r.files:void 0,o={x:t.clientX,y:t.clientY},null!=(s=this.responder)&&s.setLocationRangeFromPointRange(o),(null!=i?i.length:void 0)?this.attachFiles(i):this.draggedRange?(null!=(a=this.delegate)&&a.inputControllerWillMoveText(),null!=(u=this.responder)&&u.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()):(n=t.dataTransfer.getData("application/x-trix-document"))&&(e=D.Document.fromJSONString(n),null!=(c=this.responder)&&c.insertDocument(e),this.requestRender()),this.draggedRange=null,this.draggingPoint=null},cut:function(t){var e,n;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&(this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null!=(n=this.delegate)&&n.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented)?this.requestRender():void 0},copy:function(t){var e;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&this.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():void 0},paste:function(t){var e,n,i,o,r,s,a,u,c,l,h,p,d,f,m,g,y,v,b,w,x,A,C;return e=null!=(u=t.clipboardData)?u:t.testClipboardData,a={clipboard:e},null==e||T(t)?void this.getPastedHTMLUsingHiddenElement((C=this,function(t){var e,n,i;return a.type="text/html",a.html=t,null!=(e=C.delegate)&&e.inputControllerWillPaste(a),null!=(n=C.responder)&&n.insertHTML(a.html),C.requestRender(),null!=(i=C.delegate)?i.inputControllerDidPaste(a):void 0})):((o=e.getData("URL"))?(a.type="URL",a.href=o,a.string=(s=e.getData("public.url-name"))?D.squishBreakableWhitespace(s).trim():o,null!=(c=this.delegate)&&c.inputControllerWillPaste(a),this.setInputSummary({textAdded:a.string,didDelete:this.selectionIsExpanded()}),null!=(m=this.responder)&&m.insertText(D.Text.textForStringWithAttributes(a.string,{href:a.href})),this.requestRender(),null!=(g=this.delegate)&&g.inputControllerDidPaste(a)):S(e)?(a.type="text/plain",a.string=e.getData("text/plain"),null!=(y=this.delegate)&&y.inputControllerWillPaste(a),this.setInputSummary({textAdded:a.string,didDelete:this.selectionIsExpanded()}),null!=(v=this.responder)&&v.insertString(a.string),this.requestRender(),null!=(b=this.delegate)&&b.inputControllerDidPaste(a)):(r=e.getData("text/html"))?(a.type="text/html",a.html=r,null!=(w=this.delegate)&&w.inputControllerWillPaste(a),null!=(x=this.responder)&&x.insertHTML(a.html),this.requestRender(),null!=(A=this.delegate)&&A.inputControllerDidPaste(a)):0<=L.call(e.types,"Files")&&(i=null!=(l=e.items)&&null!=(h=l[0])&&"function"==typeof h.getAsFile?h.getAsFile():void 0)&&(!i.name&&(n=k(i))&&(i.name="pasted-file-"+ ++E+"."+n),a.type="File",a.file=i,null!=(p=this.delegate)&&p.inputControllerWillAttachFiles(),null!=(d=this.responder)&&d.insertFile(a.file),this.requestRender(),null!=(f=this.delegate)&&f.inputControllerDidPaste(a)),t.preventDefault())},compositionstart:function(t){return this.getCompositionInput().start(t.data)},compositionupdate:function(t){return this.getCompositionInput().update(t.data)},compositionend:function(t){return this.getCompositionInput().end(t.data)},beforeinput:function(){return this.inputSummary.didInput=!0},input:function(t){return this.inputSummary.didInput=!0,t.stopPropagation()}},e.prototype.keys={backspace:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},"delete":function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},"return":function(){var t,e;return this.setInputSummary({preferDocument:!0}),null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),null!=(e=this.responder)?e.insertLineBreak():void 0},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canIncreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.increaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},right:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},control:{d:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o:function(t){var e,n;return t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{"return":function(t){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n"),this.requestRender(),t.preventDefault()},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canDecreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.decreaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("backward")):void 0},right:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("forward")):void 0}},alt:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}},meta:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}}},e.prototype.handleInput=function(t){var e,n;try{return null!=(e=this.delegate)&&e.inputControllerWillHandleInput(),t.call(this)}finally{null!=(n=this.delegate)&&n.inputControllerDidHandleInput()}},e.prototype.getCompositionInput=function(){return this.isComposing()?this.compositionInput:this.compositionInput=new D.CompositionInput(this)},e.prototype.isComposing=function(){return null!=this.compositionInput&&!this.compositionInput.isEnded()},e.prototype.deleteInDirection=function(t,e){var n;return!1!==(null!=(n=this.responder)?n.deleteInDirection(t):void 0)?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0},e.prototype.serializeSelectionToDataTransfer=function(t){var e,n;if(i(t))return e=null!=(n=this.responder)?n.getSelectedDocument().toSerializableDocument():void 0,t.setData("application/x-trix-document",JSON.stringify(e)),t.setData("text/html",D.DocumentView.render(e).innerHTML),t.setData("text/plain",e.toString().replace(/\n$/,"")),!0},e.prototype.canAcceptDataTransfer=function(t){var e,n,i,o,r;for(r={},e=0,n=(o=null!=(i=null!=t?t.types:void 0)?i:[]).length;e<n;e++)r[o[e]]=!0;return r.Files||r["application/x-trix-document"]||r["text/html"]||r["text/plain"]},e.prototype.getPastedHTMLUsingHiddenElement=function(e){var n,i,t,o;return i=this.getSelectedRange(),t={position:"absolute",left:window.pageXOffset+"px",top:window.pageYOffset+"px",opacity:0},n=a({style:t,tagName:"div",editable:!0}),document.body.appendChild(n),n.focus(),requestAnimationFrame((o=this,function(){var t;return t=n.innerHTML,D.removeNode(n),o.setSelectedRange(i),e(t)}))},e.proxyMethod("responder?.getSelectedRange"),e.proxyMethod("responder?.setSelectedRange"),e.proxyMethod("responder?.expandSelectionInDirection"),e.proxyMethod("responder?.selectionIsInCursorTarget"),e.proxyMethod("responder?.selectionIsExpanded"),e}(D.BasicObject),k=function(t){var e,n;return null!=(e=t.type)&&null!=(n=e.match(/\/(\w+)$/))?n[1]:void 0},o=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),c=function(t){var e;return t.key&&o&&t.key.codePointAt(0)===t.keyCode?t.key:(null===t.which?e=t.keyCode:0!==t.which&&0!==t.charCode&&(e=t.charCode),null!=e&&"escape"!==s[e]?D.UTF16String.fromCodepoints([e]).toString():void 0)},l=/Mac|^iP/.test(navigator.platform)?function(t){return t.metaKey}:function(t){return t.ctrlKey},T=function(t){var e,n,i,o,r,s,a,u,c;if(a=t.clipboardData){if(0<=L.call(a.types,"text/html")){for(i=0,s=(u=a.types).length;i<s;i++)if(c=u[i],e=/^CorePasteboardFlavorType/.test(c),n=/^dyn\./.test(c)&&a.getData(c),e||n)return!0;return!1}return o=0<=L.call(a.types,"com.apple.webarchive"),r=0<=L.call(a.types,"com.apple.flat-rtfd"),o||r}},S=function(t){var e,n,i;return i=t.getData("text/plain"),n=t.getData("text/html"),i&&n?((e=a("div")).innerHTML=n,e.textContent===i?!e.querySelector(":not(meta)"):void 0):null!=i?i.length:void 0},h={"application/x-trix-feature-detection":"test"},i=function(t){var e,n;if(null!=(null!=t?t.setData:void 0)){for(e in h)if(n=h[e],!function(){try{return t.setData(e,n),t.getData(e)===n}catch(k){}}())return;return!0}}}.call(this),function(){var s,a,o,u,i,c,l,t,r,h=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;a=D.defer,o=D.escapeHTML,u=D.handleEvent,l=D.makeElement,r=D.tagName,i=D.InputController.keyNames,t=D.config,c=t.lang,s=t.css,D.AttachmentEditorController=function(t){function e(t,e,n,i){this.attachmentPiece=t,this.element=e,this.container=n,this.options=null!=i?i:{},this.didBlurCaption=h(this.didBlurCaption,this),this.didChangeCaption=h(this.didChangeCaption,this),this.didInputCaption=h(this.didInputCaption,this),this.didKeyDownCaption=h(this.didKeyDownCaption,this),this.didClickActionButton=h(this.didClickActionButton,this),this.didClickToolbar=h(this.didClickToolbar,this),this.attachment=this.attachmentPiece.attachment,"a"===r(this.element)&&(this.element=this.element.firstChild),this.install()}var n;return p(e,t),n=function(e){return function(){var t;return(t=e.apply(this,arguments))["do"](),null==this.undos&&(this.undos=[]),this.undos.push(t.undo)}},e.prototype.install=function(){return this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()?this.installCaptionEditor():void 0},e.prototype.uninstall=function(){var t,e;for(this.savePendingCaption();e=this.undos.pop();)e();return null!=(t=this.delegate)?t.didUninstallAttachmentEditor(this):void 0},e.prototype.savePendingCaption=function(){var t,e,n;return null!=this.pendingCaption?(t=this.pendingCaption,this.pendingCaption=null,t?null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestUpdatingAttributesForAttachment?e.attachmentEditorDidRequestUpdatingAttributesForAttachment({caption:t},this.attachment):void 0:null!=(n=this.delegate)&&"function"==typeof n.attachmentEditorDidRequestRemovingAttributeForAttachment?n.attachmentEditorDidRequestRemovingAttributeForAttachment("caption",this.attachment):void 0):void 0},e.prototype.makeElementMutable=n(function(){return{"do":(e=this,function(){return e.element.dataset.trixMutable=!0}),undo:(t=this,function(){return delete t.element.dataset.trixMutable})};var t,e}),e.prototype.addToolbar=n(function(){var t,e,n,i;return(t=l({tagName:"div",className:s.attachmentToolbar,data:{trixMutable:!0}})).innerHTML='<div class="trix-button-row">\n  <span class="trix-button-group trix-button-group--actions">\n    <button type="button" data-trix-action="remove" class="trix-button trix-button--remove" title="'+c.remove+'">'+c.remove+"</button>\n  </span>\n</div>",this.attachment.isPreviewable()&&(e=o(this.attachment.getFilename()),n=o(this.attachment.getFormattedFilesize()),t.innerHTML+='<div class="'+s.attachmentMetadataContainer+'">\n  <span class="'+s.attachmentMetadata+'">\n    <span class="'+s.attachmentName+'" title="'+e+'">'+e+'</span>\n    <span class="'+s.attachmentSize+'">'+n+"</span>\n  </span>\n</div>"),u("click",{onElement:t,withCallback:this.didClickToolbar}),u("click",{onElement:t,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),{"do":(i=this,function(){return i.element.appendChild(t)}),undo:function(){return D.removeNode(t)}}}),e.prototype.installCaptionEditor=n(function(){var t,e,n,i,o,r;return(i=l({tagName:"textarea",className:s.attachmentCaptionEditor,attributes:{placeholder:c.captionPlaceholder},data:{trixMutable:!0}})).value=this.attachmentPiece.getCaption(),(o=i.cloneNode()).classList.add("trix-autoresize-clone"),o.tabIndex=-1,t=function(){return o.value=i.value,i.style.height=o.scrollHeight+"px"},u("input",{onElement:i,withCallback:t}),u("input",{onElement:i,withCallback:this.didInputCaption}),u("keydown",{onElement:i,withCallback:this.didKeyDownCaption}),u("change",{onElement:i,withCallback:this.didChangeCaption}),u("blur",{onElement:i,withCallback:this.didBlurCaption}),n=this.element.querySelector("figcaption"),e=n.cloneNode(),{"do":(r=this,function(){return n.style.display="none",e.appendChild(i),e.appendChild(o),e.classList.add(s.attachmentCaption+"--editing"),n.parentElement.insertBefore(e,n),t(),r.options.editCaption?a(function(){return i.focus()}):void 0}),undo:function(){return D.removeNode(e),n.style.display=null}}}),e.prototype.didClickToolbar=function(t){return t.preventDefault(),t.stopPropagation()},e.prototype.didClickActionButton=function(t){var e;switch(t.target.getAttribute("data-trix-action")){case"remove":return null!=(e=this.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment):void 0}},e.prototype.didKeyDownCaption=function(t){var e;return"return"===i[t.keyCode]?(t.preventDefault(),this.savePendingCaption(),null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(this.attachment):void 0):void 0},e.prototype.didInputCaption=function(t){return this.pendingCaption=t.target.value.replace(/\s/g," ").trim()},e.prototype.didChangeCaption=function(){return this.savePendingCaption()},e.prototype.didBlurCaption=function(){return this.savePendingCaption()},e}(D.BasicObject)}.call(this),function(){var u,n,c,i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;c=D.makeElement,u=D.config.css,D.AttachmentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.attachment=this.object,(this.attachment.uploadProgressDelegate=this).attachmentPiece=this.options.piece}var a;return i(e,t),e.attachmentSelector="[data-trix-attachment]",e.prototype.createContentNodes=function(){return[]},e.prototype.createNodes=function(){var t,e,n,i,o,r,s;if(t=i=c({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),(e=this.getHref())&&(i=c({tagName:"a",editable:!1,attributes:{href:e,tabindex:-1}}),t.appendChild(i)),this.attachment.hasContent())i.innerHTML=this.attachment.getContent();else for(n=0,o=(s=this.createContentNodes()).length;n<o;n++)r=s[n],i.appendChild(r);return i.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=c({tagName:"progress",attributes:{"class":u.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),t.appendChild(this.progressElement)),[a("left"),t,a("right")]},e.prototype.createCaptionElement=function(){var t,e,n,i,o,r,s;return n=c({tagName:"figcaption",className:u.attachmentCaption}),(t=this.attachmentPiece.getCaption())?(n.classList.add(u.attachmentCaption+"--edited"),n.textContent=t):((e=this.getCaptionConfig()).name&&(i=this.attachment.getFilename()),e.size&&(r=this.attachment.getFormattedFilesize()),i&&(o=c({tagName:"span",className:u.attachmentName,textContent:i}),n.appendChild(o)),r&&(i&&n.appendChild(document.createTextNode(" ")),s=c({tagName:"span",className:u.attachmentSize,textContent:r}),n.appendChild(s))),n},e.prototype.getClassName=function(){var t,e;return e=[u.attachment,u.attachment+"--"+this.attachment.getType()],(t=this.attachment.getExtension())&&e.push(u.attachment+"--"+t),e.join(" ")},e.prototype.getData=function(){var t,e;return e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},(t=this.attachmentPiece.attributes).isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(e.trixSerialize=!1),e},e.prototype.getHref=function(){return n(this.attachment.getContent(),"a")?void 0:this.attachment.getHref()},e.prototype.getCaptionConfig=function(){var t,e,n;return n=this.attachment.getType(),t=D.copyObject(null!=(e=D.config.attachments[n])?e.caption:void 0),"file"===n&&(t.name=!0),t},e.prototype.findProgressElement=function(){var t;return null!=(t=this.findElement())?t.querySelector("progress"):void 0},a=function(t){return c({tagName:"span",textContent:D.ZERO_WIDTH_SPACE,data:{trixCursorTarget:t,trixSerialize:!1}})},e.prototype.attachmentDidChangeUploadProgress=function(){var t,e;return e=this.attachment.getUploadProgress(),null!=(t=this.findProgressElement())?t.value=e:void 0},e}(D.ObjectView),n=function(t,e){var n;return(n=c("div")).innerHTML=null!=t?t:"",n.querySelector(e)}}.call(this),function(){var n,i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=D.makeElement,D.PreviewableAttachmentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.attachment.previewDelegate=this}return i(e,t),e.prototype.createContentNodes=function(){return this.image=n({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]},e.prototype.createCaptionElement=function(){var t;return(t=e.__super__.createCaptionElement.apply(this,arguments)).textContent||t.setAttribute("data-trix-placeholder",D.config.lang.captionPlaceholder),t},e.prototype.refresh=function(t){var e;return null==t&&(t=null!=(e=this.findElement())?e.querySelector("img"):void 0),t?this.updateAttributesForImage(t):void 0},e.prototype.updateAttributesForImage=function(t){var e,n,i,o,r,s;return r=this.attachment.getURL(),n=this.attachment.getPreviewURL(),t.src=n||r,n===r?t.removeAttribute("data-trix-serialized-attributes"):(i=JSON.stringify({src:r}),t.setAttribute("data-trix-serialized-attributes",i)),s=this.attachment.getWidth(),e=this.attachment.getHeight(),null!=s&&(t.width=s),null!=e&&(t.height=e),o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/"),t.dataset.trixStoreKey=o},e.prototype.attachmentDidChangeAttributes=function(){return this.refresh(this.image),this.refresh()},e}(D.AttachmentView)}.call(this),function(){var s,c,l,i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;l=D.makeElement,s=D.findInnerElement,c=D.getTextConfig,D.PieceView=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),t=this.options,this.textConfig=t.textConfig,this.context=t.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}var n;return i(e,t),e.prototype.createNodes=function(){var t,e,n,i,o,r;if(r=this.attachment?this.createAttachmentNodes():this.createStringNodes(),t=this.createElement()){for(n=s(t),e=0,i=r.length;e<i;e++)o=r[e],n.appendChild(o);r=[t]}return r},e.prototype.createAttachmentNodes=function(){var t;return t=this.attachment.isPreviewable()?D.PreviewableAttachmentView:D.AttachmentView,this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()},e.prototype.createStringNodes=function(){var t,e,n,i,o,r,s,a,u;if(null!=(s=this.textConfig)?s.plaintext:void 0)return[document.createTextNode(this.string)];for(r=[],n=e=0,i=(a=this.string.split("\n")).length;e<i;n=++e)u=a[n],0<n&&(t=l("br"),r.push(t)),u.length&&(o=document.createTextNode(this.preserveSpaces(u)),r.push(o));return r},e.prototype.createElement=function(){var t,e,n,i,o,r,s,a,u;for(i in a={},r=this.attributes)if(u=r[i],(t=c(i))&&(t.tagName&&(o=l(t.tagName),n?(n.appendChild(o),n=o):e=n=o),t.styleProperty&&(a[t.styleProperty]=u),t.style))for(i in s=t.style)u=s[i],a[i]=u;if(Object.keys(a).length)for(i in null==e&&(e=l("span")),a)u=a[i],e.style[i]=u;return e},e.prototype.createContainerElement=function(){var t,e,n,i,o;for(n in i=this.attributes)if(o=i[n],(e=c(n))&&e.groupTagName)return(t={})[n]=o,l(e.groupTagName,t)},n=D.NON_BREAKING_SPACE,e.prototype.preserveSpaces=function(t){return this.context.isLast&&(t=t.replace(/\ $/,n)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 "+n+" $2").replace(/\ {2}/g,n+" ").replace(/\ {2}/g," "+n),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,n)),t},e}(D.ObjectView)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.TextView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.text=this.object,this.textConfig=this.options.textConfig}var l;return n(e,t),e.prototype.createNodes=function(){var t,e,n,i,o,r,s,a,u,c;for(r=[],i=(a=D.ObjectGroup.groupObjects(this.getPieces())).length-1,n=e=0,o=a.length;e<o;n=++e)s=a[n],t={},0===n&&(t.isFirst=!0),n===i&&(t.isLast=!0),l(u)&&(t.followsWhitespace=!0),c=this.findOrCreateCachedChildView(D.PieceView,s,{textConfig:this.textConfig,context:t}),r.push.apply(r,c.getNodes()),u=s;return r},e.prototype.getPieces=function(){var t,e,n,i,o;for(o=[],t=0,e=(i=this.text.getPieces()).length;t<e;t++)(n=i[t]).hasAttribute("blockBreak")||o.push(n);return o},l=function(t){return/\s$/.test(null!=t?t.toString():void 0)},e}(D.ObjectView)}.call(this),function(){var o,u,c,n=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;c=D.makeElement,u=D.getBlockConfig,o=D.config.css,D.BlockView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.block=this.object,this.attributes=this.block.getAttributes()}return n(e,t),e.prototype.createNodes=function(){var t,e,n,i,o,r,s,a;if(o=[document.createComment("block")],this.block.isEmpty()?o.push(c("br")):(s=null!=(r=u(this.block.getLastAttribute()))?r.text:void 0,a=this.findOrCreateCachedChildView(D.TextView,this.block.text,{textConfig:s}),o.push.apply(o,a.getNodes()),
this.shouldAddExtraNewlineElement()&&o.push(c("br"))),this.attributes.length)return o;for(t=c(D.config.blockAttributes["default"].tagName),e=0,n=o.length;e<n;e++)i=o[e],t.appendChild(i);return[t]},e.prototype.createContainerElement=function(t){var e,n,i;return e=this.attributes[t],n={tagName:u(e).tagName},"attachmentGallery"===e&&(i=this.block.getBlockBreakPosition(),n.className=o.attachmentGallery+" "+o.attachmentGallery+"--"+i),c(n)},e.prototype.shouldAddExtraNewlineElement=function(){return/\n\n$/.test(this.block.toString())},e}(D.ObjectView)}.call(this),function(){var o,a,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=D.defer,a=D.makeElement,D.DocumentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.element=this.options.element,this.elementStore=new D.ElementStore,this.setDocument(this.object)}var n,l,i;return r(e,t),e.render=function(t){var e,n;return(n=new this(t,{element:e=a("div")})).render(),n.sync(),e},e.prototype.setDocument=function(t){return t.isEqualTo(this.document)?void 0:this.document=this.object=t},e.prototype.render=function(){var t,e,o,n,i,r,s;if(this.childViews=[],this.shadowElement=a("div"),!this.document.isEmpty()){for(r=[],t=0,e=(i=D.ObjectGroup.groupObjects(this.document.getBlocks(),{asTree:!0})).length;t<e;t++)n=i[t],s=this.findOrCreateCachedChildView(D.BlockView,n),r.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=s.getNodes()).length;t<e;t++)o=n[t],i.push(this.shadowElement.appendChild(o));return i}.call(this));return r}},e.prototype.isSynced=function(){return n(this.shadowElement,this.element)},e.prototype.sync=function(){var t;for(t=this.createDocumentFragmentForSync();this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()},e.prototype.didSync=function(){return this.elementStore.reset(l(this.element)),o((t=this,function(){return t.garbageCollectCachedViews()}));var t},e.prototype.createDocumentFragmentForSync=function(){var t,e,n,i,o,r,s,a,u,c;for(e=document.createDocumentFragment(),n=0,o=(a=this.shadowElement.childNodes).length;n<o;n++)s=a[n],e.appendChild(s.cloneNode(!0));for(i=0,r=(u=l(e)).length;i<r;i++)t=u[i],(c=this.elementStore.remove(t))&&t.parentNode.replaceChild(c,t);return e},l=function(t){return t.querySelectorAll("[data-trix-store-key]")},n=function(t,e){return i(t.innerHTML)===i(e.innerHTML)},i=function(t){return t.replace(/&nbsp;/g," ")},e}(D.ObjectView)}.call(this),function(){var n,i,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;r=D.findClosestElementFromNode,o=D.handleEvent,s=D.innerElementIsActive,i=D.defer,n=D.AttachmentView.attachmentSelector,D.CompositionController=function(t){function e(t,e){this.element=t,this.composition=e,this.didClickAttachment=a(this.didClickAttachment,this),this.didBlur=a(this.didBlur,this),this.didFocus=a(this.didFocus,this),this.documentView=new D.DocumentView(this.composition.document,{element:this.element}),o("focus",{onElement:this.element,withCallback:this.didFocus}),o("blur",{onElement:this.element,withCallback:this.didBlur}),o("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),o("mousedown",{onElement:this.element,matchingSelector:n,withCallback:this.didClickAttachment}),o("click",{onElement:this.element,matchingSelector:"a"+n,preventDefault:!0})}return u(e,t),e.prototype.didFocus=function(){var t,e,n,i;return t=function(){var t;return i.focused?void 0:(i.focused=!0,null!=(t=i.delegate)&&"function"==typeof t.compositionControllerDidFocus?t.compositionControllerDidFocus():void 0)},null!=(e=null!=(n=(i=this).blurPromise)?n.then(t):void 0)?e:t()},e.prototype.didBlur=function(){return this.blurPromise=new Promise((n=this,function(e){return i(function(){var t;return s(n.element)||(n.focused=null)!=(t=n.delegate)&&"function"==typeof t.compositionControllerDidBlur&&t.compositionControllerDidBlur(),n.blurPromise=null,e()})}));var n},e.prototype.didClickAttachment=function(t,e){var n,i,o;return n=this.findAttachmentForElement(e),i=null!=r(t.target,{matchingSelector:"figcaption"}),null!=(o=this.delegate)&&"function"==typeof o.compositionControllerDidSelectAttachment?o.compositionControllerDidSelectAttachment(n,{editCaption:i}):void 0},e.prototype.getSerializableElement=function(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element},e.prototype.render=function(){var t,e,n;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&(null!=(t=this.delegate)&&"function"==typeof t.compositionControllerWillSyncDocumentView&&t.compositionControllerWillSyncDocumentView(),this.documentView.sync(),null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidSyncDocumentView&&e.compositionControllerDidSyncDocumentView()),null!=(n=this.delegate)&&"function"==typeof n.compositionControllerDidRender?n.compositionControllerDidRender():void 0},e.prototype.rerenderViewForObject=function(t){return this.invalidateViewForObject(t),this.render()},e.prototype.invalidateViewForObject=function(t){return this.documentView.invalidateViewForObject(t)},e.prototype.isViewCachingEnabled=function(){return this.documentView.isViewCachingEnabled()},e.prototype.enableViewCaching=function(){return this.documentView.enableViewCaching()},e.prototype.disableViewCaching=function(){return this.documentView.disableViewCaching()},e.prototype.refreshViewCache=function(){return this.documentView.garbageCollectCachedViews()},e.prototype.isEditingAttachment=function(){return null!=this.attachmentEditor},e.prototype.installAttachmentEditorForAttachment=function(t,e){var n,i,o;if((null!=(o=this.attachmentEditor)?o.attachment:void 0)!==t&&(i=this.documentView.findElementForObject(t)))return this.uninstallAttachmentEditor(),n=this.composition.document.getAttachmentPieceForAttachment(t),this.attachmentEditor=new D.AttachmentEditorController(n,i,this.element,e),this.attachmentEditor.delegate=this},e.prototype.uninstallAttachmentEditor=function(){var t;return null!=(t=this.attachmentEditor)?t.uninstall():void 0},e.prototype.didUninstallAttachmentEditor=function(){return this.attachmentEditor=null,this.render()},e.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.updateAttributesForAttachment(t,e)},e.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.removeAttributeForAttachment(t,e)},e.prototype.attachmentEditorDidRequestRemovalOfAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):void 0},e.prototype.attachmentEditorDidRequestDeselectingAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):void 0},e.prototype.canSyncDocumentView=function(){return!this.isEditingAttachment()},e.prototype.findAttachmentForElement=function(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))},e}(D.BasicObject)}.call(this),function(){var d,f,m,g=function(t,e){return function(){return t.apply(e,arguments)}},y=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;f=D.handleEvent,m=D.triggerEvent,d=D.findClosestElementFromNode,D.ToolbarController=function(t){function e(t){this.element=t,this.didKeyDownDialogInput=g(this.didKeyDownDialogInput,this),this.didClickDialogButton=g(this.didClickDialogButton,this),this.didClickAttributeButton=g(this.didClickAttributeButton,this),this.didClickActionButton=g(this.didClickActionButton,this),this.attributes={},this.actions={},this.resetDialogInputs(),f("mousedown",{onElement:this.element,matchingSelector:s,withCallback:this.didClickActionButton}),f("mousedown",{onElement:this.element,matchingSelector:a,withCallback:this.didClickAttributeButton}),f("click",{onElement:this.element,matchingSelector:p,preventDefault:!0}),f("click",{onElement:this.element,matchingSelector:i,withCallback:this.didClickDialogButton}),f("keydown",{onElement:this.element,matchingSelector:r,withCallback:this.didKeyDownDialogInput})}var s,n,a,i,r,o,u,l,c,h,p;return y(e,t),p=(a="[data-trix-attribute]")+", "+(s="[data-trix-action]"),n=(o="[data-trix-dialog]")+"[data-trix-active]",i=o+" [data-trix-method]",r=o+" [data-trix-input]",e.prototype.didClickActionButton=function(t,e){var n,i,o;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=u(e),this.getDialog(n)?this.toggleDialog(n):null!=(o=this.delegate)?o.toolbarDidInvokeAction(n):void 0},e.prototype.didClickAttributeButton=function(t,e){var n,i,o;return null!=(i=this.delegate)&&i.toolbarDidClickButton(),t.preventDefault(),n=l(e),this.getDialog(n)?this.toggleDialog(n):null!=(o=this.delegate)&&o.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()},e.prototype.didClickDialogButton=function(t,e){var n;return n=d(e,{matchingSelector:o}),this[e.getAttribute("data-trix-method")].call(this,n)},e.prototype.didKeyDownDialogInput=function(t,e){var n,i;return 13===t.keyCode&&(t.preventDefault(),n=e.getAttribute("name"),i=this.getDialog(n),this.setAttribute(i)),27===t.keyCode?(t.preventDefault(),this.hideDialog()):void 0},e.prototype.updateActions=function(t){return this.actions=t,this.refreshActionButtons()},e.prototype.refreshActionButtons=function(){return this.eachActionButton((n=this,function(t,e){return t.disabled=!1===n.actions[e]}));var n},e.prototype.eachActionButton=function(t){var e,n,i,o,r;for(r=[],n=0,i=(o=this.element.querySelectorAll(s)).length;n<i;n++)e=o[n],r.push(t(e,u(e)));return r},e.prototype.updateAttributes=function(t){return this.attributes=t,this.refreshAttributeButtons()},e.prototype.refreshAttributeButtons=function(){return this.eachAttributeButton((n=this,function(t,e){return t.disabled=!1===n.attributes[e],n.attributes[e]||n.dialogIsVisible(e)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))}));var n},e.prototype.eachAttributeButton=function(t){var e,n,i,o,r;for(r=[],n=0,i=(o=this.element.querySelectorAll(a)).length;n<i;n++)e=o[n],r.push(t(e,l(e)));return r},e.prototype.applyKeyboardCommand=function(t){var e,n,i,o,r,s;for(o=JSON.stringify(t.sort()),i=0,r=(s=this.element.querySelectorAll("[data-trix-key]")).length;i<r;i++)if(n=(e=s[i]).getAttribute("data-trix-key").split("+"),JSON.stringify(n.sort())===o)return m("mousedown",{onElement:e}),!0;return!1},e.prototype.dialogIsVisible=function(t){var e;return(e=this.getDialog(t))?e.hasAttribute("data-trix-active"):void 0},e.prototype.toggleDialog=function(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)},e.prototype.showDialog=function(t){var e,n,i,o,r,s,a,u,c;for(this.hideDialog(),null!=(s=this.delegate)&&s.toolbarWillShowDialog(),(n=this.getDialog(t)).setAttribute("data-trix-active",""),n.classList.add("trix-active"),i=0,r=(a=n.querySelectorAll("input[disabled]")).length;i<r;i++)a[i].removeAttribute("disabled");return(e=l(n))&&(o=h(n,t))&&(o.value=null!=(u=this.attributes[e])?u:"",o.select()),null!=(c=this.delegate)?c.toolbarDidShowDialog(t):void 0},e.prototype.setAttribute=function(t){var e,n,i;return e=l(t),(n=h(t,e)).willValidate&&!n.checkValidity()?(n.setAttribute("data-trix-validate",""),n.classList.add("trix-validate"),n.focus()):(null!=(i=this.delegate)&&i.toolbarDidUpdateAttribute(e,n.value),this.hideDialog())},e.prototype.removeAttribute=function(t){var e,n;return e=l(t),null!=(n=this.delegate)&&n.toolbarDidRemoveAttribute(e),this.hideDialog()},e.prototype.hideDialog=function(){var t,e;return(t=this.element.querySelector(n))?(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),null!=(e=this.delegate)?e.toolbarDidHideDialog(c(t)):void 0):void 0},e.prototype.resetDialogInputs=function(){var t,e,n,i,o;for(o=[],t=0,n=(i=this.element.querySelectorAll(r)).length;t<n;t++)(e=i[t]).setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),o.push(e.classList.remove("trix-validate"));return o},e.prototype.getDialog=function(t){return this.element.querySelector("[data-trix-dialog="+t+"]")},h=function(t,e){return null==e&&(e=l(t)),t.querySelector("[data-trix-input][name='"+e+"']")},u=function(t){return t.getAttribute("data-trix-action")},l=function(t){var e;return null!=(e=t.getAttribute("data-trix-attribute"))?e:t.getAttribute("data-trix-dialog-attribute")},c=function(t){return t.getAttribute("data-trix-dialog")},e}(D.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.ImagePreloadOperation=function(t){function e(t){this.url=t}return n(e,t),e.prototype.perform=function(t){var e,n;return(e=new Image).onload=(n=this,function(){return e.width=n.width=e.naturalWidth,e.height=n.height=e.naturalHeight,t(!0,e)}),e.onerror=function(){return t(!1)},e.src=this.url},e}(D.Operation)}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.Attachment=function(t){function e(t){null==t&&(t={}),this.releaseFile=n(this.releaseFile,this),e.__super__.constructor.apply(this,arguments),this.attributes=D.Hash.box(t),this.didChangeAttributes()}return i(e,t),e.previewablePattern=/^image(\/(gif|png|jpe?g)|$)/,e.attachmentForFile=function(t){var e;return(e=new this(this.attributesForFile(t))).setFile(t),e},e.attributesForFile=function(t){return new D.Hash({filename:t.name,filesize:t.size,contentType:t.type})},e.fromJSON=function(t){return new this(t)},e.prototype.getAttribute=function(t){return this.attributes.get(t)},e.prototype.hasAttribute=function(t){return this.attributes.has(t)},e.prototype.getAttributes=function(){return this.attributes.toObject()},e.prototype.setAttributes=function(t){var e,n,i;return null==t&&(t={}),e=this.attributes.merge(t),this.attributes.isEqualTo(e)?void 0:(this.attributes=e,this.didChangeAttributes(),null!=(n=this.previewDelegate)&&"function"==typeof n.attachmentDidChangeAttributes&&n.attachmentDidChangeAttributes(this),null!=(i=this.delegate)&&"function"==typeof i.attachmentDidChangeAttributes?i.attachmentDidChangeAttributes(this):void 0)},e.prototype.didChangeAttributes=function(){return this.isPreviewable()?this.preloadURL():void 0},e.prototype.isPending=function(){return null!=this.file&&!(this.getURL()||this.getHref())},e.prototype.isPreviewable=function(){return this.attributes.has("previewable")?this.attributes.get("previewable"):this.constructor.previewablePattern.test(this.getContentType())},e.prototype.getType=function(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"},e.prototype.getURL=function(){return this.attributes.get("url")},e.prototype.getHref=function(){return this.attributes.get("href")},e.prototype.getFilename=function(){var t;return null!=(t=this.attributes.get("filename"))?t:""},e.prototype.getFilesize=function(){return this.attributes.get("filesize")},e.prototype.getFormattedFilesize=function(){var t;return"number"==typeof(t=this.attributes.get("filesize"))?D.config.fileSize.formatter(t):""},e.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},e.prototype.getContentType=function(){return this.attributes.get("contentType")},e.prototype.hasContent=function(){return this.attributes.has("content")},e.prototype.getContent=function(){return this.attributes.get("content")},e.prototype.getWidth=function(){return this.attributes.get("width")},e.prototype.getHeight=function(){return this.attributes.get("height")},e.prototype.getFile=function(){return this.file},e.prototype.setFile=function(t){return this.file=t,this.isPreviewable()?this.preloadFile():void 0},e.prototype.releaseFile=function(){return this.releasePreloadedFile(),this.file=null},e.prototype.getUploadProgress=function(){var t;return null!=(t=this.uploadProgress)?t:0},e.prototype.setUploadProgress=function(t){var e;return this.uploadProgress!==t?(this.uploadProgress=t,null!=(e=this.uploadProgressDelegate)&&"function"==typeof e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(this):void 0):void 0},e.prototype.toJSON=function(){return this.getAttributes()},e.prototype.getCacheKey=function(){return[e.__super__.getCacheKey.apply(this,arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")},e.prototype.getPreviewURL=function(){return this.previewURL||this.preloadingURL},e.prototype.setPreviewURL=function(t){var e,n;return t!==this.getPreviewURL()?(this.previewURL=t,null!=(e=this.previewDelegate)&&"function"==typeof e.attachmentDidChangeAttributes&&e.attachmentDidChangeAttributes(this),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangePreviewURL?n.attachmentDidChangePreviewURL(this):void 0):void 0},e.prototype.preloadURL=function(){return this.preload(this.getURL(),this.releaseFile)},e.prototype.preloadFile=function(){return this.file?(this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)):void 0},e.prototype.releasePreloadedFile=function(){return this.fileObjectURL?(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null):void 0},e.prototype.preload=function(i,o){var r;return i&&i!==this.getPreviewURL()?(this.preloadingURL=i,new D.ImagePreloadOperation(i).then((r=this,function(t){var e,n;return n=t.width,e=t.height,r.setAttributes({width:n,height:e}),r.preloadingURL=null,r.setPreviewURL(i),"function"==typeof o?o():void 0}))):void 0},e}(D.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.Piece=function(t){function n(t,e){null==e&&(e={}),n.__super__.constructor.apply(this,arguments),this.attributes=D.Hash.box(e)}return e(n,t),n.types={},n.registerType=function(t,e){return e.type=t,this.types[t]=e},n.fromJSON=function(t){var e;return(e=this.types[t.type])?e.fromJSON(t):void 0},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.getValue(),t)},n.prototype.copyWithAdditionalAttributes=function(t){return this.copyWithAttributes(this.attributes.merge(t))},n.prototype.copyWithoutAttribute=function(t){return this.copyWithAttributes(this.attributes.remove(t))},n.prototype.copy=function(){return this.copyWithAttributes(this.attributes)},n.prototype.getAttribute=function(t){return this.attributes.get(t)},n.prototype.getAttributesHash=function(){return this.attributes},n.prototype.getAttributes=function(){return this.attributes.toObject()},n.prototype.getCommonAttributes=function(){var e,n,t;return(t=pieceList.getPieceAtIndex(0))?(e=t.attributes,n=e.getKeys(),pieceList.eachPiece(function(t){return n=e.getKeysCommonToHash(t.attributes),e=e.slice(n)}),e.toObject()):{}},n.prototype.hasAttribute=function(t){return this.attributes.has(t)},n.prototype.hasSameStringValueAsPiece=function(t){return null!=t&&this.toString()===t.toString()},n.prototype.hasSameAttributesAsPiece=function(t){return null!=t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))},n.prototype.isBlockBreak=function(){return!1},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)},n.prototype.isEmpty=function(){return 0===this.length},n.prototype.isSerializable=function(){return!0},n.prototype.toJSON=function(){return{type:this.constructor.type,attributes:this.getAttributes()}},n.prototype.contentsForInspection=function(){return{type:this.constructor.type,attributes:this.attributes.inspect()}},n.prototype.canBeGrouped=function(){return this.hasAttribute("href")},n.prototype.canBeGroupedWith=function(t){return this.getAttribute("href")===t.getAttribute("href")},n.prototype.getLength=function(){return this.length},n.prototype.canBeConsolidatedWith=function(){return!1},n}(D.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.Piece.registerType("attachment",D.AttachmentPiece=function(t){function n(t){this.attachment=t,n.__super__.constructor.apply(this,arguments),this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}return e(n,t),n.fromJSON=function(t){return new this(D.Attachment.fromJSON(t.attachment),t.attributes)},n.permittedAttributes=["caption","presentation"],n.prototype.ensureAttachmentExclusivelyHasAttribute=function(t){return this.hasAttribute(t)?(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice(t)),this.attributes=this.attributes.remove(t)):void 0},n.prototype.removeProhibitedAttributes=function(){var t;return(t=this.attributes.slice(this.constructor.permittedAttributes)).isEqualTo(this.attributes)?void 0:this.attributes=t},n.prototype.getValue=function(){return this.attachment},n.prototype.isSerializable=function(){return!this.attachment.isPending()},n.prototype.getCaption=function(){var t;return null!=(t=this.attributes.get("caption"))?t:""},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)&&this.attachment.id===(null!=t&&null!=(e=t.attachment)?e.id:void 0)},n.prototype.toString=function(){return D.OBJECT_REPLACEMENT_CHARACTER},n.prototype.toJSON=function(){var t;return(t=n.__super__.toJSON.apply(this,arguments)).attachment=this.attachment,t},n.prototype.getCacheKey=function(){return[n.__super__.getCacheKey.apply(this,arguments),this.attachment.getCacheKey()].join("/")},n.prototype.toConsole=function(){return JSON.stringify(this.toString())},n}(D.Piece))}.call(this),function(){var n,i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=D.normalizeNewlines,D.Piece.registerType("string",D.StringPiece=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.string=n(t),this.length=this.string.length}return i(e,t),e.fromJSON=function(t){return new this(t.string,t.attributes)},e.prototype.getValue=function(){return this.string},e.prototype.toString=function(){return this.string.toString()},e.prototype.isBlockBreak=function(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")},e.prototype.toJSON=function(){var t;return(t=e.__super__.toJSON.apply(this,arguments)).string=this.string,t},e.prototype.canBeConsolidatedWith=function(t){return null!=t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)},e.prototype.consolidateWith=function(t){return new this.constructor(this.toString()+t.toString(),this.attributes)},e.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]},e.prototype.toConsole=function(){var t;return 15<(t=this.string).length&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())},e}(D.Piece))}.call(this),function(){var i,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,u=[].slice;i=D.spliceArray,D.SplittableList=function(t){function e(t){null==t&&(t=[]),e.__super__.constructor.apply(this,arguments),this.objects=t.slice(0),this.length=this.objects.length}var s,n,a;return o(e,t),e.box=function(t){return t instanceof this?t:new this(t)},e.prototype.indexOf=function(t){return this.objects.indexOf(t)},e.prototype.splice=function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],new this.constructor(i.apply(null,[this.objects].concat(u.call(t))))},e.prototype.eachObject=function(t){var e,n,i,o,r,s;for(s=[],n=e=0,i=(r=this.objects).length;e<i;n=++e)o=r[n],s.push(t(o,n));return s},e.prototype.insertObjectAtIndex=function(t,e){return this.splice(e,0,t)},e.prototype.insertSplittableListAtIndex=function(t,e){return this.splice.apply(this,[e,0].concat(u.call(t.objects)))},e.prototype.insertSplittableListAtPosition=function(t,e){var n,i,o;return i=(o=this.splitObjectAtPosition(e))[0],n=o[1],new this.constructor(i).insertSplittableListAtIndex(t,n)},e.prototype.editObjectAtIndex=function(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)},e.prototype.replaceObjectAtIndex=function(t,e){return this.splice(e,1,t)},e.prototype.removeObjectAtIndex=function(t){return this.splice(t,1)},e.prototype.getObjectAtIndex=function(t){return this.objects[t]},e.prototype.getSplittableListInRange=function(t){var e,n,i,o;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],o=i[2],new this.constructor(n.slice(e,o+1))},e.prototype.selectSplittableList=function(o){var r,t;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.objects).length;t<e;t++)r=n[t],o(r)&&i.push(r);return i}.call(this),new this.constructor(t)},e.prototype.removeObjectsInRange=function(t){var e,n,i,o;return n=(i=this.splitObjectsAtRange(t))[0],e=i[1],o=i[2],new this.constructor(n).splice(e,o-e+1)},e.prototype.transformObjectsInRange=function(t,i){var o,r,s,a,e,u,n;return e=this.splitObjectsAtRange(t),a=e[0],r=e[1],u=e[2],n=function(){var t,e,n;for(n=[],o=t=0,e=a.length;t<e;o=++t)s=a[o],n.push(r<=o&&o<=u?i(s):s);return n}(),new this.constructor(n)},e.prototype.splitObjectsAtRange=function(t){var e,n,i,o,r;return n=(o=this.splitObjectAtPosition(a(t)))[0],e=o[1],i=o[2],[n=(r=new this.constructor(n).splitObjectAtPosition(s(t)+i))[0],e,r[1]-1]},e.prototype.getObjectAtPosition=function(t){var e,n;return e=(n=this.findIndexAndOffsetAtPosition(t)).index,n.offset,this.objects[e]},e.prototype.splitObjectAtPosition=function(t){var e,n,i,o,r,s,a,u,c;return e=(r=this.findIndexAndOffsetAtPosition(t)).index,o=r.offset,i=this.objects.slice(0),null!=e?0===o?(u=e,c=0):(n=(s=this.getObjectAtIndex(e).splitAtOffset(o))[0],a=s[1],i.splice(e,1,n,a),u=e+1,c=n.getLength()-o):(u=i.length,c=0),[i,u,c]},e.prototype.consolidate=function(){var t,e,n,i,o,r;for(i=[],o=this.objects[0],t=0,e=(r=this.objects.slice(1)).length;t<e;t++)n=r[t],("function"==typeof o.canBeConsolidatedWith?o.canBeConsolidatedWith(n):void 0)?o=o.consolidateWith(n):(i.push(o),o=n);return null!=o&&i.push(o),new this.constructor(i)},e.prototype.consolidateFromIndexToIndex=function(t,e){var n,i;return i=this.objects.slice(0).slice(t,e+1),n=new this.constructor(i).consolidate().toArray(),this.splice.apply(this,[t,i.length].concat(u.call(n)))},e.prototype.findIndexAndOffsetAtPosition=function(t){var e,n,i,o,r,s;for(i=n=e=0,o=(s=this.objects).length;n<o;i=++n){if(r=e+s[i].getLength(),e<=t&&t<r)return{index:i,offset:t-e};e=r}return{index:null,offset:null}},e.prototype.findPositionAtIndexAndOffset=function(t,e){var n,i,o,r,s,a;for(n=i=s=0,o=(a=this.objects).length;i<o;n=++i)if(r=a[n],n<t)s+=r.getLength();else if(n===t){s+=e;break}return s},e.prototype.getEndPosition=function(){var i,o;return null!=this.endPosition?this.endPosition:this.endPosition=function(){var t,e,n;for(t=o=0,e=(n=this.objects).length;t<e;t++)i=n[t],o+=i.getLength();return o}.call(this)},e.prototype.toString=function(){return this.objects.join("")},e.prototype.toArray=function(){return this.objects.slice(0)},e.prototype.toJSON=function(){return this.toArray()},e.prototype.isEqualTo=function(t){return e.__super__.isEqualTo.apply(this,arguments)||n(this.objects,null!=t?t.objects:void 0)},n=function(t,e){var n,i,o,r,s;if(null==e&&(e=[]),t.length!==e.length)return!1;for(s=!0,i=n=0,o=t.length;n<o;i=++n)r=t[i],s&&!r.isEqualTo(e[i])&&(s=!1);return s},e.prototype.contentsForInspection=function(){var o;return{objects:"["+function(){var t,e,n,i;for(i=[],t=0,e=(n=this.objects).length;t<e;t++)o=n[t],i.push(o.inspect());return i}.call(this).join(", ")+"]"}},a=function(t){return t[0]},s=function(t){return t[1]},e}(D.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.Text=function(t){function n(i){var o;null==i&&(i=[]),n.__super__.constructor.apply(this,arguments),this.pieceList=new D.SplittableList(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)(o=i[t]).isEmpty()||n.push(o);return n}())}return e(n,t),n.textForAttachmentWithAttributes=function(t,e){return new this([new D.AttachmentPiece(t,e)])},n.textForStringWithAttributes=function(t,e){return new this([new D.StringPiece(t,e)])},n.fromJSON=function(i){var o;return new this(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(D.Piece.fromJSON(o));return n}())},n.prototype.copy=function(){return this.copyWithPieceList(this.pieceList)},n.prototype.copyWithPieceList=function(t){return new this.constructor(t.consolidate().toArray())},n.prototype.copyUsingObjectMap=function(r){var s,t;return t=function(){var t,e,n,i,o;for(o=[],t=0,e=(n=this.getPieces()).length;t<e;t++)s=n[t],o.push(null!=(i=r.find(s))?i:s);return o}.call(this),new this.constructor(t)},n.prototype.appendText=function(t){return this.insertTextAtPosition(t,this.getLength())},n.prototype.insertTextAtPosition=function(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))},n.prototype.removeTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))},n.prototype.replaceTextAtRange=function(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])},n.prototype.moveTextFromRangeToPosition=function(t,e){var n,i;if(!(t[0]<=e&&e<=t[1]))return n=(i=this.getTextAtRange(t)).getLength(),t[0]<e&&(e-=n),this.removeTextAtRange(t).insertTextAtPosition(i,e)},n.prototype.addAttributeAtRange=function(t,e,n){var i;return(i={})[t]=e,this.addAttributesAtRange(i,n)},n.prototype.addAttributesAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithAdditionalAttributes(e)}))},n.prototype.removeAttributeAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithoutAttribute(e)}))},n.prototype.setAttributesAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithAttributes(e)}))},n.prototype.getAttributesAtPosition=function(t){var e,n;return null!=(e=null!=(n=this.pieceList.getObjectAtPosition(t))?n.getAttributes():void 0)?e:{}},n.prototype.getCommonAttributes=function(){var t,o;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.pieceList.toArray()).length;t<e;t++)o=n[t],i.push(o.getAttributes());return i}.call(this),D.Hash.fromCommonAttributesOfObjects(t).toObject()},n.prototype.getCommonAttributesAtRange=function(t){var e;return null!=(e=this.getTextAtRange(t).getCommonAttributes())?e:{}},n.prototype.getExpandedRangeForAttributeAtOffset=function(t,e){var n,i,o;for(n=o=e,i=this.getLength();0<n&&this.getCommonAttributesAtRange([n-1,o])[t];)n--;for(;o<i&&this.getCommonAttributesAtRange([e,o+1])[t];)o++;return[n,o]},n.prototype.getTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))},n.prototype.getStringAtRange=function(t){return this.pieceList.getSplittableListInRange(t).toString()},
n.prototype.getStringAtPosition=function(t){return this.getStringAtRange([t,t+1])},n.prototype.startsWithString=function(t){return this.getStringAtRange([0,t.length])===t},n.prototype.endsWithString=function(t){var e;return e=this.getLength(),this.getStringAtRange([e-t.length,e])===t},n.prototype.getAttachmentPieces=function(){var t,e,n,i,o;for(o=[],t=0,e=(i=this.pieceList.toArray()).length;t<e;t++)null!=(n=i[t]).attachment&&o.push(n);return o},n.prototype.getAttachments=function(){var t,e,n,i,o;for(o=[],t=0,e=(i=this.getAttachmentPieces()).length;t<e;t++)n=i[t],o.push(n.attachment);return o},n.prototype.getAttachmentAndPositionById=function(t){var e,n,i,o,r,s;for(e=o=0,n=(r=this.pieceList.toArray()).length;e<n;e++){if((null!=(s=(i=r[e]).attachment)?s.id:void 0)===t)return{attachment:i.attachment,position:o};o+=i.length}return{attachment:null,position:null}},n.prototype.getAttachmentById=function(t){var e,n;return e=(n=this.getAttachmentAndPositionById(t)).attachment,n.position,e},n.prototype.getRangeOfAttachment=function(t){var e,n;return t=(n=this.getAttachmentAndPositionById(t.id)).attachment,e=n.position,null!=t?[e,e+1]:void 0},n.prototype.updateAttributesForAttachment=function(t,e){var n;return(n=this.getRangeOfAttachment(e))?this.addAttributesAtRange(t,n):this},n.prototype.getLength=function(){return this.pieceList.getEndPosition()},n.prototype.isEmpty=function(){return 0===this.getLength()},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)||(null!=t&&null!=(e=t.pieceList)?e.isEqualTo(this.pieceList):void 0)},n.prototype.isBlockBreak=function(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()},n.prototype.eachPiece=function(t){return this.pieceList.eachObject(t)},n.prototype.getPieces=function(){return this.pieceList.toArray()},n.prototype.getPieceAtPosition=function(t){return this.pieceList.getObjectAtPosition(t)},n.prototype.contentsForInspection=function(){return{pieceList:this.pieceList.inspect()}},n.prototype.toSerializableText=function(){var t;return t=this.pieceList.selectSplittableList(function(t){return t.isSerializable()}),this.copyWithPieceList(t)},n.prototype.toString=function(){return this.pieceList.toString()},n.prototype.toJSON=function(){return this.pieceList.toJSON()},n.prototype.toConsole=function(){var o;return JSON.stringify(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.pieceList.toArray()).length;t<e;t++)o=n[t],i.push(JSON.parse(o.toConsole()));return i}.call(this))},n}(D.Object)}.call(this),function(){var h,p,d,f,m=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,g=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},y=[].slice;h=D.arraysAreEqual,f=D.spliceArray,p=D.getBlockConfig,D.getBlockAttributeNames,d=D.getListAttributeNames,D.Block=function(t){function n(t,e){null==t&&(t=new D.Text),null==e&&(e=[]),n.__super__.constructor.apply(this,arguments),this.text=i(t),this.attributes=e}var e,i,o,r,s,a,u,c,l;return m(n,t),n.fromJSON=function(t){return new this(D.Text.fromJSON(t.text),t.attributes)},n.prototype.isEmpty=function(){return this.text.isBlockBreak()},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.text.isEqualTo(null!=t?t.text:void 0)&&h(this.attributes,null!=t?t.attributes:void 0)},n.prototype.copyWithText=function(t){return new this.constructor(t,this.attributes)},n.prototype.copyWithoutText=function(){return this.copyWithText(null)},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.text,t)},n.prototype.copyWithoutAttributes=function(){return this.copyWithAttributes(null)},n.prototype.copyUsingObjectMap=function(t){var e;return this.copyWithText((e=t.find(this.text))?e:this.text.copyUsingObjectMap(t))},n.prototype.addAttribute=function(t){var e;return e=this.attributes.concat(r(t)),this.copyWithAttributes(e)},n.prototype.removeAttribute=function(t){var e,n;return n=p(t).listAttribute,e=a(a(this.attributes,t),n),this.copyWithAttributes(e)},n.prototype.removeLastAttribute=function(){return this.removeAttribute(this.getLastAttribute())},n.prototype.getLastAttribute=function(){return s(this.attributes)},n.prototype.getAttributes=function(){return this.attributes.slice(0)},n.prototype.getAttributeLevel=function(){return this.attributes.length},n.prototype.getAttributeAtLevel=function(t){return this.attributes[t-1]},n.prototype.hasAttribute=function(t){return 0<=g.call(this.attributes,t)},n.prototype.hasAttributes=function(){return 0<this.getAttributeLevel()},n.prototype.getLastNestableAttribute=function(){return s(this.getNestableAttributes())},n.prototype.getNestableAttributes=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.attributes).length;e<n;e++)t=i[e],p(t).nestable&&o.push(t);return o},n.prototype.getNestingLevel=function(){return this.getNestableAttributes().length},n.prototype.decreaseNestingLevel=function(){var t;return(t=this.getLastNestableAttribute())?this.removeAttribute(t):this},n.prototype.increaseNestingLevel=function(){var t,e,n;return(t=this.getLastNestableAttribute())?(n=this.attributes.lastIndexOf(t),e=f.apply(null,[this.attributes,n+1,0].concat(y.call(r(t)))),this.copyWithAttributes(e)):this},n.prototype.getListItemAttributes=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.attributes).length;e<n;e++)t=i[e],p(t).listAttribute&&o.push(t);return o},n.prototype.isListItem=function(){var t;return null!=(t=p(this.getLastAttribute()))?t.listAttribute:void 0},n.prototype.isTerminalBlock=function(){var t;return null!=(t=p(this.getLastAttribute()))?t.terminal:void 0},n.prototype.breaksOnReturn=function(){var t;return null!=(t=p(this.getLastAttribute()))?t.breakOnReturn:void 0},n.prototype.findLineBreakInDirectionFromPosition=function(t,e){var n,i;return i=this.toString(),-1!==(n=function(){switch(t){case"forward":return i.indexOf("\n",e);case"backward":return i.slice(0,e).lastIndexOf("\n")}}())?n:void 0},n.prototype.contentsForInspection=function(){return{text:this.text.inspect(),attributes:this.attributes}},n.prototype.toString=function(){return this.text.toString()},n.prototype.toJSON=function(){return{text:this.text,attributes:this.attributes}},n.prototype.getLength=function(){return this.text.getLength()},n.prototype.canBeConsolidatedWith=function(t){return!this.hasAttributes()&&!t.hasAttributes()},n.prototype.consolidateWith=function(t){var e,n;return e=D.Text.textForStringWithAttributes("\n"),n=this.getTextWithoutBlockBreak().appendText(e),this.copyWithText(n.appendText(t.text))},n.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]},n.prototype.getBlockBreakPosition=function(){return this.text.getLength()-1},n.prototype.getTextWithoutBlockBreak=function(){return u(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()},n.prototype.canBeGrouped=function(t){return this.attributes[t]},n.prototype.canBeGroupedWith=function(t,e){var n,i,o,r;return i=(o=t.getAttributes())[e],(n=this.attributes[e])===i&&!(!1===p(n).group&&(r=o[e+1],g.call(d(),r)<0))},i=function(t){return t=l(t),e(t)},l=function(t){var e,i,n,o,r,s;return o=!1,s=t.getPieces(),i=2<=s.length?y.call(s,0,e=s.length-1):(e=0,[]),null==(n=s[e++])?t:(i=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)(r=i[t]).isBlockBreak()?(o=!0,n.push(c(r))):n.push(r);return n}(),o?new D.Text(y.call(i).concat([n])):t)},o=D.Text.textForStringWithAttributes("\n",{blockBreak:!0}),e=function(t){return u(t)?t:t.appendText(o)},u=function(t){var e;return 0!==(e=t.getLength())&&t.getTextAtRange([e-1,e]).isBlockBreak()},c=function(t){return t.copyWithoutAttribute("blockBreak")},r=function(t){var e;return null!=(e=p(t).listAttribute)?[e,t]:[t]},s=function(t){return t.slice(-1)[0]},a=function(t,e){var n;return-1===(n=t.lastIndexOf(e))?t:f(t,n,1)},n}(D.Object)}.call(this),function(){var o,s,a,u=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty,c=[].slice,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=D.tagName,a=D.walkTree,o=D.nodeIsAttachmentElement,D.HTMLSanitizer=function(t){function e(t,e){this.allowedAttributes=(null!=e?e:{}).allowedAttributes,null==this.allowedAttributes&&(this.allowedAttributes=n),this.body=i(t)}var n,i,r;return u(e,t),n="style href src width height class".split(" "),e.sanitize=function(t,e){var n;return(n=new this(t,e)).sanitize(),n},e.prototype.sanitize=function(){return this.sanitizeElements(),this.normalizeListElementNesting()},e.prototype.getHTML=function(){return this.body.innerHTML},e.prototype.getBody=function(){return this.body},e.prototype.sanitizeElements=function(){var t,e,n,i,o;for(o=a(this.body),i=[];o.nextNode();)switch(n=o.currentNode,n.nodeType){case Node.ELEMENT_NODE:r(n)?i.push(n):this.sanitizeElement(n);break;case Node.COMMENT_NODE:i.push(n)}for(t=0,e=i.length;t<e;t++)n=i[t],D.removeNode(n);return this.body},e.prototype.sanitizeElement=function(t){var e,n,i,o;for(e=0,n=(o=c.call(t.attributes)).length;e<n;e++)i=o[e].name,0<=l.call(this.allowedAttributes,i)||0===i.indexOf("data-trix")||t.removeAttribute(i);return t},e.prototype.normalizeListElementNesting=function(){var t,e,n,i,o;for(t=0,e=(o=c.call(this.body.querySelectorAll("ul,ol"))).length;t<e;t++)(i=(n=o[t]).previousElementSibling)&&"li"===s(i)&&i.appendChild(n);return this.body},r=function(t){return(null!=t?t.nodeType:void 0)!==Node.ELEMENT_NODE||o(t)?void 0:"script"===s(t)||"false"===t.getAttribute("data-trix-serialize")},i=function(t){var e,n,i,o,r;for(null==t&&(t=""),t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>"),(e=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,i=0,o=(r=e.head.querySelectorAll("style")).length;i<o;i++)n=r[i],e.body.appendChild(n);return e.body},e}(D.BasicObject)}.call(this),function(){var f,m,g,y,v,b,w,x,A,C,E,S=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,k=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};f=D.arraysAreEqual,b=D.makeElement,C=D.tagName,v=D.getBlockTagNames,E=D.walkTree,y=D.findClosestElementFromNode,g=D.elementContainsNode,w=D.nodeIsAttachmentElement,x=D.normalizeSpaces,m=D.breakableWhitespacePattern,A=D.squishBreakableWhitespace,D.HTMLParser=function(t){function e(t,e){this.html=t,this.referenceElement=(null!=e?e:{}).referenceElement,this.blocks=[],this.blockElements=[],this.processedElements=[]}var i,o,s,r,a,u,c,n,l,h,p,d;return S(e,t),e.parse=function(t,e){var n;return(n=new this(t,e)).parse(),n},e.prototype.getDocument=function(){return D.Document.fromJSON(this.blocks)},e.prototype.parse=function(){var t,e;try{for(this.createHiddenContainer(),t=D.HTMLSanitizer.sanitize(this.html).getHTML(),this.containerElement.innerHTML=t,e=E(this.containerElement,{usingFilter:n});e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}},e.prototype.createHiddenContainer=function(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=b({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))},e.prototype.removeHiddenContainer=function(){return D.removeNode(this.containerElement)},n=function(t){return"style"===C(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},e.prototype.processNode=function(t){switch(t.nodeType){case Node.TEXT_NODE:return this.processTextNode(t);case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}},e.prototype.appendBlockForElement=function(t){var e,n,i,o;if(i=this.isBlockElement(t),n=g(this.currentBlockElement,t),i&&!this.isBlockElement(t.firstChild)){if(!(this.isInsignificantTextNode(t.firstChild)&&this.isBlockElement(t.firstElementChild)||(e=this.getBlockAttributes(t),n&&f(e,this.currentBlock.attributes))))return this.currentBlock=this.appendBlockForAttributesWithElement(e,t),this.currentBlockElement=t}else if(this.currentBlockElement&&!n&&!i)return(o=this.findParentBlockElement(t))?this.appendBlockForElement(o):(this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null)},e.prototype.findParentBlockElement=function(t){var e;for(e=t.parentElement;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&0<=k.call(this.blockElements,e))return e;e=e.parentElement}return null},e.prototype.processTextNode=function(t){var e,n;return this.isInsignificantTextNode(t)?void 0:(n=t.data,o(t.parentNode)||(n=A(n),p(null!=(e=t.previousSibling)?e.textContent:void 0)&&(n=u(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode)))},e.prototype.processElement=function(t){var e,n,i,o,r;if(w(t))return e=s(t),Object.keys(e).length&&(o=this.getTextAttributes(t),this.appendAttachmentWithAttributes(e,o),t.innerHTML=""),this.processedElements.push(t);switch(C(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":for(n in e={url:t.getAttribute("src"),contentType:"image"},i=a(t))r=i[n],e[n]=r;return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes("\n");break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ")}},e.prototype.appendBlockForAttributesWithElement=function(t,e){var n;return this.blockElements.push(e),n=i(t),this.blocks.push(n),n},e.prototype.appendEmptyBlock=function(){return this.appendBlockForAttributesWithElement([],null)},e.prototype.appendStringWithAttributes=function(t,e){return this.appendPiece(h(t,e))},e.prototype.appendAttachmentWithAttributes=function(t,e){return this.appendPiece(l(t,e))},e.prototype.appendPiece=function(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)},e.prototype.appendStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[i.length-1])?n.type:void 0)?n.string+=t:i.push(h(t))},e.prototype.prependStringToTextAtIndex=function(t,e){var n,i;return"string"===(null!=(n=(i=this.blocks[e].text)[0])?n.type:void 0)?n.string=t+n.string:i.unshift(h(t))},h=function(t,e){var n;return null==e&&(e={}),n="string",{string:t=x(t),attributes:e,type:n}},l=function(t,e){return null==e&&(e={}),{attachment:t,attributes:e,type:"attachment"}},i=function(t){return null==t&&(t={}),{text:[],attributes:t}},e.prototype.getTextAttributes=function(t){var e,n,i,o,r,s,a,u,c,l,h,p,d;for(e in i={},l=D.config.textAttributes)if((r=l[e]).tagName&&y(t,{matchingSelector:r.tagName,untilNode:this.containerElement}))i[e]=!0;else if(r.parser){if(d=r.parser(t)){for(n=!1,s=0,c=(h=this.findBlockElementAncestors(t)).length;s<c;s++)if(o=h[s],r.parser(o)===d){n=!0;break}n||(i[e]=d)}}else r.styleProperty&&(d=t.style[r.styleProperty])&&(i[e]=d);if(w(t)&&(a=t.getAttribute("data-trix-attributes")))for(u in p=JSON.parse(a))d=p[u],i[u]=d;return i},e.prototype.getBlockAttributes=function(t){var e,n,i,o;for(n=[];t&&t!==this.containerElement;){for(e in o=D.config.blockAttributes)!1!==(i=o[e]).parse&&C(t)===i.tagName&&(("function"==typeof i.test?i.test(t):void 0)||!i.test)&&(n.push(e),i.listAttribute&&n.push(i.listAttribute));t=t.parentNode}return n.reverse()},e.prototype.findBlockElementAncestors=function(t){var e,n;for(e=[];t&&t!==this.containerElement;)n=C(t),0<=k.call(v(),n)&&e.push(t),t=t.parentNode;return e},s=function(t){return JSON.parse(t.getAttribute("data-trix-attachment"))},a=function(t){var e,n,i;return i=t.getAttribute("width"),n=t.getAttribute("height"),e={},i&&(e.width=parseInt(i,10)),n&&(e.height=parseInt(n,10)),e},e.prototype.isBlockElement=function(t){var e;if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&!w(t)&&!y(t,{matchingSelector:"td",untilNode:this.containerElement}))return e=C(t),0<=k.call(v(),e)||"block"===window.getComputedStyle(t).display},e.prototype.isInsignificantTextNode=function(t){var e,n,i;if((null!=t?t.nodeType:void 0)===Node.TEXT_NODE&&d(t.data)&&(n=t.parentNode,i=t.previousSibling,e=t.nextSibling,(!c(n.previousSibling)||this.isBlockElement(n.previousSibling))&&!o(n)))return!i||this.isBlockElement(i)||!e||this.isBlockElement(e)},e.prototype.isExtraBR=function(t){return"br"===C(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t},o=function(t){var e;return"pre"===(e=window.getComputedStyle(t).whiteSpace)||"pre-wrap"===e||"pre-line"===e},c=function(t){return t&&!p(t.textContent)},e.prototype.translateBlockElementMarginsToNewlines=function(){var t,e,n,i,o,r,s;for(t=this.getMarginOfDefaultBlockElement(),s=[],n=e=0,i=(r=this.blocks).length;e<i;n=++e)r[n],(o=this.getMarginOfBlockElementAtIndex(n))&&(o.top>2*t.top&&this.prependStringToTextAtIndex("\n",n),s.push(o.bottom>2*t.bottom?this.appendStringToTextAtIndex("\n",n):void 0));return s},e.prototype.getMarginOfBlockElementAtIndex=function(t){var e,n;return!(e=this.blockElements[t])||!e.textContent||(n=C(e),0<=k.call(v(),n)||0<=k.call(this.processedElements,e))?void 0:r(e)},e.prototype.getMarginOfDefaultBlockElement=function(){var t;return t=b(D.config.blockAttributes["default"].tagName),this.containerElement.appendChild(t),r(t)},r=function(t){var e;return"block"===(e=window.getComputedStyle(t)).display?{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}:void 0},u=function(t){return t.replace(RegExp("^"+m.source+"+"),"")},d=function(t){return RegExp("^"+m.source+"*$").test(t)},p=function(t){return/\s$/.test(t)},e}(D.BasicObject)}.call(this),function(){var f,a,b,w,n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,p=[].slice,d=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};f=D.arraysAreEqual,b=D.normalizeRange,w=D.rangeIsCollapsed,a=D.getBlockConfig,D.Document=function(t){function e(t){null==t&&(t=[]),e.__super__.constructor.apply(this,arguments),0===t.length&&(t=[new D.Block]),this.blockList=D.SplittableList.box(t)}var h;return n(e,t),e.fromJSON=function(i){var o;return new this(function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(D.Block.fromJSON(o));return n}())},e.fromHTML=function(t,e){return D.HTMLParser.parse(t,e).getDocument()},e.fromString=function(t,e){var n;return n=D.Text.textForStringWithAttributes(t,e),new this([new D.Block(n)])},e.prototype.isEmpty=function(){var t;return 1===this.blockList.length&&((t=this.getBlockAtIndex(0)).isEmpty()&&!t.hasAttributes())},e.prototype.copy=function(t){var e;return null==t&&(t={}),e=t.consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray(),new this.constructor(e)},e.prototype.copyUsingObjectsFromDocument=function(t){var e;return e=new D.ObjectMap(t.getObjects()),this.copyUsingObjectMap(e)},e.prototype.copyUsingObjectMap=function(o){var r,t,s;return t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getBlocks()).length;t<e;t++)r=n[t],i.push((s=o.find(r))?s:r.copyUsingObjectMap(o));return i}.call(this),new this.constructor(t)},e.prototype.copyWithBaseBlockAttributes=function(o){var r,s,t;return null==o&&(o=[]),t=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.getBlocks()).length;t<e;t++)s=n[t],r=o.concat(s.getAttributes()),i.push(s.copyWithAttributes(r));return i}.call(this),new this.constructor(t)},e.prototype.replaceBlock=function(t,e){var n;return-1===(n=this.blockList.indexOf(t))?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))},e.prototype.insertDocumentAtRange=function(t,e){var n,i,o,r,s,a,u;return i=t.blockList,s=(e=b(e))[0],o=(a=this.locationFromPosition(s)).index,r=a.offset,n=(u=this).getBlockAtPosition(s),w(e)&&n.isEmpty()&&!n.hasAttributes()?u=new this.constructor(u.blockList.removeObjectAtIndex(o)):n.getBlockBreakPosition()===r&&s++,u=u.removeTextAtRange(e),new this.constructor(u.blockList.insertSplittableListAtPosition(i,s))},e.prototype.mergeDocumentAtRange=function(t,e){var n,i,o,r,s,a,u,c,l,h,p,d;return p=(e=b(e))[0],h=this.locationFromPosition(p),i=this.getBlockAtIndex(h.index).getAttributes(),n=t.getBaseBlockAttributes(),d=i.slice(-n.length),f(n,d)?(u=i.slice(0,-n.length),a=t.copyWithBaseBlockAttributes(u)):a=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(i),o=a.getBlockCount(),r=a.getBlockAtIndex(0),f(i,r.getAttributes())?(s=r.getTextWithoutBlockBreak(),l=this.insertTextAtRange(s,e),1<o&&(a=new this.constructor(a.getBlocks().slice(1)),c=p+s.getLength(),l=l.insertDocumentAtRange(a,c))):l=this.insertDocumentAtRange(a,e),l},e.prototype.insertTextAtRange=function(e,t){var n,i,o,r,s;return s=(t=b(t))[0],i=(r=this.locationFromPosition(s)).index,o=r.offset,n=this.removeTextAtRange(t),new this.constructor(n.blockList.editObjectAtIndex(i,function(t){return t.copyWithText(t.text.insertTextAtPosition(e,o))}))},e.prototype.removeTextAtRange=function(t){var e,n,i,o,r,s,a,u,c,l,h,p,d,f,m,g,y,v;return u=(l=t=b(t))[0],g=l[1],w(t)?this:(s=(h=this.locationRangeFromRange(t))[0],f=h[1],r=s.index,a=s.offset,o=this.getBlockAtIndex(r),d=f.index,m=f.offset,p=this.getBlockAtIndex(d),g-u==1&&o.getBlockBreakPosition()===a&&p.getBlockBreakPosition()!==m&&"\n"===p.text.getStringAtPosition(m)?i=this.blockList.editObjectAtIndex(d,function(t){return t.copyWithText(t.text.removeTextAtRange([m,m+1]))}):(c=o.text.getTextAtRange([0,a]),y=p.text.getTextAtRange([m,p.getLength()]),v=c.appendText(y),n=r!==d&&0===a&&o.getAttributeLevel()>=p.getAttributeLevel()?p.copyWithText(v):o.copyWithText(v),e=d+1-r,i=this.blockList.splice(r,e,n)),new this.constructor(i))},e.prototype.moveTextFromRangeToPosition=function(t,e){var n,i,o,r,s,a,u,c,l,h;return l=(a=t=b(t))[0],o=a[1],l<=e&&e<=o?this:(i=this.getDocumentAtRange(t),c=this.removeTextAtRange(t),(s=l<e)&&(e-=i.getLength()),r=(u=i.getBlocks())[0],0===(n=2<=u.length?p.call(u,1):[]).length?(h=r.getTextWithoutBlockBreak(),s&&(e+=1)):h=r.text,c=c.insertTextAtRange(h,e),0===n.length?c:(i=new this.constructor(n),e+=h.getLength(),c.insertDocumentAtRange(i,e)))},e.prototype.addAttributeAtRange=function(i,o,t){var r;return r=this.blockList,this.eachBlockAtRange(t,function(t,e,n){return r=r.editObjectAtIndex(n,function(){return a(i)?t.addAttribute(i,o):e[0]===e[1]?t:t.copyWithText(t.text.addAttributeAtRange(i,o,e))})}),new this.constructor(r)},e.prototype.addAttribute=function(n,i){var o;return o=this.blockList,this.eachBlock(function(t,e){return o=o.editObjectAtIndex(e,function(){return t.addAttribute(n,i)})}),new this.constructor(o)},e.prototype.removeAttributeAtRange=function(i,t){var o;return o=this.blockList,this.eachBlockAtRange(t,function(t,e,n){return a(i)?o=o.editObjectAtIndex(n,function(){return t.removeAttribute(i)}):e[0]!==e[1]?o=o.editObjectAtIndex(n,function(){return t.copyWithText(t.text.removeAttributeAtRange(i,e))}):void 0}),new this.constructor(o)},e.prototype.updateAttributesForAttachment=function(e,n){var t,i,o;return i=this.getRangeOfAttachment(n)[0],t=this.locationFromPosition(i).index,o=this.getTextAtIndex(t),new this.constructor(this.blockList.editObjectAtIndex(t,function(t){return t.copyWithText(o.updateAttributesForAttachment(e,n))}))},e.prototype.removeAttributeForAttachment=function(t,e){var n;return n=this.getRangeOfAttachment(e),this.removeAttributeAtRange(t,n)},e.prototype.insertBlockBreakAtRange=function(t){var e,n,i,o;return o=(t=b(t))[0],i=this.locationFromPosition(o).offset,n=this.removeTextAtRange(t),0===i&&(e=[new D.Block]),new this.constructor(n.blockList.insertSplittableListAtPosition(new D.SplittableList(e),o))},e.prototype.applyBlockAttributeAtRange=function(t,e,n){var i,o,r,s;return o=(r=this.expandRangeToLineBreaksAndSplitBlocks(n)).document,n=r.range,(i=a(t)).listAttribute?(o=(s=(o=o.removeLastListAttributeAtRange(n,{exceptAttributeName:t})).convertLineBreaksToBlockBreaksInRange(n)).document,n=s.range):o=i.exclusive?o.removeBlockAttributesAtRange(n):i.terminal?o.removeLastTerminalAttributeAtRange(n):o.consolidateBlocksAtRange(n),o.addAttributeAtRange(t,e,n)},e.prototype.removeLastListAttributeAtRange=function(t,o){var r;return null==o&&(o={}),r=this.blockList,this.eachBlockAtRange(t,function(t,e,n){var i;if((i=t.getLastAttribute())&&a(i).listAttribute&&i!==o.exceptAttributeName)return r=r.editObjectAtIndex(n,function(){return t.removeAttribute(i)})}),new this.constructor(r)},e.prototype.removeLastTerminalAttributeAtRange=function(t){var o;return o=this.blockList,this.eachBlockAtRange(t,function(t,e,n){var i;if((i=t.getLastAttribute())&&a(i).terminal)return o=o.editObjectAtIndex(n,function(){return t.removeAttribute(i)})}),new this.constructor(o)},e.prototype.removeBlockAttributesAtRange=function(t){var i;return i=this.blockList,this.eachBlockAtRange(t,function(t,e,n){return t.hasAttributes()?i=i.editObjectAtIndex(n,function(){return t.copyWithoutAttributes()}):void 0}),new this.constructor(i)},e.prototype.expandRangeToLineBreaksAndSplitBlocks=function(t){var e,n,i,o,r,s,a,u,c;return c=(s=t=b(t))[0],o=s[1],u=this.locationFromPosition(c),i=this.locationFromPosition(o),a=(e=this).getBlockAtIndex(u.index),null!=(u.offset=a.findLineBreakInDirectionFromPosition("backward",u.offset))&&(r=e.positionFromLocation(u),e=e.insertBlockBreakAtRange([r,r+1]),i.index+=1,i.offset-=e.getBlockAtIndex(u.index).getLength(),u.index+=1),(u.offset=0)===i.offset&&i.index>u.index?(i.index-=1,i.offset=e.getBlockAtIndex(i.index).getBlockBreakPosition()):("\n"===(n=e.getBlockAtIndex(i.index)).text.getStringAtRange([i.offset-1,i.offset])?i.offset-=1:i.offset=n.findLineBreakInDirectionFromPosition("forward",i.offset),i.offset!==n.getBlockBreakPosition()&&(r=e.positionFromLocation(i),e=e.insertBlockBreakAtRange([r,r+1]))),c=e.positionFromLocation(u),o=e.positionFromLocation(i),{document:e,range:t=b([c,o])}},e.prototype.convertLineBreaksToBlockBreaksInRange=function(t){var e,n,i;return n=(t=b(t))[0],i=this.getStringAtRange(t).slice(0,-1),e=this,i.replace(/.*?\n/g,function(t){return n+=t.length,e=e.insertBlockBreakAtRange([n-1,n])}),{document:e,range:t}},e.prototype.consolidateBlocksAtRange=function(t){var e,n,i,o,r;return r=(i=t=b(t))[0],n=i[1],o=this.locationFromPosition(r).index,e=this.locationFromPosition(n).index,new this.constructor(this.blockList.consolidateFromIndexToIndex(o,e))},e.prototype.getDocumentAtRange=function(t){var e;return t=b(t),e=this.blockList.getSplittableListInRange(t).toArray(),new this.constructor(e)},e.prototype.getStringAtRange=function(t){var e,n;return(n=t=b(t))[n.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)},e.prototype.getBlockAtIndex=function(t){return this.blockList.getObjectAtIndex(t)},e.prototype.getBlockAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getBlockAtIndex(e)},e.prototype.getTextAtIndex=function(t){var e;return null!=(e=this.getBlockAtIndex(t))?e.text:void 0},e.prototype.getTextAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getTextAtIndex(e)},e.prototype.getPieceAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getPieceAtPosition(n)},e.prototype.getCharacterAtPosition=function(t){var e,n,i;return e=(i=this.locationFromPosition(t)).index,n=i.offset,this.getTextAtIndex(e).getStringAtRange([n,n+1])},e.prototype.getLength=function(){return this.blockList.getEndPosition()},e.prototype.getBlocks=function(){return this.blockList.toArray()},e.prototype.getBlockCount=function(){return this.blockList.length},e.prototype.getEditCount=function(){return this.editCount},e.prototype.eachBlock=function(t){return this.blockList.eachObject(t)},e.prototype.eachBlockAtRange=function(t,e){var n,i,o,r,s,a,u,c,l,h,p,d;if(p=(a=t=b(t))[0],o=a[1],h=this.locationFromPosition(p),i=this.locationFromPosition(o),h.index===i.index)return n=this.getBlockAtIndex(h.index),d=[h.offset,i.offset],e(n,d,h.index);for(l=[],s=r=u=h.index,c=i.index;u<=c?r<=c:c<=r;s=u<=c?++r:--r)(n=this.getBlockAtIndex(s))?(d=function(){switch(s){case h.index:return[h.offset,n.text.getLength()];case i.index:return[0,i.offset];default:return[0,n.text.getLength()]}}(),l.push(e(n,d,s))):l.push(void 0);return l},e.prototype.getCommonAttributesAtRange=function(t){var n,e,i;return e=(t=b(t))[0],w(t)?this.getCommonAttributesAtPosition(e):(i=[],n=[],this.eachBlockAtRange(t,function(t,e){return e[0]!==e[1]?(i.push(t.text.getCommonAttributesAtRange(e)),n.push(h(t))):void 0}),D.Hash.fromCommonAttributesOfObjects(i).merge(D.Hash.fromCommonAttributesOfObjects(n)).toObject())},e.prototype.getCommonAttributesAtPosition=function(t){var e,n,i,o,r,s,a,u,c,l;if(r=(c=this.locationFromPosition(t)).index,u=c.offset,!(i=this.getBlockAtIndex(r)))return{};for(a in o=h(i),e=i.text.getAttributesAtPosition(u),n=i.text.getAttributesAtPosition(u-1),s=function(){var t,e;for(a in e=[],t=D.config.textAttributes)(l=t[a]).inheritable&&e.push(a);return e}(),n)((l=n[a])===e[a]||0<=d.call(s,a))&&(o[a]=l);return o},e.prototype.getRangeOfCommonAttributeAtPosition=function(t,e){var n,i,o,r,s,a,u,c;return o=(s=this.locationFromPosition(e)).index,r=s.offset,c=(a=this.getTextAtIndex(o).getExpandedRangeForAttributeAtOffset(t,r))[0],i=a[1],u=this.positionFromLocation({index:o,offset:c}),n=this.positionFromLocation({index:o,offset:i}),b([u,n])},e.prototype.getBaseBlockAttributes=function(){var i,o,t,e,r,s,n;for(i=this.getBlockAtIndex(0).getAttributes(),t=e=1,n=this.getBlockCount();1<=n?e<n:n<e;t=1<=n?++e:--e)o=this.getBlockAtIndex(t).getAttributes(),s=Math.min(i.length,o.length),i=function(){var t,e,n;for(n=[],r=t=0,e=s;(0<=e?t<e:e<t)&&o[r]===i[r];r=0<=e?++t:--t)n.push(o[r]);return n}();return i},h=function(t){var e,n;return n={},(e=t.getLastAttribute())&&(n[e]=!0),n},e.prototype.getAttachmentById=function(t){var e,n,i,o;for(n=0,i=(o=this.getAttachments()).length;n<i;n++)if((e=o[n]).id===t)return e},e.prototype.getAttachmentPieces=function(){var n;return n=[],this.blockList.eachObject(function(t){var e;return e=t.text,n=n.concat(e.getAttachmentPieces())}),n},e.prototype.getAttachments=function(){var t,e,n,i,o;for(o=[],t=0,e=(i=this.getAttachmentPieces()).length;t<e;t++)n=i[t],o.push(n.attachment);return o},e.prototype.getRangeOfAttachment=function(t){var e,n,i,o,r,s,a;for(n=e=o=0,i=(r=this.blockList.toArray()).length;e<i;n=++e){if(a=(s=r[n].text).getRangeOfAttachment(t))return b([o+a[0],o+a[1]]);o+=s.getLength()}},e.prototype.getLocationRangeOfAttachment=function(t){var e;return e=this.getRangeOfAttachment(t),this.locationRangeFromRange(e)},e.prototype.getAttachmentPieceForAttachment=function(t){var e,n,i,o;for(e=0,n=(o=this.getAttachmentPieces()).length;e<n;e++)if((i=o[e]).attachment===t)return i},e.prototype.findRangesForBlockAttribute=function(t){var e,n,i,o,r,s,a;for(s=[],n=r=0,i=(a=this.getBlocks()).length;n<i;n++)o=(e=a[n]).getLength(),e.hasAttribute(t)&&s.push([r,r+o]),r+=o;return s},e.prototype.findRangesForTextAttribute=function(e,t){var n,i,o,r,s,a,u,c,l,h;for(h=(null!=t?t:{}).withValue,u=[],c=[],r=function(t){return null!=h?t.getAttribute(e)===h:t.hasAttribute(e)},n=a=0,i=(l=this.getPieces()).length;n<i;n++)o=(s=l[n]).getLength(),r(s)&&(u[1]===a?u[1]=a+o:c.push(u=[a,a+o])),a+=o;return c},e.prototype.locationFromPosition=function(t){var e,n;return null!=(n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t))).index?n:{index:(e=this.getBlocks()).length-1,offset:e[e.length-1].getLength()}},e.prototype.positionFromLocation=function(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},e.prototype.locationRangeFromPosition=function(t){return b(this.locationFromPosition(t))},e.prototype.locationRangeFromRange=function(t){var e,n,i,o;if(t=b(t))return o=t[0],n=t[1],i=this.locationFromPosition(o),e=this.locationFromPosition(n),b([i,e])},e.prototype.rangeFromLocationRange=function(t){var e,n;return t=b(t),e=this.positionFromLocation(t[0]),w(t)||(n=this.positionFromLocation(t[1])),b([e,n])},e.prototype.isEqualTo=function(
t){return this.blockList.isEqualTo(null!=t?t.blockList:void 0)},e.prototype.getTexts=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.getBlocks()).length;e<n;e++)t=i[e],o.push(t.text);return o},e.prototype.getPieces=function(){var t,e,n,i,o;for(n=[],t=0,e=(i=this.getTexts()).length;t<e;t++)o=i[t],n.push.apply(n,o.getPieces());return n},e.prototype.getObjects=function(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())},e.prototype.toSerializableDocument=function(){var e;return e=[],this.blockList.eachObject(function(t){return e.push(t.copyWithText(t.text.toSerializableText()))}),new this.constructor(e)},e.prototype.toString=function(){return this.blockList.toString()},e.prototype.toJSON=function(){return this.blockList.toJSON()},e.prototype.toConsole=function(){var o;return JSON.stringify(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.blockList.toArray()).length;t<e;t++)o=n[t],i.push(JSON.parse(o.text.toConsole()));return i}.call(this))},e}(D.Object)}.call(this),function(){D.LineBreakInsertion=function(){function t(t){var e;this.composition=t,this.document=this.composition.document,e=this.composition.getSelectedRange(),this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}return t.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter},t.prototype.shouldBreakFormattedBlock=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)},t.prototype.shouldDecreaseListLevel=function(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()},t.prototype.shouldPrependListItem=function(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()},t}()}.call(this),function(){var i,o,s,r,a,u,c,l,h,p,d=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;u=D.normalizeRange,h=D.rangesAreEqual,l=D.rangeIsCollapsed,c=D.objectsAreEqual,i=D.arrayStartsWith,p=D.summarizeArrayChange,s=D.getAllAttributeNames,r=D.getBlockConfig,a=D.getTextConfig,o=D.extend,D.Composition=function(t){function e(){this.document=new D.Document,this.attachments=[],this.currentAttributes={},this.revision=0}var n;return d(e,t),e.prototype.setDocument=function(t){var e;return t.isEqualTo(this.document)?void 0:(this.document=t,this.refreshAttachments(),this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):void 0)},e.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.getSelectedRange()}},e.prototype.loadSnapshot=function(t){var e,n,i,o;return e=t.document,o=t.selectedRange,null!=(n=this.delegate)&&"function"==typeof n.compositionWillLoadSnapshot&&n.compositionWillLoadSnapshot(),this.setDocument(null!=e?e:new D.Document),this.setSelection(null!=o?o:[0,0]),null!=(i=this.delegate)&&"function"==typeof i.compositionDidLoadSnapshot?i.compositionDidLoadSnapshot():void 0},e.prototype.insertText=function(t,e){var n,i,o,r;return r=(null!=e?e:{updatePosition:!0}).updatePosition,i=this.getSelectedRange(),this.setDocument(this.document.insertTextAtRange(t,i)),n=(o=i[0])+t.getLength(),r&&this.setSelection(n),this.notifyDelegateOfInsertionAtRange([o,n])},e.prototype.insertBlock=function(t){var e;return null==t&&(t=new D.Block),e=new D.Document([t]),this.insertDocument(e)},e.prototype.insertDocument=function(t){var e,n,i;return null==t&&(t=new D.Document),n=this.getSelectedRange(),this.setDocument(this.document.insertDocumentAtRange(t,n)),e=(i=n[0])+t.getLength(),this.setSelection(e),this.notifyDelegateOfInsertionAtRange([i,e])},e.prototype.insertString=function(t,e){var n,i;return n=this.getCurrentTextAttributes(),i=D.Text.textForStringWithAttributes(t,n),this.insertText(i,e)},e.prototype.insertBlockBreak=function(){var t,e,n;return e=this.getSelectedRange(),this.setDocument(this.document.insertBlockBreakAtRange(e)),t=(n=e[0])+1,this.setSelection(t),this.notifyDelegateOfInsertionAtRange([n,t])},e.prototype.insertLineBreak=function(){var t,e;return(e=new D.LineBreakInsertion(this)).shouldDecreaseListLevel()?(this.decreaseListLevel(),this.setSelection(e.startPosition)):e.shouldPrependListItem()?(t=new D.Document([e.block.copyWithoutText()]),this.insertDocument(t)):e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString("\n")},e.prototype.insertHTML=function(t){var e,n,i,o;return e=D.Document.fromHTML(t),i=this.getSelectedRange(),this.setDocument(this.document.mergeDocumentAtRange(e,i)),n=(o=i[0])+e.getLength()-1,this.setSelection(n),this.notifyDelegateOfInsertionAtRange([o,n])},e.prototype.replaceHTML=function(t){var e,n,i;return e=D.Document.fromHTML(t).copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),i=this.document.rangeFromLocationRange(n),this.setDocument(e),this.setSelection(i)},e.prototype.insertFile=function(t){return this.insertFiles([t])},e.prototype.insertFiles=function(t){var e,n,i,o,r,s;for(n=[],o=0,r=t.length;o<r;o++)i=t[o],(null!=(s=this.delegate)?s.compositionShouldAcceptFile(i):void 0)&&(e=D.Attachment.attachmentForFile(i),n.push(e));return this.insertAttachments(n)},e.prototype.insertAttachment=function(t){return this.insertAttachments([t])},e.prototype.insertAttachments=function(t){var e,n,i,o,r,s,a,u,c;for(u=new D.Text,o=0,r=t.length;o<r;o++)c=(e=t[o]).getType(),s=null!=(a=D.config.attachments[c])?a.presentation:void 0,i=this.getCurrentTextAttributes(),s&&(i.presentation=s),n=D.Text.textForAttachmentWithAttributes(e,i),u=u.appendText(n);return this.insertText(u)},e.prototype.deleteInDirection=function(t){var e,n,i,o,r,s,a;return o=this.getLocationRange(),r=this.getSelectedRange(),(s=l(r))?i="backward"===t&&0===o[0].offset:a=o[0].index!==o[1].index,!(i&&this.canDecreaseBlockAttributeLevel()&&((n=this.getBlock()).isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(r[0]),n.isEmpty()))&&(s&&(r=this.getExpandedRangeInDirection(t),"backward"===t&&(e=this.getAttachmentAtRange(r))),e?(this.editAttachment(e),!1):(this.setDocument(this.document.removeTextAtRange(r)),this.setSelection(r[0]),!i&&!a&&void 0))},e.prototype.moveTextFromRange=function(t){var e;return e=this.getSelectedRange()[0],this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)},e.prototype.removeAttachment=function(t){var e;return(e=this.document.getRangeOfAttachment(t))?(this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])):void 0},e.prototype.removeLastBlockAttribute=function(){var t,e,n,i;return i=(n=this.getSelectedRange())[0],e=n[1],t=this.document.getBlockAtPosition(e),this.removeCurrentAttribute(t.getLastAttribute()),this.setSelection(i)},n=" ",e.prototype.insertPlaceholder=function(){return this.placeholderPosition=this.getPosition(),this.insertString(n)},e.prototype.selectPlaceholder=function(){return null!=this.placeholderPosition?(this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+n.length]),this.getSelectedRange()):void 0},e.prototype.forgetPlaceholder=function(){return this.placeholderPosition=null},e.prototype.hasCurrentAttribute=function(t){var e;return null!=(e=this.currentAttributes[t])&&!1!==e},e.prototype.toggleCurrentAttribute=function(t){var e;return(e=!this.currentAttributes[t])?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)},e.prototype.canSetCurrentAttribute=function(t){return r(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)},e.prototype.canSetCurrentTextAttribute=function(){var t,e,n,i;if(t=this.getSelectedDocument()){for(e=0,n=(i=t.getAttachments()).length;e<n;e++)if(!i[e].hasContent())return!1;return!0}},e.prototype.canSetCurrentBlockAttribute=function(){var t;if(t=this.getBlock())return!t.isTerminalBlock()},e.prototype.setCurrentAttribute=function(t,e){return r(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())},e.prototype.setTextAttribute=function(t,e){var n,i;if(n=this.getSelectedRange())return n[0]!==n[1]?this.setDocument(this.document.addAttributeAtRange(t,e,n)):"href"===t?(i=D.Text.textForStringWithAttributes(e,{href:e}),this.insertText(i)):void 0},e.prototype.setBlockAttribute=function(t,e){var n;if(n=this.getSelectedRange())return this.canSetCurrentAttribute(t)?(this.getBlock(),this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)):void 0},e.prototype.removeCurrentAttribute=function(t){return r(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())},e.prototype.removeTextAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},e.prototype.removeBlockAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},e.prototype.canDecreaseNestingLevel=function(){var t;return 0<(null!=(t=this.getBlock())?t.getNestingLevel():void 0)},e.prototype.canIncreaseNestingLevel=function(){var t,e,n;if(t=this.getBlock())return null!=(n=r(t.getLastNestableAttribute()))&&n.listAttribute?(e=this.getPreviousBlock())?i(e.getListItemAttributes(),t.getListItemAttributes()):void 0:0<t.getNestingLevel()},e.prototype.decreaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))},e.prototype.increaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))},e.prototype.canDecreaseBlockAttributeLevel=function(){var t;return 0<(null!=(t=this.getBlock())?t.getAttributeLevel():void 0)},e.prototype.decreaseBlockAttributeLevel=function(){var t,e;return(t=null!=(e=this.getBlock())?e.getLastAttribute():void 0)?this.removeCurrentAttribute(t):void 0},e.prototype.decreaseListLevel=function(){var t,e,n,i,o,r;for(r=this.getSelectedRange()[0],n=o=this.document.locationFromPosition(r).index,t=this.getBlock().getAttributeLevel();(e=this.document.getBlockAtIndex(n+1))&&e.isListItem()&&e.getAttributeLevel()>t;)n++;return r=this.document.positionFromLocation({index:o,offset:0}),i=this.document.positionFromLocation({index:n,offset:0}),this.setDocument(this.document.removeLastListAttributeAtRange([r,i]))},e.prototype.updateCurrentAttributes=function(){var t,e,n,i,o,r;if(r=this.getSelectedRange({ignoreLock:!0})){for(e=this.document.getCommonAttributesAtRange(r),n=0,i=(o=s()).length;n<i;n++)e[t=o[n]]||this.canSetCurrentAttribute(t)||(e[t]=!1);if(!c(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}},e.prototype.getCurrentAttributes=function(){return o.call({},this.currentAttributes)},e.prototype.getCurrentTextAttributes=function(){var t,e,n,i;for(e in t={},n=this.currentAttributes)i=n[e],a(e)&&(t[e]=i);return t},e.prototype.freezeSelection=function(){return this.setCurrentAttribute("frozen",!0)},e.prototype.thawSelection=function(){return this.removeCurrentAttribute("frozen")},e.prototype.hasFrozenSelection=function(){return this.hasCurrentAttribute("frozen")},e.proxyMethod("getSelectionManager().getPointRange"),e.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),e.proxyMethod("getSelectionManager().locationIsCursorTarget"),e.proxyMethod("getSelectionManager().selectionIsExpanded"),e.proxyMethod("delegate?.getSelectionManager"),e.prototype.setSelection=function(t){var e,n;return e=this.document.locationRangeFromRange(t),null!=(n=this.delegate)?n.compositionDidRequestChangingSelectionToLocationRange(e):void 0},e.prototype.getSelectedRange=function(){var t;return(t=this.getLocationRange())?this.document.rangeFromLocationRange(t):void 0},e.prototype.setSelectedRange=function(t){var e;return e=this.document.locationRangeFromRange(t),this.getSelectionManager().setLocationRange(e)},e.prototype.getPosition=function(){var t;return(t=this.getLocationRange())?this.document.positionFromLocation(t[0]):void 0},e.prototype.getLocationRange=function(t){var e;return null!=(e=this.getSelectionManager().getLocationRange(t))?e:u({index:0,offset:0})},e.prototype.getExpandedRangeInDirection=function(t){var e,n,i;return i=(n=this.getSelectedRange())[0],e=n[1],"backward"===t?i=this.translateUTF16PositionFromOffset(i,-1):e=this.translateUTF16PositionFromOffset(e,1),u([i,e])},e.prototype.moveCursorInDirection=function(t){var e,n,i,o;return this.editingAttachment?i=this.document.getRangeOfAttachment(this.editingAttachment):(o=this.getSelectedRange(),i=this.getExpandedRangeInDirection(t),n=!h(o,i)),this.setSelectedRange("backward"===t?i[0]:i[1]),n&&(e=this.getAttachmentAtRange(i))?this.editAttachment(e):void 0},e.prototype.expandSelectionInDirection=function(t){var e;return e=this.getExpandedRangeInDirection(t),this.setSelectedRange(e)},e.prototype.expandSelectionForEditing=function(){return this.hasCurrentAttribute("href")?this.expandSelectionAroundCommonAttribute("href"):void 0},e.prototype.expandSelectionAroundCommonAttribute=function(t){var e,n;return e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e),this.setSelectedRange(n)},e.prototype.selectionIsInCursorTarget=function(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())},e.prototype.positionIsCursorTarget=function(t){var e;return(e=this.document.locationFromPosition(t))?this.locationIsCursorTarget(e):void 0},e.prototype.positionIsBlockBreak=function(t){var e;return null!=(e=this.document.getPieceAtPosition(t))?e.isBlockBreak():void 0},e.prototype.getSelectedDocument=function(){var t;return(t=this.getSelectedRange())?this.document.getDocumentAtRange(t):void 0},e.prototype.getAttachments=function(){return this.attachments.slice(0)},e.prototype.refreshAttachments=function(){var t,e,n,i,o,r,s,a,u,c,l,h;for(n=this.document.getAttachments(),t=(a=p(this.attachments,n)).added,l=a.removed,this.attachments=n,i=0,r=l.length;i<r;i++)((e=l[i]).delegate=null)!=(u=this.delegate)&&"function"==typeof u.compositionDidRemoveAttachment&&u.compositionDidRemoveAttachment(e);for(h=[],o=0,s=t.length;o<s;o++)(e=t[o]).delegate=this,h.push(null!=(c=this.delegate)&&"function"==typeof c.compositionDidAddAttachment?c.compositionDidAddAttachment(e):void 0);return h},e.prototype.attachmentDidChangeAttributes=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):void 0},e.prototype.attachmentDidChangePreviewURL=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):void 0},e.prototype.editAttachment=function(t,e){var n;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null!=(n=this.delegate)&&"function"==typeof n.compositionDidStartEditingAttachment?n.compositionDidStartEditingAttachment(this.editingAttachment,e):void 0},e.prototype.stopEditingAttachment=function(){var t;if(this.editingAttachment)return null!=(t=this.delegate)&&"function"==typeof t.compositionDidStopEditingAttachment&&t.compositionDidStopEditingAttachment(this.editingAttachment),this.editingAttachment=null},e.prototype.updateAttributesForAttachment=function(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))},e.prototype.removeAttributeForAttachment=function(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))},e.prototype.breakFormattedBlock=function(t){var e,n,i,o,r;return n=t.document,e=t.block,r=[(o=t.startPosition)-1,o],e.getBlockBreakPosition()===t.startLocation.offset?(e.breaksOnReturn()&&"\n"===t.nextCharacter?o+=1:n=n.removeTextAtRange(r),r=[o,o]):"\n"===t.nextCharacter?"\n"===t.previousCharacter?r=[o-1,o+1]:(r=[o,o+1],o+=1):t.startLocation.offset-1!=0&&(o+=1),i=new D.Document([e.removeLastAttribute().copyWithoutText()]),this.setDocument(n.insertDocumentAtRange(i,r)),this.setSelection(o)},e.prototype.getPreviousBlock=function(){var t,e;return(e=this.getLocationRange())&&0<(t=e[0].index)?this.document.getBlockAtIndex(t-1):void 0},e.prototype.getBlock=function(){var t;return(t=this.getLocationRange())?this.document.getBlockAtIndex(t[0].index):void 0},e.prototype.getAttachmentAtRange=function(t){var e;return(e=this.document.getDocumentAtRange(t)).toString()===D.OBJECT_REPLACEMENT_CHARACTER+"\n"?e.getAttachments()[0]:void 0},e.prototype.notifyDelegateOfCurrentAttributesChange=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(this.currentAttributes):void 0},e.prototype.notifyDelegateOfInsertionAtRange=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):void 0},e.prototype.translateUTF16PositionFromOffset=function(t,e){var n,i;return n=(i=this.document.toUTF16String()).offsetFromUCS2Offset(t),i.offsetToUCS2Offset(n+e)},e}(D.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.UndoManager=function(t){function e(t){this.composition=t,this.undoEntries=[],this.redoEntries=[]}var a;return n(e,t),e.prototype.recordUndoEntry=function(t,e){var n,i,o,r,s;return i=(r=null!=e?e:{}).context,n=r.consolidatable,o=this.undoEntries.slice(-1)[0],n&&a(o,t,i)?void 0:(s=this.createEntry({description:t,context:i}),this.undoEntries.push(s),this.redoEntries=[])},e.prototype.undo=function(){var t,e;return(e=this.undoEntries.pop())?(t=this.createEntry(e),this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)):void 0},e.prototype.redo=function(){var t,e;return(t=this.redoEntries.pop())?(e=this.createEntry(t),this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)):void 0},e.prototype.canUndo=function(){return 0<this.undoEntries.length},e.prototype.canRedo=function(){return 0<this.redoEntries.length},e.prototype.createEntry=function(t){var e,n,i;return n=(i=null!=t?t:{}).description,e=i.context,{description:null!=n?n.toString():void 0,context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}},a=function(t,e,n){return(null!=t?t.description:void 0)===(null!=e?e.toString():void 0)&&(null!=t?t.context:void 0)===JSON.stringify(n)},e}(D.BasicObject)}.call(this),function(){var n;D.attachmentGalleryFilter=function(t){var e;return(e=new n(t)).perform(),e.getSnapshot()},n=function(){function t(t){this.document=t.document,this.selectedRange=t.selectedRange}var s,e,n;return s="attachmentGallery",e="presentation",n="gallery",t.prototype.perform=function(){return this.removeBlockAttribute(),this.applyBlockAttribute()},t.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.selectedRange}},t.prototype.removeBlockAttribute=function(){var t,e,n,i,o;for(o=[],t=0,e=(i=this.findRangesOfBlocks()).length;t<e;t++)n=i[t],o.push(this.document=this.document.removeAttributeAtRange(s,n));return o},t.prototype.applyBlockAttribute=function(){var t,e,n,i,o,r;for(r=[],t=n=0,e=(o=this.findRangesOfPieces()).length;t<e;t++)1<(i=o[t])[1]-i[0]&&(i[0]+=n,i[1]+=n,"\n"!==this.document.getCharacterAtPosition(i[1])&&(this.document=this.document.insertBlockBreakAtRange(i[1]),i[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),i[1]++,n++),0!==i[0]&&"\n"!==this.document.getCharacterAtPosition(i[0]-1)&&(this.document=this.document.insertBlockBreakAtRange(i[0]),i[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),i[0]++,n++),r.push(this.document=this.document.applyBlockAttributeAtRange(s,!0,i)));return r},t.prototype.findRangesOfBlocks=function(){return this.document.findRangesForBlockAttribute(s)},t.prototype.findRangesOfPieces=function(){return this.document.findRangesForTextAttribute(e,{withValue:n})},t.prototype.moveSelectedRangeForward=function(){return this.selectedRange[0]+=1,this.selectedRange[1]+=1},t}()}.call(this),function(){D.Editor=function(){function t(t,e,n){this.composition=t,this.selectionManager=e,this.element=n,this.undoManager=new D.UndoManager(this.composition),this.filters=i.slice(0)}var i;return i=[D.attachmentGalleryFilter],t.prototype.loadDocument=function(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})},t.prototype.loadHTML=function(t){return null==t&&(t=""),this.loadDocument(D.Document.fromHTML(t,{referenceElement:this.element}))},t.prototype.loadJSON=function(t){var e,n;return e=t.document,n=t.selectedRange,e=D.Document.fromJSON(e),this.loadSnapshot({document:e,selectedRange:n})},t.prototype.loadSnapshot=function(t){return this.undoManager=new D.UndoManager(this.composition),this.composition.loadSnapshot(t)},t.prototype.getDocument=function(){return this.composition.document},t.prototype.getSelectedDocument=function(){return this.composition.getSelectedDocument()},t.prototype.getSnapshot=function(){return this.composition.getSnapshot()},t.prototype.toJSON=function(){return this.getSnapshot()},t.prototype.deleteInDirection=function(t){return this.composition.deleteInDirection(t)},t.prototype.insertAttachment=function(t){return this.composition.insertAttachment(t)},t.prototype.insertDocument=function(t){return this.composition.insertDocument(t)},t.prototype.insertFile=function(t){return this.composition.insertFile(t)},t.prototype.insertFiles=function(t){return this.composition.insertFiles(t)},t.prototype.insertHTML=function(t){return this.composition.insertHTML(t)},t.prototype.insertString=function(t){return this.composition.insertString(t)},t.prototype.insertText=function(t){return this.composition.insertText(t)},t.prototype.insertLineBreak=function(){return this.composition.insertLineBreak()},t.prototype.getSelectedRange=function(){return this.composition.getSelectedRange()},t.prototype.getPosition=function(){return this.composition.getPosition()},t.prototype.getClientRectAtPosition=function(t){var e;return e=this.getDocument().locationRangeFromRange([t,t+1]),this.selectionManager.getClientRectAtLocationRange(e)},t.prototype.expandSelectionInDirection=function(t){return this.composition.expandSelectionInDirection(t)},t.prototype.moveCursorInDirection=function(t){return this.composition.moveCursorInDirection(t)},t.prototype.setSelectedRange=function(t){return this.composition.setSelectedRange(t)},t.prototype.activateAttribute=function(t,e){return null==e&&(e=!0),this.composition.setCurrentAttribute(t,e)},t.prototype.attributeIsActive=function(t){return this.composition.hasCurrentAttribute(t)},t.prototype.canActivateAttribute=function(t){return this.composition.canSetCurrentAttribute(t)},t.prototype.deactivateAttribute=function(t){return this.composition.removeCurrentAttribute(t)},t.prototype.canDecreaseNestingLevel=function(){return this.composition.canDecreaseNestingLevel()},t.prototype.canIncreaseNestingLevel=function(){return this.composition.canIncreaseNestingLevel()},t.prototype.decreaseNestingLevel=function(){return this.canDecreaseNestingLevel()?this.composition.decreaseNestingLevel():void 0},t.prototype.increaseNestingLevel=function(){return this.canIncreaseNestingLevel()?this.composition.increaseNestingLevel():void 0},t.prototype.canRedo=function(){return this.undoManager.canRedo()},t.prototype.canUndo=function(){return this.undoManager.canUndo()},t.prototype.recordUndoEntry=function(t,e){var n,i,o;return i=(o=null!=e?e:{}).context,n=o.consolidatable,this.undoManager.recordUndoEntry(t,{context:i,consolidatable:n})},t.prototype.redo=function(){return this.canRedo()?this.undoManager.redo():void 0},t.prototype.undo=function(){return this.canUndo()?this.undoManager.undo():void 0},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.ManagedAttachment=function(t){function e(t,e){var n;this.attachmentManager=t,this.attachment=e,n=this.attachment,this.id=n.id,this.file=n.file}return n(e,t),e.prototype.remove=function(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)},e.proxyMethod("attachment.getAttribute"),e.proxyMethod("attachment.hasAttribute"),e.proxyMethod("attachment.setAttribute"),e.proxyMethod("attachment.getAttributes"),e.proxyMethod("attachment.setAttributes"),e.proxyMethod("attachment.isPending"),e.proxyMethod("attachment.isPreviewable"),e.proxyMethod("attachment.getURL"),e.proxyMethod("attachment.getHref"),e.proxyMethod("attachment.getFilename"),e.proxyMethod("attachment.getFilesize"),e.proxyMethod("attachment.getFormattedFilesize"),e.proxyMethod("attachment.getExtension"),e.proxyMethod("attachment.getContentType"),e.proxyMethod("attachment.getFile"),e.proxyMethod("attachment.setFile"),e.proxyMethod("attachment.releaseFile"),e.proxyMethod("attachment.getUploadProgress"),e.proxyMethod("attachment.setUploadProgress"),e}(D.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;D.AttachmentManager=function(t){function e(t){var e,n,i;for(null==t&&(t=[]),this.managedAttachments={},n=0,i=t.length;n<i;n++)e=t[n],this.manageAttachment(e)}return n(e,t),e.prototype.getAttachments=function(){var t,e,n,i;for(e in i=[],n=this.managedAttachments)t=n[e],i.push(t);return i},e.prototype.manageAttachment=function(t){var e,n;return null!=(e=this.managedAttachments)[n=t.id]?e[n]:e[n]=new D.ManagedAttachment(this,t)},e.prototype.attachmentIsManaged=function(t){return t.id in this.managedAttachments},e.prototype.requestRemovalOfAttachment=function(t){var e;return this.attachmentIsManaged(t)&&null!=(e=this.delegate)&&"function"==typeof e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):void 0},e.prototype.unmanageAttachment=function(t){var e;return e=this.managedAttachments[t.id],delete this.managedAttachments[t.id],e},e}(D.BasicObject)}.call(this),function(){var p,d,n,a,f,u,m,i,g,o,y;p=D.elementContainsNode,d=D.findChildIndexOfNode,f=D.nodeIsBlockStart,u=D.nodeIsBlockStartComment,a=D.nodeIsBlockContainer,m=D.nodeIsCursorTarget,i=D.nodeIsEmptyTextNode,g=D.nodeIsTextNode,n=D.nodeIsAttachmentElement,o=D.tagName,y=D.walkTree,D.LocationMapper=function(){function t(t){this.element=t}var s,l,h,e;return t.prototype.findLocationFromContainerAndOffset=function(t,e,n){var i,o,r,s,a,u,c;for(u=(null!=n?n:{strict:!0}).strict,r=!1,s={index:o=0,offset:0},(i=this.findAttachmentElementParentForNode(t))&&(t=i.parentNode,e=d(i)),c=y(this.element,{usingFilter:h});c.nextNode();){if((a=c.currentNode)===t&&g(t)){m(a)||(s.offset+=e);break}if(a.parentNode===t){if(o++===e)break}else if(!p(t,a)&&0<o)break;f(a,{strict:u})?(r&&s.index++,r=!(s.offset=0)):s.offset+=l(a)}return s},t.prototype.findContainerAndOffsetFromLocation=function(t){var e,n,i,o,r;if(0===t.index&&0===t.offset){for(e=this.element,o=0;e.firstChild;)if(e=e.firstChild,a(e)){o=1;break}return[e,o]}if(n=(r=this.findNodeAndOffsetFromLocation(t))[0],i=r[1],n){if(g(n))0===l(n)?(e=n.parentNode.parentNode,o=d(n.parentNode),m(n,{name:"right"})&&o++):(e=n,o=t.offset-i);else{if(e=n.parentNode,!f(n.previousSibling)&&!a(e))for(;n===e.lastChild&&(e=(n=e).parentNode,!a(e)););o=d(n),0!==t.offset&&o++}return[e,o]}},t.prototype.findNodeAndOffsetFromLocation=function(t){var e,n,i,o,r,s,a,u;for(n=a=0,i=(u=this.getSignificantNodesForIndex(t.index)).length;n<i;n++){if(e=u[n],o=l(e),t.offset<=a+o)if(g(e)){if(r=e,s=a,t.offset===s&&m(r))break}else r||(r=e,s=a);if((a+=o)>t.offset)break}return[r,s]},t.prototype.findAttachmentElementParentForNode=function(t){for(;t&&t!==this.element;){if(n(t))return t;t=t.parentNode}},t.prototype.getSignificantNodesForIndex=function(t){var e,n,i,o,r;for(i=[],r=y(this.element,{usingFilter:s}),o=!1;r.nextNode();)if(n=r.currentNode,u(n)){if(null!=e?e++:e=0,e===t)o=!0;else if(o)break}else o&&i.push(n);return i},l=function(t){return t.nodeType===Node.TEXT_NODE?m(t)?0:t.textContent.length:"br"===o(t)||n(t)?1:0},s=function(t){return e(t)===NodeFilter.FILTER_ACCEPT?h(t):NodeFilter.FILTER_REJECT},e=function(t){return i(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},h=function(t){return n(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},t}()}.call(this),function(){var l,h,n=[].slice;l=D.getDOMRange,h=D.setDOMRange,D.PointMapper=function(){function t(){}return t.prototype.createDOMRangeFromPoint=function(t){var e,n,i,o,r,s,a,u;if(a=t.x,u=t.y,document.caretPositionFromPoint)return i=(r=document.caretPositionFromPoint(a,u)).offsetNode,n=r.offset,(e=document.createRange()).setStart(i,n),e;if(document.caretRangeFromPoint)return document.caretRangeFromPoint(a,u);if(document.body.createTextRange){o=l();try{(s=document.body.createTextRange()).moveToPoint(a,u),s.select()}catch(c){}return e=l(),h(o),e}},t.prototype.getClientRectsForDOMRange=function(t){var e;return[(e=n.call(t.getClientRects()))[0],e[e.length-1]]},t}()}.call(this),function(){var i,o=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=D.getDOMRange,D.SelectionChangeObserver=function(t){function e(){this.run=o(this.run,this),this.update=o(this.update,this),this.selectionManagers=[]}var n;return r(e,t),e.prototype.start=function(){return this.started?void 0:(this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run())},e.prototype.stop=function(){return this.started?(this.started=!1,document.removeEventListener("selectionchange",this.update,!0)):void 0},e.prototype.registerSelectionManager=function(t){return a.call(this.selectionManagers,t)<0?(this.selectionManagers.push(t),this.start()):void 0},e.prototype.unregisterSelectionManager=function(o){var r;return this.selectionManagers=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.selectionManagers).length;t<e;t++)(r=n[t])!==o&&i.push(r);return i}.call(this),0===this.selectionManagers.length?this.stop():void 0},e.prototype.notifySelectionManagersOfSelectionChange=function(){var t,e,n,i,o;for(i=[],t=0,e=(n=this.selectionManagers).length;t<e;t++)o=n[t],i.push(o.selectionDidChange());return i},e.prototype.update=function(){var t;return t=i(),n(t,this.domRange)?void 0:(this.domRange=t,this.notifySelectionManagersOfSelectionChange())},e.prototype.reset=function(){return this.domRange=null,this.update()},e.prototype.run=function(){return this.started?(this.update(),requestAnimationFrame(this.run)):void 0},n=function(t,e){return(null!=t?t.startContainer:void 0)===(null!=e?e.startContainer:void 0)&&(null!=t?t.startOffset:void 0)===(null!=e?e.startOffset:void 0)&&(null!=t?t.endContainer:void 0)===(null!=e?e.endContainer:void 0)&&(null!=t?t.endOffset:void 0)===(null!=e?e.endOffset:void 0)},e}(D.BasicObject),null==D.selectionChangeObserver&&(D.selectionChangeObserver=new D.SelectionChangeObserver)}.call(this),function(){var a,n,i,u,o,r,s,c,l,h,p=function(t,e){return function(){return t.apply(e,arguments)}},d=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;i=D.getDOMSelection,n=D.getDOMRange,h=D.setDOMRange,a=D.elementContainsNode,r=D.nodeIsCursorTarget,o=D.innerElementIsActive,
u=D.handleEvent,s=D.normalizeRange,c=D.rangeIsCollapsed,l=D.rangesAreEqual,D.SelectionManager=function(t){function e(t){this.element=t,this.selectionDidChange=p(this.selectionDidChange,this),this.didMouseDown=p(this.didMouseDown,this),this.locationMapper=new D.LocationMapper(this.element),this.pointMapper=new D.PointMapper,this.lockCount=0,u("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}return d(e,t),e.prototype.getLocationRange=function(t){var e;return null==t&&(t={}),!1===t.strict?this.createLocationRangeFromDOMRange(n(),{strict:!1}):t.ignoreLock?this.currentLocationRange:null!=(e=this.lockedLocationRange)?e:this.currentLocationRange},e.prototype.setLocationRange=function(t){var e;if(!this.lockedLocationRange)return t=s(t),(e=this.createDOMRangeFromLocationRange(t))?(h(e),this.updateCurrentLocationRange(t)):void 0},e.prototype.setLocationRangeFromPointRange=function(t){var e,n;return t=s(t),n=this.getLocationAtPoint(t[0]),e=this.getLocationAtPoint(t[1]),this.setLocationRange([n,e])},e.prototype.getClientRectAtLocationRange=function(t){var e;return(e=this.createDOMRangeFromLocationRange(t))?this.getClientRectsForDOMRange(e)[1]:void 0},e.prototype.locationIsCursorTarget=function(t){var e,n;return e=(n=this.findNodeAndOffsetFromLocation(t))[0],n[1],r(e)},e.prototype.lock=function(){return 0==this.lockCount++?(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange()):void 0},e.prototype.unlock=function(){var t;return 0==--this.lockCount&&(t=this.lockedLocationRange,(this.lockedLocationRange=null)!=t)?this.setLocationRange(t):void 0},e.prototype.clearSelection=function(){var t;return null!=(t=i())?t.removeAllRanges():void 0},e.prototype.selectionIsCollapsed=function(){var t;return!0===(null!=(t=n())?t.collapsed:void 0)},e.prototype.selectionIsExpanded=function(){return!this.selectionIsCollapsed()},e.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),e.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),e.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),e.proxyMethod("pointMapper.createDOMRangeFromPoint"),e.proxyMethod("pointMapper.getClientRectsForDOMRange"),e.prototype.didMouseDown=function(){return this.pauseTemporarily()},e.prototype.pauseTemporarily=function(){var o,r,n,i,s;return this.paused=!0,s=this,r=function(){var t,e;for(s.paused=!1,clearTimeout(i),t=0,e=n.length;t<e;t++)n[t].destroy();return a(document,s.element)?s.selectionDidChange():void 0},i=setTimeout(r,200),n=function(){var t,e,n,i;for(i=[],t=0,e=(n=["mousemove","keydown"]).length;t<e;t++)o=n[t],i.push(u(o,{onElement:document,withCallback:r}));return i}()},e.prototype.selectionDidChange=function(){return this.paused||o(this.element)?void 0:this.updateCurrentLocationRange()},e.prototype.updateCurrentLocationRange=function(t){var e;return(null!=t?t:t=this.createLocationRangeFromDOMRange(n()))&&!l(t,this.currentLocationRange)?(this.currentLocationRange=t,null!=(e=this.delegate)&&"function"==typeof e.locationRangeDidChange?e.locationRangeDidChange(this.currentLocationRange.slice(0)):void 0):void 0},e.prototype.createDOMRangeFromLocationRange=function(t){var e,n,i,o;return i=this.findContainerAndOffsetFromLocation(t[0]),n=c(t)?i:null!=(o=this.findContainerAndOffsetFromLocation(t[1]))?o:i,null!=i&&null!=n?((e=document.createRange()).setStart.apply(e,i),e.setEnd.apply(e,n),e):void 0},e.prototype.createLocationRangeFromDOMRange=function(t,e){var n,i;if(null!=t&&this.domRangeWithinElement(t)&&(i=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))return t.collapsed||(n=this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),s([i,n])},e.prototype.getLocationAtPoint=function(t){var e,n;return(e=this.createDOMRangeFromPoint(t))&&null!=(n=this.createLocationRangeFromDOMRange(e))?n[0]:void 0},e.prototype.domRangeWithinElement=function(t){return t.collapsed?a(this.element,t.startContainer):a(this.element,t.startContainer)&&a(this.element,t.endContainer)},e}(D.BasicObject)}.call(this),function(){var n,i,o,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].slice;i=D.rangeIsCollapsed,o=D.rangesAreEqual,n=D.objectsAreEqual,D.EditorController=function(t){function e(t){var e,n;this.editorElement=t.editorElement,e=t.document,n=t.html,this.selectionManager=new D.SelectionManager(this.editorElement),(this.selectionManager.delegate=this).composition=new D.Composition,(this.composition.delegate=this).attachmentManager=new D.AttachmentManager(this.composition.getAttachments()),(this.attachmentManager.delegate=this).inputController=new D.InputController(this.editorElement),(this.inputController.delegate=this).inputController.responder=this.composition,this.compositionController=new D.CompositionController(this.editorElement,this.composition),(this.compositionController.delegate=this).toolbarController=new D.ToolbarController(this.editorElement.toolbarElement),(this.toolbarController.delegate=this).editor=new D.Editor(this.composition,this.selectionManager,this.editorElement),null!=e?this.editor.loadDocument(e):this.editor.loadHTML(n)}var u;return r(e,t),e.prototype.registerSelectionManager=function(){return D.selectionChangeObserver.registerSelectionManager(this.selectionManager)},e.prototype.unregisterSelectionManager=function(){return D.selectionChangeObserver.unregisterSelectionManager(this.selectionManager)},e.prototype.compositionDidChangeDocument=function(){return this.notifyEditorElement("document-change"),this.handlingInput?void 0:this.render()},e.prototype.compositionDidChangeCurrentAttributes=function(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})},e.prototype.compositionDidPerformInsertionAtRange=function(t){return this.pasting?this.pastedRange=t:void 0},e.prototype.compositionShouldAcceptFile=function(t){return this.notifyEditorElement("file-accept",{file:t})},e.prototype.compositionDidAddAttachment=function(t){var e;return e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-add",{attachment:e})},e.prototype.compositionDidEditAttachment=function(t){var e;return this.compositionController.rerenderViewForObject(t),e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")},e.prototype.compositionDidChangeAttachmentPreviewURL=function(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")},e.prototype.compositionDidRemoveAttachment=function(t){var e;return e=this.attachmentManager.unmanageAttachment(t),this.notifyEditorElement("attachment-remove",{attachment:e})},e.prototype.compositionDidStartEditingAttachment=function(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)},e.prototype.compositionDidStopEditingAttachment=function(){return this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null},e.prototype.compositionDidRequestChangingSelectionToLocationRange=function(t){return!this.loadingSnapshot||this.isFocused()?(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()):void 0},e.prototype.compositionWillLoadSnapshot=function(){return this.loadingSnapshot=!0},e.prototype.compositionDidLoadSnapshot=function(){return this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1},e.prototype.getSelectionManager=function(){return this.selectionManager},e.proxyMethod("getSelectionManager().setLocationRange"),e.proxyMethod("getSelectionManager().getLocationRange"),e.prototype.attachmentManagerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},e.prototype.compositionControllerWillSyncDocumentView=function(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()},e.prototype.compositionControllerDidSyncDocumentView=function(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")},e.prototype.compositionControllerDidRender=function(){return null!=this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision},e.prototype.compositionControllerDidFocus=function(){return this.toolbarController.hideDialog(),this.notifyEditorElement("focus")},e.prototype.compositionControllerDidBlur=function(){return this.notifyEditorElement("blur")},e.prototype.compositionControllerDidSelectAttachment=function(t,e){return this.composition.editAttachment(t,e)},e.prototype.compositionControllerDidRequestDeselectingAttachment=function(t){var e,n;return e=null!=(n=this.attachmentLocationRange)?n:this.composition.document.getLocationRangeOfAttachment(t),this.selectionManager.setLocationRange(e[1])},e.prototype.compositionControllerWillUpdateAttachment=function(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})},e.prototype.compositionControllerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},e.prototype.inputControllerWillHandleInput=function(){return this.handlingInput=!0,this.requestedRender=!1},e.prototype.inputControllerDidRequestRender=function(){return this.requestedRender=!0},e.prototype.inputControllerDidHandleInput=function(){return this.handlingInput=!1,this.requestedRender?(this.requestedRender=!1,this.render()):void 0},e.prototype.inputControllerDidAllowUnhandledInput=function(){return this.notifyEditorElement("change")},e.prototype.inputControllerDidRequestReparse=function(){return this.reparse()},e.prototype.inputControllerWillPerformTyping=function(){return this.recordTypingUndoEntry()},e.prototype.inputControllerWillCutText=function(){return this.editor.recordUndoEntry("Cut")},e.prototype.inputControllerWillPaste=function(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})},e.prototype.inputControllerDidPaste=function(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})},e.prototype.inputControllerWillMoveText=function(){return this.editor.recordUndoEntry("Move")},e.prototype.inputControllerWillAttachFiles=function(){return this.editor.recordUndoEntry("Drop Files")},e.prototype.inputControllerDidReceiveKeyboardCommand=function(t){return this.toolbarController.applyKeyboardCommand(t)},e.prototype.inputControllerDidStartDrag=function(){return this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()},e.prototype.inputControllerDidReceiveDragOverPoint=function(t){return this.selectionManager.setLocationRangeFromPointRange(t)},e.prototype.inputControllerDidCancelDrag=function(){return this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null},e.prototype.locationRangeDidChange=function(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!o(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")},e.prototype.toolbarDidClickButton=function(){return this.getLocationRange()?void 0:this.setLocationRange({index:0,offset:0})},e.prototype.toolbarDidInvokeAction=function(t){return this.invokeAction(t)},e.prototype.toolbarDidToggleAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.toggleCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarDidUpdateAttribute=function(t,e){return this.recordFormattingUndoEntry(),this.composition.setCurrentAttribute(t,e),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarDidRemoveAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.removeCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarWillShowDialog=function(){return this.composition.expandSelectionForEditing(),this.freezeSelection()},e.prototype.toolbarDidShowDialog=function(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})},e.prototype.toolbarDidHideDialog=function(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})},e.prototype.freezeSelection=function(){return this.selectionFrozen?void 0:(this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render())},e.prototype.thawSelection=function(){return this.selectionFrozen?(this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()):void 0},e.prototype.actions={undo:{test:function(){return this.editor.canUndo()},perform:function(){return this.editor.undo()}},redo:{test:function(){return this.editor.canRedo()},perform:function(){return this.editor.redo()}},link:{test:function(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}}},e.prototype.canInvokeAction=function(t){var e,n;return!!this.actionIsExternal(t)||!!(null!=(e=this.actions[t])&&null!=(n=e.test)?n.call(this):void 0)},e.prototype.invokeAction=function(t){var e,n;return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t}):null!=(e=this.actions[t])&&null!=(n=e.perform)?n.call(this):void 0},e.prototype.actionIsExternal=function(t){return/^x-./.test(t)},e.prototype.getCurrentActions=function(){var t,e;for(t in e={},this.actions)e[t]=this.canInvokeAction(t);return e},e.prototype.updateCurrentActions=function(){var t;return t=this.getCurrentActions(),n(t,this.currentActions)?void 0:(this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions}))},e.prototype.runEditorFilters=function(){var t,e,n,i,o,r,s,a;for(a=this.composition.getSnapshot(),n=0,i=(o=this.editor.filters).length;n<i;n++)e=o[n],t=a.document,s=a.selectedRange,null==(a=null!=(r=e.call(this.editor,a))?r:{}).document&&(a.document=t),null==a.selectedRange&&(a.selectedRange=s);return u(a,this.composition.getSnapshot())?void 0:this.composition.loadSnapshot(a)},u=function(t,e){return o(t.selectedRange,e.selectedRange)&&t.document.isEqualTo(e.document)},e.prototype.reparse=function(){return this.composition.replaceHTML(this.editorElement.innerHTML)},e.prototype.render=function(){return this.compositionController.render()},e.prototype.updateInputElement=function(){var t,e;return t=this.compositionController.getSerializableElement(),e=D.serializeToContentType(t,"text/html"),this.editorElement.setInputElementValue(e)},e.prototype.notifyEditorElement=function(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)},e.prototype.removeAttachment=function(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()},e.prototype.recordFormattingUndoEntry=function(){var t;return t=this.selectionManager.getLocationRange(),i(t)?void 0:this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})},e.prototype.recordTypingUndoEntry=function(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})},e.prototype.getUndoContext=function(){var t;return t=1<=arguments.length?a.call(arguments,0):[],[this.getLocationContext(),this.getTimeContext()].concat(a.call(t))},e.prototype.getLocationContext=function(){var t;return t=this.selectionManager.getLocationRange(),i(t)?t[0].index:t},e.prototype.getTimeContext=function(){return 0<D.config.undoInterval?Math.floor((new Date).getTime()/D.config.undoInterval):0},e.prototype.isFocused=function(){var t;return this.editorElement===(null!=(t=this.editorElement.ownerDocument)?t.activeElement:void 0)},e}(D.Controller)}.call(this),function(){var t,e,n,i,o,r,s,a,u,c,l,h,p,d;e=D.browser,o=D.makeElement,r=D.triggerEvent,n=D.handleEvent,i=D.handleEventOnce,t=D.AttachmentView.attachmentSelector,D.registerElement("trix-editor",(h=0,a=function(t){return!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t?t.focus():void 0},p=function(t){return t.hasAttribute("contenteditable")?void 0:(t.setAttribute("contenteditable",""),i("focus",{onElement:t,withCallback:function(){return u(t)}}))},s=function(t){return t.hasAttribute("role")?void 0:t.setAttribute("role","textbox")},u=function(t){return l(t),d(t)},l=function(t){return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("enableObjectResizing"):void 0)?(document.execCommand("enableObjectResizing",!1,!1),n("mscontrolselect",{onElement:t,preventDefault:!0})):void 0},d=function(){var t;return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("DefaultParagraphSeparator"):void 0)&&("div"===(t=D.config.blockAttributes["default"].tagName)||"p"===t)?document.execCommand("DefaultParagraphSeparator",!1,t):void 0},c=e.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"},{defaultCSS:"%t {\n  display: block;\n}\n\n%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n  cursor: text;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "+t+" figcaption textarea {\n  resize: none;\n}\n\n%t "+t+" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "+t+" figcaption[data-trix-placeholder]:empty::before {\n  content: attr(data-trix-placeholder);\n  color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n  display: "+c.display+" !important;\n  width: "+c.width+" !important;\n  padding: 0 !important;\n  margin: 0 !important;\n  border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n  vertical-align: top !important;\n  margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n  vertical-align: bottom !important;\n  margin-right: -1px !important;\n}",trixId:{get:function(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++h),this.trixId)}},toolbarElement:{get:function(){var t,e,n;return this.hasAttribute("toolbar")?null!=(e=this.ownerDocument)?e.getElementById(this.getAttribute("toolbar")):void 0:this.parentNode?(n="trix-toolbar-"+this.trixId,this.setAttribute("toolbar",n),t=o("trix-toolbar",{id:n}),this.parentNode.insertBefore(t,this),t):void 0}},inputElement:{get:function(){var t,e,n;return this.hasAttribute("input")?null!=(n=this.ownerDocument)?n.getElementById(this.getAttribute("input")):void 0:this.parentNode?(e="trix-input-"+this.trixId,this.setAttribute("input",e),t=o("input",{type:"hidden",id:e}),this.parentNode.insertBefore(t,this.nextElementSibling),t):void 0}},editor:{get:function(){var t;return null!=(t=this.editorController)?t.editor:void 0}},name:{get:function(){var t;return null!=(t=this.inputElement)?t.name:void 0}},value:{get:function(){var t;return null!=(t=this.inputElement)?t.value:void 0},set:function(t){var e;return this.defaultValue=t,null!=(e=this.editor)?e.loadHTML(this.defaultValue):void 0}},notify:function(t,e){return this.editorController?r("trix-"+t,{onElement:this,attributes:e}):void 0},setInputElementValue:function(t){var e;return null!=(e=this.inputElement)?e.value=t:void 0},initialize:function(){return p(this),s(this)},connect:function(){return this.hasAttribute("data-trix-internal")?void 0:(this.editorController||(r("trix-before-initialize",{onElement:this}),this.editorController=new D.EditorController({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame((t=this,function(){return r("trix-initialize",{onElement:t})}))),this.editorController.registerSelectionManager(),this.registerResetListener(),a(this));var t},disconnect:function(){var t;return null!=(t=this.editorController)&&t.unregisterSelectionManager(),this.unregisterResetListener()},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},resetBubbled:function(t){var e;return t.target!==(null!=(e=this.inputElement)?e.form:void 0)||t.defaultPrevented?void 0:this.reset()},reset:function(){return this.value=this.defaultValue}}))}.call(this),function(){}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=D:"function"==typeof define&&define.amd&&define(D)}.call(this),function(r){r.fn.extend({altaiOff:function(t){var e,n,i,o=r(this);if(i={debug:!1},i=r.extend(i,t),n=function(t){return i.debug?("undefined"===console&&console,console.log(t)):undefined},e=function(){o.each(function(){r(this).on("click",function(t){t.preventDefault()})})},0<o.length)return this.each(function(){e(),n("Altai off activated")})}})}(jQuery,window,document),function(r){r.fn.extend({altaiSortable:function(t){var e,n,i,o=r(this);if(i={debug:!0},i=r.extend(i,t),n=function(t){return i.debug?("undefined"===console&&console,console.log(t)):undefined},e=function(){o.each(function(){r(this).sortable({axis:"y",cursor:"move",option:"grid",handle:".handle",update:function(){Rails.ajax({url:r(this).data("url"),type:"PATCH",data:r(this).sortable("serialize")})}})})},0<o.length)return this.each(function(){e(),n("Altai sortable activated")})}})}(jQuery,window,document),function(r){r.fn.extend({altaiCenter:function(t){var e,n,i,o=r(this);i={debug:!1},i=r.extend(i,t),n=function(t){return i.debug?("undefined"===console&&console,console.log(t)):undefined},e=function(){o.wrap("<div class='center-h-parent'><div class='center-h-child'></div></div>")},0<o.length&&(e(),n("Altai Center Activated"))}})}(jQuery,window,document),bindEvents=function(){$(".off").altaiOff(),$(".sortable").altaiSortable(),$(".altai-center").altaiCenter(),$("option").each(function(){t=$(this).text(),$(this).text(t.replace(/^(.)|\s(.)/g,function(t){return t.toUpperCase()}))})},$(document).on("turbolinks:load",function(){bindEvents(),Turbolinks.clearCache()});